# Stripe Connect Payoutsï¼ˆæç°ï¼‰åŠŸèƒ½å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åˆ›å»º Payouts è§†å›¾ç»„ä»¶

- âœ… åˆ›å»ºäº† `StripeConnectPayoutsView.swift`
- âœ… ä½¿ç”¨åŸç”Ÿ `PayoutsViewController` æ›¿ä»£ WebView
- âœ… å®ç°äº†å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
- âœ… é›†æˆäº†è´¦æˆ·çŠ¶æ€æ£€æŸ¥

### 2. é›†æˆåˆ°åº”ç”¨ç•Œé¢

- âœ… åœ¨ `WalletView` ä¸­æ·»åŠ äº†æç°ç®¡ç†å…¥å£
- âœ… åœ¨ `SettingsView` ä¸­æ·»åŠ äº†æç°ç®¡ç†å…¥å£
- âœ… æ›¿æ¢äº†åŸæœ‰çš„"å³å°†ä¸Šçº¿"å ä½å¡ç‰‡

### 3. åç«¯æ”¯æŒ

- âœ… åç«¯å·²æ”¯æŒåˆ›å»º payouts account session
- âœ… API ç«¯ç‚¹ï¼š`POST /api/stripe/connect/account_session`
- âœ… æ”¯æŒ `enable_payouts` å‚æ•°

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### Payouts ç»„ä»¶åŠŸèƒ½

æ ¹æ® Stripe æ–‡æ¡£ï¼ŒPayouts ç»„ä»¶æä¾›ï¼š

1. **ä½™é¢æ‘˜è¦**ï¼šæ˜¾ç¤ºè´¦æˆ·ä½™é¢
2. **æç°è®¡åˆ’**ï¼šæ˜¾ç¤ºæç°æ—¶é—´è¡¨
3. **æç°åˆ—è¡¨**ï¼šæ˜¾ç¤ºå†å²æç°è®°å½•
4. **å³æ—¶æç°**ï¼šæ”¯æŒå³æ—¶æç°åŠŸèƒ½ï¼ˆå¦‚æœå¯ç”¨ï¼‰
5. **æ ‡å‡†æç°**ï¼šæ”¯æŒæ ‡å‡†æç°åŠŸèƒ½
6. **ç¼–è¾‘æç°è®¡åˆ’**ï¼šå…è®¸ç”¨æˆ·ä¿®æ”¹æç°æ—¶é—´è¡¨
7. **å¤–éƒ¨è´¦æˆ·æ”¶é›†**ï¼šæ”¶é›†é“¶è¡Œè´¦æˆ·ä¿¡æ¯

### åç«¯é…ç½®

åç«¯åœ¨åˆ›å»º Account Session æ—¶å·²é…ç½®ï¼š

```python
components_config["payouts"] = {
    "enabled": True,
    "features": {
        "instant_payouts": True,  # å³æ—¶æç°
        "standard_payouts": True,  # æ ‡å‡†æç°
        "edit_payout_schedule": True,  # ç¼–è¾‘æç°è®¡åˆ’
        "external_account_collection": True,  # å¤–éƒ¨è´¦æˆ·æ”¶é›†
        "disable_stripe_user_authentication": True,  # ç¦ç”¨ Stripe ç”¨æˆ·è®¤è¯ï¼ˆCustom è´¦æˆ·ï¼‰
    }
}
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### ä»é’±åŒ…é¡µé¢è¿›å…¥

1. æ‰“å¼€åº”ç”¨
2. è¿›å…¥"æˆ‘çš„é’±åŒ…"
3. åœ¨"é’±åŒ…ä½™é¢"éƒ¨åˆ†ç‚¹å‡»"æç°ç®¡ç†"

### ä»è®¾ç½®é¡µé¢è¿›å…¥

1. æ‰“å¼€åº”ç”¨
2. è¿›å…¥"è®¾ç½®"
3. åœ¨"æ”¶æ¬¾è´¦æˆ·"éƒ¨åˆ†ç‚¹å‡»"æç°ç®¡ç†"

## ğŸ”§ ä»£ç ç»“æ„

### ä¸»è¦æ–‡ä»¶

- `StripeConnectPayoutsView.swift` - Payouts ä¸»è§†å›¾
- `WalletView.swift` - å·²æ·»åŠ æç°å…¥å£
- `SettingsView.swift` - å·²æ·»åŠ æç°å…¥å£

### å…³é”®ç»„ä»¶

1. **StripeConnectPayoutsView**ï¼šä¸»è§†å›¾ï¼Œç®¡ç†çŠ¶æ€å’Œé”™è¯¯
2. **PayoutsViewControllerWrapper**ï¼šå°† UIKit çš„ PayoutsViewController åŒ…è£…ä¸º SwiftUI View
3. **StripeConnectPayoutsViewModel**ï¼šç®¡ç†æ•°æ®åŠ è½½å’ŒçŠ¶æ€

## âš ï¸ æ³¨æ„äº‹é¡¹

### è´¦æˆ·çŠ¶æ€æ£€æŸ¥

ä»£ç ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
- è´¦æˆ·æ˜¯å¦å·²å®Œæˆè®¾ç½®ï¼ˆ`details_submitted`ï¼‰
- è´¦æˆ·æ˜¯å¦å·²å¯ç”¨æ”¶æ¬¾ï¼ˆ`charges_enabled`ï¼‰

å¦‚æœè´¦æˆ·æœªå®Œæˆè®¾ç½®ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œå¼•å¯¼ç”¨æˆ·å…ˆå®Œæˆè´¦æˆ·å…¥é©»ã€‚

### å³æ—¶æç°è¦æ±‚

æ ¹æ® Stripe æ–‡æ¡£ï¼Œå¯ç”¨å³æ—¶æç°å¯èƒ½éœ€è¦ï¼š

1. **å¹³å°æ”¶è´¹**ï¼šå¦‚æœå¹³å°ä¸ºå…³è”è´¦æˆ·æ”¶å–è´¹ç”¨ï¼Œå¿…é¡»åœ¨ Dashboard ä¸­è®¾ç½®å³æ—¶æç°è´§å¸åŒ–
2. **è´Ÿä½™é¢è´£ä»»**ï¼š
   - å¦‚æœå¹³å°æ‰¿æ‹…è´Ÿä½™é¢è´£ä»»ï¼šå¹³å°å’Œè´¦æˆ·å¿…é¡»åœ¨æ”¯æŒçš„å›½å®¶ï¼Œä¸”ä½¿ç”¨æœ¬åœ°è´§å¸
   - å¦‚æœ Stripe æ‰¿æ‹…è´Ÿä½™é¢è´£ä»»ï¼šStripe æ§åˆ¶è´¦æˆ·çš„èµ„æ ¼

### æ ‡å‡†æç°

è¦ä½¿ç”¨æ ‡å‡†æ‰‹åŠ¨æç°ï¼Œå…³è”è´¦æˆ·éœ€è¦å°†æç°è®¡åˆ’è®¾ç½®ä¸º `manual`ã€‚å¯ä»¥é€šè¿‡è®¾ç½® `edit_payout_schedule` ä¸º `true` æ¥å…è®¸ç”¨æˆ·åœ¨ç»„ä»¶ä¸­ç¼–è¾‘æç°è®¡åˆ’ã€‚

## ğŸ§ª æµ‹è¯•æ­¥éª¤

1. **ç¡®ä¿è´¦æˆ·å·²å®Œæˆè®¾ç½®**
   - å…ˆå®Œæˆè´¦æˆ·å…¥é©»ï¼ˆStripeConnectOnboardingViewï¼‰
   - ç¡®ä¿è´¦æˆ·çŠ¶æ€ä¸º `details_submitted: true` å’Œ `charges_enabled: true`

2. **æµ‹è¯•æç°åŠŸèƒ½**
   - ä»é’±åŒ…æˆ–è®¾ç½®é¡µé¢è¿›å…¥æç°ç®¡ç†
   - éªŒè¯åŸç”Ÿ UI æ­£å¸¸æ˜¾ç¤º
   - æµ‹è¯•æŸ¥çœ‹ä½™é¢ã€æç°è®°å½•ç­‰åŠŸèƒ½

3. **æµ‹è¯•é”™è¯¯å¤„ç†**
   - å¦‚æœè´¦æˆ·æœªå®Œæˆè®¾ç½®ï¼Œåº”æ˜¾ç¤ºé”™è¯¯æç¤º
   - ç½‘ç»œé”™è¯¯åº”æ­£ç¡®æ˜¾ç¤º

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Stripe Payouts ç»„ä»¶æ–‡æ¡£](https://docs.stripe.com/connect/supported-embedded-components/payouts.md)
- [Stripe Connect åµŒå…¥å¼ç»„ä»¶æŒ‡å—](https://docs.stripe.com/connect/get-started-connect-embedded-components.md?platform=ios)
- [å³æ—¶æç°æ–‡æ¡£](https://docs.stripe.com/connect/instant-payouts.md)

## âœ… æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²åˆ›å»º
- [ ] å·²é›†æˆåˆ° WalletView
- [ ] å·²é›†æˆåˆ° SettingsView
- [ ] è´¦æˆ·çŠ¶æ€æ£€æŸ¥æ­£å¸¸
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡

## ğŸ¯ ä¸‹ä¸€æ­¥

å¦‚æœéœ€è¦ï¼Œå¯ä»¥ï¼š

1. **æ·»åŠ ä½™é¢æ˜¾ç¤º**ï¼šåœ¨ WalletView ä¸­æ˜¾ç¤º Stripe è´¦æˆ·ä½™é¢
2. **æ·»åŠ æç°å¿«æ·æ“ä½œ**ï¼šåœ¨é’±åŒ…é¡µé¢æ·»åŠ å¿«é€Ÿæç°æŒ‰é’®
3. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**ï¼šæ·»åŠ åŠ è½½åŠ¨ç”»ã€æˆåŠŸæç¤ºç­‰

