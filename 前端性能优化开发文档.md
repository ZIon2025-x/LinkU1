# å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¼€å‘æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [ä¼˜åŒ–æ¦‚è¿°](#ä¼˜åŒ–æ¦‚è¿°)
2. [å½“å‰æ€§èƒ½çŠ¶å†µåˆ†æ](#å½“å‰æ€§èƒ½çŠ¶å†µåˆ†æ)
3. [å·²å®æ–½çš„ä¼˜åŒ–æªæ–½](#å·²å®æ–½çš„ä¼˜åŒ–æªæ–½)
4. [å¾…ä¼˜åŒ–é¡¹ç›®æ¸…å•](#å¾…ä¼˜åŒ–é¡¹ç›®æ¸…å•)
5. [è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ](#è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ)
6. [å®æ–½ä¼˜å…ˆçº§](#å®æ–½ä¼˜å…ˆçº§)
7. [æ€§èƒ½ç›‘æ§ä¸æµ‹è¯•](#æ€§èƒ½ç›‘æ§ä¸æµ‹è¯•)
8. [æœ€ä½³å®è·µæŒ‡å—](#æœ€ä½³å®è·µæŒ‡å—)

---

## ä¼˜åŒ–æ¦‚è¿°

æœ¬æ–‡æ¡£æ—¨åœ¨å…¨é¢åˆ†æå’Œä¼˜åŒ–å‰ç«¯åº”ç”¨çš„æ€§èƒ½ï¼Œè§£å†³ç”¨æˆ·åé¦ˆçš„"æµè§ˆç‚¹å‡»ç­‰å‰ç«¯è¡Œä¸ºæ…¢ã€æœ‰å¡é¡¿"çš„é—®é¢˜ã€‚é€šè¿‡ç³»ç»Ÿæ€§çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œä½¿é¡µé¢åŠ è½½æ›´å¿«ã€äº¤äº’æ›´æµç•…ã€‚

### ğŸ“Œ å¿«é€Ÿå¼€å§‹ï¼ˆTL;DRï¼‰

1. **å…ˆåšè¿™ 4 ä»¶æ ¸å¿ƒ P0 ä»»åŠ¡**ï¼šæ»šåŠ¨äº‹ä»¶ä¼˜åŒ–ã€å›¾ç‰‡æ ¼å¼ä¼˜åŒ–ã€å‡å°‘å†…è”æ ·å¼ã€Context ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ä½œä¸º P0ï¼Œä½†å·¥ä½œé‡è¾ƒå¤§ï¼Œå®‰æ’åœ¨ç¬¬äºŒé˜¶æ®µå•ç‹¬æ¨è¿›ï¼‰
2. **åšå®Œåè·‘ä¸€è½® Lighthouse + Web Vitals**ï¼šå¯¹æ¯”åŸºçº¿ï¼ŒéªŒè¯æ•ˆæœ
3. **åç»­æŒ‰"å®æ–½ä¼˜å…ˆçº§"è¡¨é€é¡¹æ¨è¿›**ï¼šå‹¾é€‰çŠ¶æ€ï¼ŒæŒç»­ä¼˜åŒ–

### ğŸ“¦ æ‰§è¡Œ Checklistï¼ˆç»™è‡ªå·±/å›¢é˜Ÿæ‰“å‹¾ç”¨ï¼‰

- [ ] **P0-1 æ»šåŠ¨äº‹ä»¶ä¼˜åŒ–**ï¼ˆuseThrottledCallback + passive scrollï¼‰
- [ ] **P0-3 å›¾ç‰‡æ ¼å¼ä¼˜åŒ–**ï¼ˆLazyImage ä¸Šçº¿ä¸”ä¸»è·¯å¾„æ›¿æ¢å®Œæˆï¼‰
- [ ] **P0-4 å‡å°‘å†…è”æ ·å¼**ï¼ˆå…³é”®é¡µé¢å·²è¿ç§»åˆ° CSS Module / styledï¼‰
- [ ] **P0-5 Context ä¼˜åŒ–**ï¼ˆContext æ‹†åˆ† + useMemo/useCallback å®Œæˆï¼‰
- [ ] **P0-2 ä»»åŠ¡åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨**ï¼ˆç¬¬äºŒé˜¶æ®µä¸“é—¨æ¨è¿›ï¼‰

### ä¼˜åŒ–ç›®æ ‡

- **æ ¸å¿ƒ Web Vitals**ï¼šLCP < 2.5sï¼ŒINP < 200msï¼ˆ75 åˆ†ä½ï¼‰ï¼ŒCLS < 0.1
- **ä¸»è§‚äº¤äº’æ„Ÿå—**ï¼šå¸¸è§ç‚¹å‡»åé¦ˆ < 100ms
- **é¦–å±åŠ è½½æ—¶é—´**ï¼šä» ~3.5s é™è‡³ < 2.0sï¼ˆç›®æ ‡ï¼š< 1.5sï¼‰
- **æ»šåŠ¨æµç•…åº¦**ï¼š60 FPS
- **é¡µé¢åˆ‡æ¢é€Ÿåº¦**ï¼š< 300ms
- **å†…å­˜ä½¿ç”¨**ï¼šæ§åˆ¶åœ¨åˆç†èŒƒå›´å†…ï¼Œé¿å…å†…å­˜æ³„æ¼

---

## å½“å‰æ€§èƒ½çŠ¶å†µåˆ†æ

### âœ… å·²ä¼˜åŒ–çš„æ–¹é¢

1. **è·¯ç”±æ‡’åŠ è½½**ï¼šå·²å®ç°ï¼Œå‡å°‘åˆå§‹åŒ…å¤§å° 60-70%
2. **React Query ç¼“å­˜**ï¼šå·²é…ç½®ï¼Œå‡å°‘é‡å¤è¯·æ±‚
3. **éƒ¨åˆ†ç»„ä»¶ memo åŒ–**ï¼šTaskCardã€TaskDetailModal ç­‰å·²ä½¿ç”¨ React.memo
4. **å›¾ç‰‡æ‡’åŠ è½½ç»„ä»¶**ï¼šLazyImage ç»„ä»¶å·²åˆ›å»º
5. **API é˜²æŠ–**ï¼šæœç´¢å…³é”®è¯å·²æ·»åŠ é˜²æŠ–

### âš ï¸ éœ€è¦ä¼˜åŒ–çš„æ–¹é¢

1. **æ»šåŠ¨æ€§èƒ½**ï¼šæ»šåŠ¨äº‹ä»¶å¤„ç†å¯èƒ½å½±å“æ€§èƒ½
2. **å¤§é‡ DOM æ“ä½œ**ï¼šä»»åŠ¡åˆ—è¡¨æ¸²æŸ“å¯èƒ½é€ æˆå¡é¡¿
3. **å›¾ç‰‡ä¼˜åŒ–ä¸è¶³**ï¼šç¼ºå°‘ WebP/AVIF æ ¼å¼æ”¯æŒã€å“åº”å¼å›¾ç‰‡
4. **å†…è”æ ·å¼è¿‡å¤š**ï¼šå½±å“æ¸²æŸ“æ€§èƒ½
5. **Context æ›´æ–°é¢‘ç¹**ï¼šå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“
6. **åŠ¨ç”»æ€§èƒ½**ï¼šéƒ¨åˆ†åŠ¨ç”»å¯èƒ½å½±å“æµç•…åº¦
7. **ä»£ç åˆ†å‰²ç²’åº¦**ï¼šå¯ä»¥æ›´ç»†ç²’åº¦åˆ†å‰²
8. **é•¿åˆ—è¡¨æ¸²æŸ“**ï¼šç¼ºå°‘è™šæ‹Ÿæ»šåŠ¨

---

## å·²å®æ–½çš„ä¼˜åŒ–æªæ–½

### 1. è·¯ç”±æ‡’åŠ è½½ âš¡

**å®ç°ä½ç½®**ï¼š`frontend/src/App.tsx`

```tsx
// æ‡’åŠ è½½ç»„ä»¶ - å‡å°‘åˆå§‹åŒ…å¤§å°
const Home = lazyWithRetry(() => import('./pages/Home'));
const Tasks = lazyWithRetry(() => import('./pages/Tasks'));
// ... å…¶ä»–é¡µé¢
```

**æ•ˆæœ**ï¼š
- åˆå§‹åŒ…å¤§å°å‡å°‘ 60-70%
- é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 40-50%

### 2. React Query ç¼“å­˜é…ç½®

**å®ç°ä½ç½®**ï¼š`frontend/src/App.tsx`

```tsx
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000,  // 5åˆ†é’Ÿæ•°æ®æ–°é²œ
      gcTime: 10 * 60 * 1000,     // 10åˆ†é’Ÿåƒåœ¾å›æ”¶
      refetchOnWindowFocus: false, // çª—å£èšç„¦æ—¶ä¸è‡ªåŠ¨é‡æ–°è·å–
    },
  },
});
```

### 3. ç»„ä»¶ memo åŒ–

**å®ç°ä½ç½®**ï¼š`frontend/src/components/TaskCard.tsx`

```tsx
const TaskCard: React.FC<TaskCardProps> = React.memo(({ ... }) => {
  // ...
});
```

### 4. å›¾ç‰‡æ‡’åŠ è½½ç»„ä»¶

**å®ç°ä½ç½®**ï¼š`frontend/src/components/LazyImage.tsx`

åŸºäºåŸç”Ÿ `loading="lazy"` çš„æ‡’åŠ è½½å›¾ç‰‡ç»„ä»¶ï¼Œæ”¯æŒç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆAVIF/WebPï¼‰å’Œå“åº”å¼å›¾ç‰‡ã€‚

---

## å¾…ä¼˜åŒ–é¡¹ç›®æ¸…å•

### ğŸ”´ P0 - é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®æ–½ï¼‰

1. **æ»šåŠ¨äº‹ä»¶ä¼˜åŒ–**
   - é—®é¢˜ï¼šæ»šåŠ¨ç›‘å¬å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜
   - ä½ç½®ï¼š`frontend/src/pages/Tasks.tsx` (line 876-904)
   - å½±å“ï¼šæ»šåŠ¨å¡é¡¿

2. **ä»»åŠ¡åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨**
   - é—®é¢˜ï¼šå¤§é‡ä»»åŠ¡å¡ç‰‡åŒæ—¶æ¸²æŸ“å¯¼è‡´å¡é¡¿
   - ä½ç½®ï¼š`frontend/src/pages/Tasks.tsx`
   - å½±å“ï¼šåˆ—è¡¨æ»šåŠ¨ä¸æµç•…
   - è¯´æ˜ï¼šP0 ä¸­å·¥ä½œé‡è¾ƒå¤§ï¼Œå®‰æ’åœ¨ç¬¬äºŒé˜¶æ®µå•ç‹¬æ¨è¿›

3. **å›¾ç‰‡æ ¼å¼ä¼˜åŒ–**
   - é—®é¢˜ï¼šæœªä½¿ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆWebP/AVIFï¼‰
   - ä½ç½®ï¼šæ‰€æœ‰å›¾ç‰‡æ˜¾ç¤ºç»„ä»¶
   - å½±å“ï¼šå›¾ç‰‡åŠ è½½æ…¢ã€ä½“ç§¯å¤§

4. **å‡å°‘å†…è”æ ·å¼**
   - é—®é¢˜ï¼šå¤§é‡å†…è”æ ·å¼å½±å“æ¸²æŸ“æ€§èƒ½
   - ä½ç½®ï¼šå¤šä¸ªç»„ä»¶æ–‡ä»¶
   - å½±å“ï¼šæ ·å¼è®¡ç®—å¼€é”€å¤§

5. **Context ä¼˜åŒ–**
   - é—®é¢˜ï¼šContext æ›´æ–°å¯èƒ½å¯¼è‡´å¤§é‡ç»„ä»¶é‡æ¸²æŸ“
   - ä½ç½®ï¼š`frontend/src/contexts/`
   - å½±å“ï¼šä¸å¿…è¦çš„é‡æ¸²æŸ“

### ğŸŸ¡ P1 - ä¸­ä¼˜å…ˆçº§ï¼ˆè¿‘æœŸå®æ–½ï¼‰

6. **åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–**
   - é—®é¢˜ï¼šéƒ¨åˆ†åŠ¨ç”»ä½¿ç”¨ JavaScriptï¼Œåº”ä½¿ç”¨ CSS
   - ä½ç½®ï¼šå¤šä¸ªç»„ä»¶
   - å½±å“ï¼šåŠ¨ç”»å¡é¡¿

7. **ä»£ç åˆ†å‰²ä¼˜åŒ–**
   - é—®é¢˜ï¼šæŸäº›å¤§ç»„ä»¶å¯ä»¥è¿›ä¸€æ­¥åˆ†å‰²
   - ä½ç½®ï¼š`frontend/src/pages/Message.tsx` ç­‰
   - å½±å“ï¼šåˆå§‹åŠ è½½æ…¢

8. **é¢„åŠ è½½å…³é”®èµ„æº**
   - é—®é¢˜ï¼šå…³é”®èµ„æºæœªé¢„åŠ è½½
   - ä½ç½®ï¼š`frontend/public/index.html`
   - å½±å“ï¼šé¦–å±åŠ è½½æ…¢

9. **Service Worker ç¼“å­˜**
   - é—®é¢˜ï¼šç¼ºå°‘ç¦»çº¿ç¼“å­˜ç­–ç•¥
   - ä½ç½®ï¼šéœ€è¦æ–°å»º
   - å½±å“ï¼šé‡å¤è®¿é—®åŠ è½½æ…¢

### ğŸŸ¢ P2 - ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸè§„åˆ’ï¼‰

10. **Web Workers**
    - é—®é¢˜ï¼šå¤æ‚è®¡ç®—é˜»å¡ä¸»çº¿ç¨‹
    - ä½ç½®ï¼šéœ€è¦è¯†åˆ«è®¡ç®—å¯†é›†å‹æ“ä½œ
    - å½±å“ï¼šé¡µé¢å“åº”æ…¢

11. **HTTP/2 / HTTP/3 ä¼ è¾“ä¼˜åŒ– & èµ„æºæç¤º**
    - é—®é¢˜ï¼šæœªä½¿ç”¨èµ„æºé¢„åŠ è½½å’Œä¼ è¾“ä¼˜åŒ–
    - ä½ç½®ï¼šæœåŠ¡å™¨é…ç½®ã€å‰ç«¯èµ„æºæç¤º
    - å½±å“ï¼šèµ„æºåŠ è½½æ…¢
    - è¯´æ˜ï¼šä½¿ç”¨ `link rel="preload"` / `rel="prefetch"`ï¼Œå¦‚åç«¯æ”¯æŒå¯è€ƒè™‘ 103 Early Hints

12. **æ€§èƒ½ç›‘æ§**
    - é—®é¢˜ï¼šç¼ºå°‘æ€§èƒ½ç›‘æ§
    - ä½ç½®ï¼šéœ€è¦é›†æˆ
    - å½±å“ï¼šæ— æ³•è¿½è¸ªæ€§èƒ½é—®é¢˜

---

## è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ

### 1. æ»šåŠ¨äº‹ä»¶ä¼˜åŒ– ğŸ”´ P0

**é—®é¢˜åˆ†æ**ï¼š
- å½“å‰ä½¿ç”¨ `requestAnimationFrame` èŠ‚æµï¼Œä½†å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–
- æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨å¯èƒ½è¿‡å¤š

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

```typescript
// frontend/src/pages/Tasks.tsx

// ä¼˜åŒ–å‰
useEffect(() => {
  const handleScroll = () => {
    // æ»šåŠ¨å¤„ç†é€»è¾‘
  };
  
  let ticking = false;
  const throttledHandleScroll = () => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        handleScroll();
        ticking = false;
      });
      ticking = true;
    }
  };
  
  window.addEventListener('scroll', throttledHandleScroll, { passive: true });
  return () => window.removeEventListener('scroll', throttledHandleScroll);
}, [dependencies]);

// ä¼˜åŒ–åï¼šä½¿ç”¨è‡ªå®šä¹‰ Hook
import { useThrottledCallback } from '../hooks/useThrottledCallback';

// ç»„ä»¶é¡¶å±‚ï¼šå…ˆæ‹¿åˆ°èŠ‚æµåçš„å›è°ƒï¼ˆHook å¿…é¡»åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ï¼‰
const handleScroll = useThrottledCallback(() => {
  // æ»šåŠ¨å¤„ç†é€»è¾‘
  if (loadingMore || loading || !hasMore) return;
  
  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
  const windowHeight = window.innerHeight;
  const documentHeight = document.documentElement.scrollHeight;
  
  if (scrollTop + windowHeight >= documentHeight - 200) {
    loadMoreTasks();
  }
}, 100); // 100ms èŠ‚æµ

// å†åœ¨ useEffect é‡Œåªè´Ÿè´£ç»‘å®š/è§£ç»‘
// handleScroll æœ¬èº«æ˜¯ç¨³å®šçš„ï¼ˆåªä¾èµ– delayï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ª effect åªä¼šåœ¨æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡
useEffect(() => {
  window.addEventListener('scroll', handleScroll, { passive: true });
  return () => window.removeEventListener('scroll', handleScroll);
}, [handleScroll]);
```

**åˆ›å»º useThrottledCallback Hook**ï¼š

```typescript
// frontend/src/hooks/useThrottledCallback.ts
import { useCallback, useRef, useEffect } from 'react';

export function useThrottledCallback<T extends (...args: any[]) => any>(
  callback: T,
  delay: number
): T {
  // åˆå§‹åŒ–ä¸º 0ï¼Œç¡®ä¿ç¬¬ä¸€æ¬¡è°ƒç”¨ç«‹å³æ‰§è¡Œ
  const lastRun = useRef(0);
  // ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿç±»å‹ï¼Œé¿å…ä¸ Node.js ç±»å‹å†²çª
  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);
  // ç”¨ ref ä¿å­˜æœ€æ–° callbackï¼Œé¿å…æ¯æ¬¡ callback å˜åŒ–éƒ½é‡æ–°ç”ŸæˆèŠ‚æµå‡½æ•°
  const callbackRef = useRef(callback);
  
  // å§‹ç»ˆä¿å­˜æœ€æ–°çš„ callback
  useEffect(() => {
    callbackRef.current = callback;
  }, [callback]);
  
  // ç»„ä»¶å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨ï¼Œé¿å…åœ¨å¸è½½ç»„ä»¶ä¸Š setState
  useEffect(() => {
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);
  
  return useCallback(
    ((...args: Parameters<T>) => {
      const now = Date.now();
      const timeSinceLastRun = now - lastRun.current;
      
      const run = () => {
        lastRun.current = Date.now();
        callbackRef.current(...args);
      };
      
      if (timeSinceLastRun >= delay) {
        run();
      } else {
        if (timeoutRef.current) {
          clearTimeout(timeoutRef.current);
        }
        timeoutRef.current = setTimeout(run, delay - timeSinceLastRun);
      }
    }) as T,
    [delay] // åªä¾èµ– delayï¼Œcallback é€šè¿‡ ref è®¿é—®æœ€æ–°å€¼
  );
}
```

**é¢„æœŸæ•ˆæœ**ï¼š
- æ»šåŠ¨äº‹ä»¶å¤„ç†æ›´é«˜æ•ˆ
- å‡å°‘ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨
- æ»šåŠ¨æ›´æµç•…

---

### 2. ä»»åŠ¡åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ ğŸ”´ P0

**é—®é¢˜åˆ†æ**ï¼š
- ä»»åŠ¡åˆ—è¡¨å¯èƒ½åŒ…å«å¤§é‡ä»»åŠ¡å¡ç‰‡
- åŒæ—¶æ¸²æŸ“æ‰€æœ‰å¡ç‰‡å¯¼è‡´ DOM èŠ‚ç‚¹è¿‡å¤šï¼Œå½±å“æ€§èƒ½

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `react-window` æˆ– `react-virtualized`

```bash
npm install react-window
npm install @types/react-window --save-dev
```

```typescript
// frontend/src/pages/Tasks.tsx
import { FixedSizeGrid as Grid } from 'react-window';

// ä¼˜åŒ–å‰
<div className="tasks-grid" style={{...}}>
  {filteredTasks.map(task => (
    <TaskCard key={task.id} task={task} ... />
  ))}
</div>

// ä¼˜åŒ–å
const Cell = ({ columnIndex, rowIndex, style }: any) => {
  const index = rowIndex * 2 + columnIndex; // å‡è®¾æ¯è¡Œ2åˆ—
  if (index >= filteredTasks.length) return null;
  
  const task = filteredTasks[index];
  return (
    <div style={style}>
      <TaskCard key={task.id} task={task} ... />
    </div>
  );
};

<Grid
  columnCount={2}
  columnWidth={isMobile ? 170 : 300}
  height={600}
  rowCount={Math.ceil(filteredTasks.length / 2)}
  rowHeight={400}
  width={1200}
>
  {Cell}
</Grid>
```

**æˆ–è€…ä½¿ç”¨æ›´ç®€å•çš„æ–¹æ¡ˆ**ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸçš„ä»»åŠ¡

```typescript
// frontend/src/hooks/useVirtualList.ts
import { useState, useEffect, useRef } from 'react';

interface UseVirtualListOptions {
  itemHeight: number;
  containerHeight: number;
  overscan?: number; // é¢å¤–æ¸²æŸ“çš„é¡¹ç›®æ•°
}

export function useVirtualList<T>(
  items: T[],
  options: UseVirtualListOptions
) {
  const { itemHeight, containerHeight, overscan = 3 } = options;
  const [scrollTop, setScrollTop] = useState(0);
  const containerRef = useRef<HTMLDivElement>(null);
  
  const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);
  const endIndex = Math.min(
    items.length - 1,
    Math.ceil((scrollTop + containerHeight) / itemHeight) + overscan
  );
  
  const visibleItems = items.slice(startIndex, endIndex + 1);
  
  useEffect(() => {
    const container = containerRef.current;
    if (!container) return;
    
    const handleScroll = () => {
      setScrollTop(container.scrollTop);
    };
    
    container.addEventListener('scroll', handleScroll, { passive: true });
    return () => container.removeEventListener('scroll', handleScroll);
  }, []);
  
  return {
    containerRef,
    visibleItems,
    startIndex,
    totalHeight: items.length * itemHeight,
    offsetY: startIndex * itemHeight,
  };
}
```

**åœ¨ JSX ä¸­ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨**ï¼š

```typescript
// frontend/src/pages/Tasks.tsx
import { useVirtualList } from '../hooks/useVirtualList';

const Tasks: React.FC = () => {
  const tasks = [...]; // ä»»åŠ¡åˆ—è¡¨æ•°æ®
  
  const {
    containerRef,
    visibleItems,
    totalHeight,
    offsetY
  } = useVirtualList(tasks, {
    itemHeight: 400, // æ¯ä¸ªä»»åŠ¡å¡ç‰‡çš„é«˜åº¦
    containerHeight: 600, // å®¹å™¨é«˜åº¦
    overscan: 3 // é¢å¤–æ¸²æŸ“ 3 ä¸ªé¡¹ç›®ï¼Œæå‡æ»šåŠ¨ä½“éªŒ
  });
  
  return (
    <div
      ref={containerRef}
      style={{
        height: 600,
        overflowY: 'auto',
        position: 'relative'
      }}
    >
      {/* å ä½å®¹å™¨ï¼Œä¿æŒæ€»é«˜åº¦ */}
      <div style={{ height: totalHeight, position: 'relative' }}>
        {/* å¯è§é¡¹ç›®å®¹å™¨ï¼Œä½¿ç”¨ transform å®šä½ */}
        <div style={{ transform: `translateY(${offsetY}px)` }}>
          {visibleItems.map((task, index) => (
            <TaskCard
              key={task.id}
              task={task}
              style={{ height: 400 }}
            />
          ))}
        </div>
      </div>
    </div>
  );
};
```

**é‡è¦æç¤º**ï¼š
- **å›ºå®šé«˜åº¦å‰æ**ï¼šè¯¥è™šæ‹Ÿåˆ—è¡¨å®ç°å‡å®šæ¯ä¸ª TaskCard é«˜åº¦æ’ä¸º 400pxã€‚å¦‚æœå¡ç‰‡é«˜åº¦éšå†…å®¹å˜åŒ–ï¼Œè¯·æ”¹ç”¨æ”¯æŒå¯å˜é«˜åº¦çš„åº“ï¼ˆä¾‹å¦‚ `react-window` çš„ `VariableSizeList`ï¼‰ï¼Œæˆ–è€…åœ¨æ¸²æŸ“åä¸ŠæŠ¥çœŸå®é«˜åº¦å†åšè™šæ‹ŸåŒ–ã€‚
- **å“åº”å¼å°ºå¯¸**ï¼šä½¿ç”¨ `react-window` çš„ Grid ç»„ä»¶æ—¶ï¼Œ`width` å’Œ `height` å†™æˆäº†å›ºå®šå€¼ï¼ˆ1200 / 600ï¼‰ã€‚å®é™…ä½¿ç”¨æ—¶å»ºè®®é…åˆ `react-window` çš„ `AutoSizer` ç»„ä»¶æˆ–è‡ªå®šä¹‰ `useContainerSize` Hookï¼Œä»¥é€‚åº”ä¸åŒå±å¹•å°ºå¯¸ã€‚

**é¢„æœŸæ•ˆæœ**ï¼š
- DOM èŠ‚ç‚¹æ•°é‡å‡å°‘ 80-90%
- æ»šåŠ¨æ€§èƒ½æå‡ 3-5 å€
- å†…å­˜ä½¿ç”¨å‡å°‘

---

### 3. å›¾ç‰‡æ ¼å¼ä¼˜åŒ– ğŸ”´ P0

**é—®é¢˜åˆ†æ**ï¼š
- æœªä½¿ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆWebP/AVIFï¼‰
- å›¾ç‰‡å°ºå¯¸æœªä¼˜åŒ–
- ç¼ºå°‘å“åº”å¼å›¾ç‰‡

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 3.1 åç«¯æ”¯æŒå›¾ç‰‡æ ¼å¼åå•†

ç¡®ä¿åç«¯æ”¯æŒé€šè¿‡ `Accept` å¤´è‡ªåŠ¨è¿”å›æœ€ä½³æ ¼å¼ï¼š

```typescript
// å‰ç«¯è¯·æ±‚æ—¶è‡ªåŠ¨æ·»åŠ  Accept å¤´
// æ³¨æ„ï¼šæ­¤ç¤ºä¾‹ä¸»è¦é€‚ç”¨äºé€šè¿‡ fetch ä¸»åŠ¨è¯·æ±‚å›¾ç‰‡èµ„æºçš„åœºæ™¯
// å¯¹äº <img> / <picture> æ ‡ç­¾ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ ¹æ®è‡ªèº«èƒ½åŠ›å‘é€åˆé€‚çš„ Accept å¤´ï¼Œä¸éœ€è¦å‰ç«¯æ‰‹åŠ¨è®¾ç½®
const response = await fetch(imageUrl, {
  headers: {
    'Accept': 'image/avif,image/webp,image/apng,image/*',
  },
});
```

#### 3.2 ä¼˜åŒ– LazyImage ç»„ä»¶

**æ³¨æ„**ï¼šä»¥ä¸‹ç¤ºä¾‹å‡è®¾å›¾ç‰‡æœåŠ¡æ”¯æŒ `?w=` å‚æ•°è¿›è¡ŒæŒ‰å®½åº¦è£å‰ªã€‚å¦‚æœä½¿ç”¨ CDNï¼Œé€šå¸¸ä¼šè‡ªåŠ¨æ”¯æŒæ­¤ç±»å‚æ•°ã€‚

ä½¿ç”¨ `<picture>` æ ‡ç­¾è®©æµè§ˆå™¨è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ ¼å¼ï¼Œé¿å…åœ¨å‰ç«¯åŒæ­¥æ£€æµ‹æ ¼å¼æ”¯æŒï¼ˆcanvas æ£€æµ‹æˆæœ¬é«˜ä¸”å¯èƒ½æŠ›å¼‚å¸¸ï¼‰ï¼š

```typescript
// frontend/src/components/LazyImage.tsx
interface LazyImageProps extends React.ImgHTMLAttributes<HTMLImageElement> {
  src: string; // åŸºç¡€å›¾ç‰‡ URLï¼ˆå¿…é¡»ï¼Œç»„ä»¶å†…éƒ¨ä¼šå¤„ç†æ ¼å¼å’Œå“åº”å¼ï¼‰
  alt: string; // å¿…é¡»
}

const LazyImage: React.FC<LazyImageProps> = ({
  src,
  alt,
  className,
  sizes: propSizes,
  ...imgProps
}) => {
  // æå–åŸºç¡€è·¯å¾„ï¼ˆå»é™¤æ‰©å±•åï¼‰
  const srcBase = src.replace(/\.(jpg|jpeg|png|webp|avif)$/i, '');
  
  // ä½¿ç”¨ä¼ å…¥çš„ sizes æˆ–é»˜è®¤å€¼ï¼Œé¿å…é‡å¤ props
  const sizes = propSizes || "(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw";
  
  return (
    <picture>
      {/* AVIF æ ¼å¼ï¼ˆæœ€ä½³å‹ç¼©ï¼‰ */}
      <source
        srcSet={`
          ${srcBase}.avif?w=400 400w,
          ${srcBase}.avif?w=800 800w,
          ${srcBase}.avif?w=1200 1200w
        `}
        type="image/avif"
        sizes={sizes}
      />
      {/* WebP æ ¼å¼ï¼ˆæ¬¡ä¼˜ï¼‰ */}
      <source
        srcSet={`
          ${srcBase}.webp?w=400 400w,
          ${srcBase}.webp?w=800 800w,
          ${srcBase}.webp?w=1200 1200w
        `}
        type="image/webp"
        sizes={sizes}
      />
      {/* é™çº§æ–¹æ¡ˆï¼šåŸå§‹æ ¼å¼ */}
      <img
        src={`${srcBase}.jpg`}
        srcSet={`
          ${srcBase}.jpg?w=400 400w,
          ${srcBase}.jpg?w=800 800w,
          ${srcBase}.jpg?w=1200 1200w
        `}
        sizes={sizes}
        loading="lazy"
        decoding="async"
        alt={alt}
        className={className}
        {...imgProps}
      />
    </picture>
  );
};
```

**æˆ–è€…å®Œå…¨äº¤ç»™åç«¯/CDN æŒ‰ Accept å¤´åå•†**ï¼ˆæ¨èï¼‰ï¼š

```typescript
// å¦‚æœåç«¯/CDN æ”¯æŒæŒ‰ Accept å¤´è‡ªåŠ¨è¿”å›æœ€ä½³æ ¼å¼
<img
  src={`${srcBase}?w=800&format=auto`}
  srcSet={`
    ${srcBase}?w=400&format=auto 400w,
    ${srcBase}?w=800&format=auto 800w,
    ${srcBase}?w=1200&format=auto 1200w
  `}
  sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
  loading="lazy"
  decoding="async"
  alt={alt}
/>
```

#### 3.3 å›¾ç‰‡å‹ç¼©å’Œ CDN

- ä½¿ç”¨ CDN è‡ªåŠ¨å‹ç¼©å’Œæ ¼å¼è½¬æ¢
- é…ç½®å›¾ç‰‡è´¨é‡å‚æ•°ï¼ˆquality=80ï¼‰
- ä½¿ç”¨é€‚å½“çš„å›¾ç‰‡å°ºå¯¸

**é¢„æœŸæ•ˆæœ**ï¼š
- å›¾ç‰‡ä½“ç§¯å‡å°‘ 30-50%
- å›¾ç‰‡åŠ è½½é€Ÿåº¦æå‡ 40-60%
- å¸¦å®½ä½¿ç”¨å‡å°‘

---

### 4. å‡å°‘å†…è”æ ·å¼ ğŸ”´ P0

**é—®é¢˜åˆ†æ**ï¼š
- å¤§é‡å†…è”æ ·å¼å¯¼è‡´æ ·å¼è®¡ç®—å¼€é”€å¤§
- æ— æ³•åˆ©ç”¨æµè§ˆå™¨æ ·å¼ç¼“å­˜

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 4.1 æå–æ ·å¼åˆ° CSS æ–‡ä»¶

```typescript
// ä¼˜åŒ–å‰ï¼šfrontend/src/pages/Home.tsx
<div style={{
  background: '#fff',
  padding: '24px',
  borderRadius: '20px',
  boxShadow: '0 8px 32px rgba(0,0,0,0.08)',
}}>

// ä¼˜åŒ–åï¼šåˆ›å»º CSS æ¨¡å—
// frontend/src/pages/Home.module.css
.taskCard {
  background: #fff;
  padding: 24px;
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
}

// frontend/src/pages/Home.tsx
import styles from './Home.module.css';

<div className={styles.taskCard}>
```

#### 4.2 ä½¿ç”¨ styled-components ä¼˜åŒ–

å¦‚æœé¡¹ç›®ä½¿ç”¨ styled-componentsï¼Œå¯ä»¥ä¼˜åŒ–ï¼š

```typescript
// ä¼˜åŒ–å‰ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°æ ·å¼å¯¹è±¡
<div style={{ color: 'red', fontSize: '16px' }}>

// ä¼˜åŒ–åï¼šä½¿ç”¨ styled-components
import styled from 'styled-components';

const StyledDiv = styled.div`
  color: red;
  font-size: 16px;
`;

<StyledDiv>
```

#### 4.3 ä½¿ç”¨ CSS å˜é‡

```css
/* frontend/src/index.css */
:root {
  --primary-color: #3b82f6;
  --border-radius: 12px;
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
  --shadow-md: 0 8px 32px rgba(0,0,0,0.08);
}
```

```typescript
// ä½¿ç”¨ CSS å˜é‡
<div style={{
  background: 'var(--primary-color)',
  borderRadius: 'var(--border-radius)',
  boxShadow: 'var(--shadow-md)',
}}>
```

**é¢„æœŸæ•ˆæœ**ï¼š
- æ ·å¼è®¡ç®—æ—¶é—´å‡å°‘ 20-30%
- æ¸²æŸ“æ€§èƒ½æå‡
- ä»£ç æ›´æ˜“ç»´æŠ¤

---

### 5. Context ä¼˜åŒ– ğŸ”´ P0

**é—®é¢˜åˆ†æ**ï¼š
- Context æ›´æ–°ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…ç»„ä»¶é‡æ¸²æŸ“
- å¤šä¸ª Context å¯èƒ½å¯¼è‡´çº§è”æ›´æ–°

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 5.1 æ‹†åˆ† Context

```typescript
// ä¼˜åŒ–å‰ï¼šä¸€ä¸ªå¤§çš„ Context
const AppContext = createContext({
  user: null,
  language: 'zh',
  theme: 'light',
  // ... å¾ˆå¤šçŠ¶æ€
});

// ä¼˜åŒ–åï¼šæŒ‰åŠŸèƒ½æ‹†åˆ†
const UserContext = createContext(null);
const LanguageContext = createContext('zh');
const ThemeContext = createContext('light');
```

#### 5.2 ä½¿ç”¨ useMemo å’Œ useCallback

```typescript
// frontend/src/contexts/LanguageContext.tsx

// ä¼˜åŒ–å‰
const LanguageProvider: React.FC = ({ children }) => {
  const [language, setLanguage] = useState('zh');
  
  const value = {
    language,
    setLanguage,
    t: (key: string) => translations[language][key],
  };
  
  return <LanguageContext.Provider value={value}>{children}</LanguageContext.Provider>;
};

// ä¼˜åŒ–å
const LanguageProvider: React.FC = ({ children }) => {
  const [language, setLanguage] = useState('zh');
  
  const t = useCallback((key: string) => {
    return translations[language][key] || key;
  }, [language]);
  
  const value = useMemo(() => ({
    language,
    setLanguage,
    t,
  }), [language, t]);
  
  return <LanguageContext.Provider value={value}>{children}</LanguageContext.Provider>;
};
```

#### 5.3 ä½¿ç”¨é€‰æ‹©å™¨æ¨¡å¼

```typescript
// åˆ›å»ºé€‰æ‹©å™¨ Hook
function useLanguageSelector<T>(selector: (context: LanguageContextType) => T): T {
  const context = useContext(LanguageContext);
  return useMemo(() => selector(context), [context, selector]);
}

// ä½¿ç”¨
const language = useLanguageSelector(ctx => ctx.language);
const t = useLanguageSelector(ctx => ctx.t);
```

**é¢„æœŸæ•ˆæœ**ï¼š
- ä¸å¿…è¦çš„é‡æ¸²æŸ“å‡å°‘ 50-70%
- Context æ›´æ–°æ€§èƒ½æå‡
- ç»„ä»¶æ¸²æŸ“æ›´é«˜æ•ˆ

---

### 6. åŠ¨ç”»æ€§èƒ½ä¼˜åŒ– ğŸŸ¡ P1

**é—®é¢˜åˆ†æ**ï¼š
- éƒ¨åˆ†åŠ¨ç”»ä½¿ç”¨ JavaScriptï¼Œåº”ä½¿ç”¨ CSS
- åŠ¨ç”»å¯èƒ½è§¦å‘é‡æ’/é‡ç»˜

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 6.1 ä½¿ç”¨ CSS åŠ¨ç”»æ›¿ä»£ JS åŠ¨ç”»

```typescript
// ä¼˜åŒ–å‰ï¼šä½¿ç”¨ JavaScript åŠ¨ç”»
const [transform, setTransform] = useState('translateY(0)');

useEffect(() => {
  const interval = setInterval(() => {
    setTransform(prev => prev === 'translateY(0)' ? 'translateY(-4px)' : 'translateY(0)');
  }, 100);
  return () => clearInterval(interval);
}, []);

<div style={{ transform }}>

// ä¼˜åŒ–åï¼šä½¿ç”¨ CSS åŠ¨ç”»
// frontend/src/components/TaskCard.module.css
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

.taskCard {
  animation: float 3s ease-in-out infinite;
  will-change: transform; /* æç¤ºæµè§ˆå™¨ä¼˜åŒ– */
}
```

#### 6.2 ä½¿ç”¨ transform å’Œ opacity

```css
/* ä¼˜åŒ–ï¼šä½¿ç”¨ transform å’Œ opacityï¼ˆGPU åŠ é€Ÿï¼‰ */
.fadeIn {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.fadeIn.visible {
  opacity: 1;
  transform: translateY(0);
}

/* é¿å…ä½¿ç”¨ left/top/width/heightï¼ˆè§¦å‘é‡æ’ï¼‰ */
```

#### 6.3 ä½¿ç”¨ will-change æç¤ºæµè§ˆå™¨

```css
.animatedElement {
  will-change: transform, opacity;
  /* æµè§ˆå™¨ä¼šæå‰ä¼˜åŒ– */
}
```

**é¢„æœŸæ•ˆæœ**ï¼š
- åŠ¨ç”»å¸§ç‡æå‡åˆ° 60 FPS
- CPU ä½¿ç”¨å‡å°‘
- åŠ¨ç”»æ›´æµç•…

---

### 7. ä»£ç åˆ†å‰²ä¼˜åŒ– ğŸŸ¡ P1

**é—®é¢˜åˆ†æ**ï¼š
- æŸäº›å¤§ç»„ä»¶ï¼ˆå¦‚ Message.tsxï¼‰å¯ä»¥è¿›ä¸€æ­¥åˆ†å‰²
- ç¬¬ä¸‰æ–¹åº“å¯ä»¥æŒ‰éœ€åŠ è½½

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 7.1 ç»„ä»¶çº§ä»£ç åˆ†å‰²

```typescript
// frontend/src/pages/Message.tsx

// ä¼˜åŒ–å‰ï¼šæ‰€æœ‰ç»„ä»¶åœ¨ä¸€ä¸ªæ–‡ä»¶
import TaskDetailModal from '../components/TaskDetailModal';
import LoginModal from '../components/LoginModal';

// ä¼˜åŒ–åï¼šæŒ‰éœ€åŠ è½½
const TaskDetailModal = lazy(() => import('../components/TaskDetailModal'));
const LoginModal = lazy(() => import('../components/LoginModal'));

// ä½¿ç”¨ Suspense åŒ…è£¹
<Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
  {showTaskDetailModal && <TaskDetailModal ... />}
</Suspense>
```

#### 7.2 ç¬¬ä¸‰æ–¹åº“æŒ‰éœ€åŠ è½½

```typescript
// ä¼˜åŒ–å‰ï¼šå…¨éƒ¨å¯¼å…¥
import * as dayjs from 'dayjs';
import utc from 'dayjs/plugin/utc';
import timezone from 'dayjs/plugin/timezone';

// ä¼˜åŒ–åï¼šæŒ‰éœ€å¯¼å…¥
// æ³¨æ„ï¼šå®é™…ä½¿ç”¨æ—¶è®°å¾—ä» default å–å‡ºå‡½æ•°ï¼ˆES æ¨¡å—çš„ default exportï¼‰
const loadDayjs = async () => {
  const dayjsMod = await import('dayjs');
  const utcMod = await import('dayjs/plugin/utc');
  const tzMod = await import('dayjs/plugin/timezone');
  
  const dayjs = dayjsMod.default;
  const utc = utcMod.default;
  const timezone = tzMod.default;
  
  dayjs.extend(utc);
  dayjs.extend(timezone);
  
  return dayjs;
};
```

#### 7.3 è·¯ç”±çº§ä»£ç åˆ†å‰²

```typescript
// frontend/src/App.tsx

// å·²ç»å®ç°ï¼Œä½†å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–
const Home = lazyWithRetry(() => import('./pages/Home'));
const Tasks = lazyWithRetry(() => import('./pages/Tasks'));

// å¯ä»¥æ·»åŠ é¢„åŠ è½½
const preloadRoute = (routeImport: () => Promise<any>) => {
  routeImport();
};

// é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½
<Link
  to="/tasks"
  onMouseEnter={() => preloadRoute(() => import('./pages/Tasks'))}
>
```

**é¢„æœŸæ•ˆæœ**ï¼š
- åˆå§‹åŒ…å¤§å°è¿›ä¸€æ­¥å‡å°‘ 20-30%
- é¡µé¢åˆ‡æ¢æ›´å¿«
- æŒ‰éœ€åŠ è½½æ›´é«˜æ•ˆ

---

### 8. é¢„åŠ è½½å…³é”®èµ„æº ğŸŸ¡ P1

**é—®é¢˜åˆ†æ**ï¼š
- å…³é”®èµ„æºæœªé¢„åŠ è½½
- å­—ä½“ã€å…³é”®å›¾ç‰‡åŠ è½½æ…¢

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 8.1 åœ¨ index.html ä¸­æ·»åŠ é¢„åŠ è½½

```html
<!-- frontend/public/index.html -->
<head>
  <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
  <link rel="preload" href="/static/background.jpg" as="image" />
  <link rel="preload" href="/static/favicon.png" as="image" />
  
  <!-- é¢„è¿æ¥å…³é”®åŸŸå -->
  <link rel="preconnect" href="https://api.link2ur.com" />
  <link rel="dns-prefetch" href="https://api.link2ur.com" />
  
  <!-- é¢„åŠ è½½å­—ä½“ -->
  <link rel="preload" href="/fonts/main-font.woff2" as="font" type="font/woff2" crossorigin />
</head>
```

#### 8.2 ä½¿ç”¨ React çš„ preload

```typescript
// frontend/src/App.tsx
import { useEffect } from 'react';

useEffect(() => {
  // é¢„åŠ è½½å…³é”®å›¾ç‰‡
  const preloadImages = [
    '/static/background.jpg',
    '/static/favicon.png',
  ];
  
  preloadImages.forEach(src => {
    const link = document.createElement('link');
    link.rel = 'preload';
    link.as = 'image';
    link.href = src;
    document.head.appendChild(link);
  });
}, []);
```

#### 8.3 é¢„åŠ è½½è·¯ç”±

```typescript
// åœ¨ç”¨æˆ·å¯èƒ½è®¿é—®çš„é¡µé¢é¢„åŠ è½½
useEffect(() => {
  // é¢„åŠ è½½å¯èƒ½è®¿é—®çš„é¡µé¢
  const timer = setTimeout(() => {
    import('./pages/Tasks');
    import('./pages/PublishTask');
  }, 2000); // 2ç§’åé¢„åŠ è½½
  
  return () => clearTimeout(timer);
}, []);
```

**é¢„æœŸæ•ˆæœ**ï¼š
- å…³é”®èµ„æºåŠ è½½æ›´å¿«
- é¦–å±æ¸²æŸ“æ—¶é—´å‡å°‘ 10-20%
- ç”¨æˆ·ä½“éªŒæå‡

---

### 9. Service Worker ç¼“å­˜ ğŸŸ¡ P1

**é—®é¢˜åˆ†æ**ï¼š
- ç¼ºå°‘ç¦»çº¿ç¼“å­˜ç­–ç•¥
- é‡å¤è®¿é—®æ—¶èµ„æºé‡æ–°åŠ è½½

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

#### 9.1 åˆ›å»º Service Worker

**é‡è¦**ï¼šService Worker éœ€è¦åŒºåˆ†é™æ€èµ„æºå’Œ API è¯·æ±‚ï¼Œä½¿ç”¨ä¸åŒçš„ç¼“å­˜ç­–ç•¥ï¼š
- **é™æ€èµ„æº**ï¼ˆHTML/CSS/JS/å›¾ç‰‡/å­—ä½“ï¼‰ï¼šcache-firstï¼ˆç¼“å­˜ä¼˜å…ˆï¼‰
- **API è¯·æ±‚**ï¼šnetwork-firstï¼ˆç½‘ç»œä¼˜å…ˆï¼‰æˆ– stale-while-revalidateï¼ˆåå°æ›´æ–°ï¼‰

```typescript
// frontend/public/sw.js
const CACHE_NAME = 'link2ur-v1';
// åªç¼“å­˜é™æ€èµ„æºï¼Œä¸ç¼“å­˜ API
const urlsToCache = [
  '/',
  '/static/favicon.png',
  '/static/background.jpg',
  // æ³¨æ„ï¼šè¿™é‡Œä¸åŒ…å« API ç«¯ç‚¹
];

// åˆ¤æ–­æ˜¯å¦ä¸ºé™æ€èµ„æº
function isStaticResource(url) {
  const staticExtensions = ['.js', '.css', '.png', '.jpg', '.jpeg', '.webp', '.avif', '.woff2', '.woff', '.ttf'];
  const urlPath = new URL(url).pathname;
  return staticExtensions.some(ext => urlPath.endsWith(ext)) || urlPath === '/';
}

// åˆ¤æ–­æ˜¯å¦ä¸º API è¯·æ±‚
function isApiRequest(url) {
  return url.includes('/api/') || url.includes('/graphql');
}

// å®‰è£… Service Worker
self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => cache.addAll(urlsToCache))
  );
  // å¯é€‰ï¼šå®‰è£…å®Œç«‹å³è¿›å…¥æ¿€æ´»é˜¶æ®µï¼ˆè®©æ–°ç‰ˆæœ¬ SW ç«‹å³ç”Ÿæ•ˆï¼‰
  // self.skipWaiting();
});

// æ¿€æ´»é˜¶æ®µï¼šæ¸…ç†æ—§ç‰ˆæœ¬ç¼“å­˜
self.addEventListener('activate', (event) => {
  const cacheWhitelist = [CACHE_NAME];
  
  event.waitUntil(
    caches.keys().then((cacheNames) =>
      Promise.all(
        cacheNames.map((cacheName) => {
          if (!cacheWhitelist.includes(cacheName)) {
            return caches.delete(cacheName);
          }
        })
      )
    )
  );
  // å¯é€‰ï¼šæ¿€æ´»åç«‹å³æ¥ç®¡æ‰€æœ‰é¡µé¢ï¼ˆè®©æ–°ç‰ˆæœ¬ SW ç«‹å³ç”Ÿæ•ˆï¼‰
  // self.clients.claim();
});

// æ‹¦æˆªè¯·æ±‚
self.addEventListener('fetch', (event) => {
  const { request } = event;
  const url = request.url;
  
  // å¯¼èˆªè¯·æ±‚ï¼ˆHTML é¡µé¢ï¼‰ï¼šç¦»çº¿æ—¶å›é€€åˆ°ç¼“å­˜çš„å…¥å£é¡µé¢
  if (request.mode === 'navigate') {
    event.respondWith(
      fetch(request).catch(async () => {
        const cache = await caches.open(CACHE_NAME);
        const cachedIndex = await cache.match('/');
        return cachedIndex || Response.error();
      })
    );
    return;
  }
  
  // API è¯·æ±‚ï¼šnetwork-first ç­–ç•¥ï¼ˆå¼ºå®æ—¶æ€§ï¼‰
  if (isApiRequest(url)) {
    event.respondWith(
      fetch(request)
        .then((response) => {
          // API è¯·æ±‚ä¸ç¼“å­˜ï¼Œç›´æ¥è¿”å›ç½‘ç»œå“åº”
          return response;
        })
        .catch(() => {
          // ç½‘ç»œå¤±è´¥æ—¶ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªé»˜è®¤å“åº”æˆ–é”™è¯¯é¡µé¢
          return new Response(JSON.stringify({ error: 'ç½‘ç»œè¯·æ±‚å¤±è´¥' }), {
            status: 503,
            headers: { 'Content-Type': 'application/json' }
          });
        })
    );
    return;
  }
  
  // é™æ€èµ„æºï¼šcache-first ç­–ç•¥
  if (isStaticResource(url)) {
    event.respondWith(
      caches.match(request)
        .then((cachedResponse) => {
          // ç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›
          if (cachedResponse) {
            return cachedResponse;
          }
          
          // ç¼“å­˜æœªå‘½ä¸­ï¼Œè¯·æ±‚ç½‘ç»œå¹¶ç¼“å­˜
          return fetch(request).then((response) => {
            // æ£€æŸ¥å“åº”æ˜¯å¦æœ‰æ•ˆ
            // æ³¨æ„ï¼šåªç¼“å­˜åŒæºèµ„æºï¼ˆresponse.type === 'basic'ï¼‰
            // è·¨åŸŸèµ„æºï¼ˆå¦‚ CDN å­—ä½“ï¼‰é€šå¸¸æ˜¯ 'opaque' ç±»å‹ï¼Œå‡ºäºå®‰å…¨å’Œå¤æ‚åº¦è€ƒè™‘æš‚ä¸ç¼“å­˜
            if (!response || response.status !== 200 || response.type !== 'basic') {
              return response;
            }
            
            // å…‹éš†å“åº”å¹¶ç¼“å­˜
            const responseToCache = response.clone();
            caches.open(CACHE_NAME)
              .then((cache) => {
                cache.put(request, responseToCache);
              });
            
            return response;
          });
        })
    );
  } else {
    // å…¶ä»–è¯·æ±‚ç›´æ¥èµ°ç½‘ç»œ
    event.respondWith(fetch(request));
  }
});
```

#### 9.2 æ³¨å†Œ Service Worker

```typescript
// frontend/src/index.tsx
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then((registration) => {
        console.log('SW registered: ', registration);
      })
      .catch((registrationError) => {
        console.log('SW registration failed: ', registrationError);
      });
  });
}
```

**è¯´æ˜**ï¼š
- **å¯¼èˆªè¯·æ±‚ç¦»çº¿å…œåº•**ï¼šå¯¼èˆªè¯·æ±‚ï¼ˆ`request.mode === 'navigate'`ï¼‰åœ¨ç¦»çº¿æ—¶ä¼šå›é€€åˆ°ç¼“å­˜çš„ `/`ï¼ˆSPA å…¥å£ï¼‰ï¼Œä¿è¯"è‡³å°‘èƒ½æ‰“å¼€åº”ç”¨å£³"ï¼Œè®©å‰ç«¯è·¯ç”±æ¥ç®¡åç»­å¯¼èˆªã€‚
- **é™æ€èµ„æºç¼“å­˜**ï¼šé™æ€èµ„æºä½¿ç”¨ cache-first ç­–ç•¥ï¼Œæå‡é‡å¤è®¿é—®é€Ÿåº¦ã€‚å‡ºäºå®‰å…¨å’Œå¤æ‚åº¦è€ƒè™‘ï¼Œç›®å‰åªç¼“å­˜åŒæºé™æ€èµ„æºï¼ˆ`response.type === 'basic'`ï¼‰ï¼Œè·¨åŸŸ CDN èµ„æºæš‚ä¸ç¼“å­˜ã€‚
- **API ä¸ç¼“å­˜**ï¼šAPI è¯·æ±‚ä½¿ç”¨ network-first ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®å®æ—¶æ€§ã€‚
- **ç¼“å­˜ç‰ˆæœ¬å‡çº§**ï¼šæ›´æ–°é™æ€èµ„æºæˆ–ç¼“å­˜ç­–ç•¥æ—¶ï¼Œåªéœ€è¦æŠŠ `CACHE_NAME` æ”¹æˆæ–°ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ `link2ur-v2`ï¼‰ï¼Œæ¿€æ´»é˜¶æ®µä¼šæ¸…ç†æ—§ç¼“å­˜ï¼Œé¿å…æ— é™å †ç§¯ã€‚
- **ç«‹å³ç”Ÿæ•ˆï¼ˆå¯é€‰ï¼‰**ï¼šå¦‚éœ€è®©æ–°ç‰ˆæœ¬ Service Worker ç«‹å³ç”Ÿæ•ˆï¼Œå¯ä½¿ç”¨ `skipWaiting()` + `clients.claim()`ï¼Œä½†è¦æ³¨æ„è¿™å¯èƒ½ä¼šåœ¨æ—§é¡µé¢å°šæœªå®Œå…¨å…³é—­æ—¶åˆ‡æ¢åˆ°æ–°ç¼“å­˜ç­–ç•¥ã€‚

**é¢„æœŸæ•ˆæœ**ï¼š
- é‡å¤è®¿é—®é€Ÿåº¦æå‡ 50-70%
- æ”¯æŒç¦»çº¿è®¿é—®ï¼ˆè‡³å°‘èƒ½æ‰“å¼€åº”ç”¨ï¼‰
- å‡å°‘æœåŠ¡å™¨è´Ÿè½½

---

## å®æ–½ä¼˜å…ˆçº§

### ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰- ç«‹å³å®æ–½

| åºå· | é¡¹ç›® | çŠ¶æ€ | é¢„è®¡æ—¶é—´ |
|------|------|------|----------|
| 1 | **æ»šåŠ¨äº‹ä»¶ä¼˜åŒ–** | â¬œ æœªå¼€å§‹ | 1å¤© |
| 2 | **å›¾ç‰‡æ ¼å¼ä¼˜åŒ–** | â¬œ æœªå¼€å§‹ | 2å¤© |
| 3 | **å‡å°‘å†…è”æ ·å¼** | â¬œ æœªå¼€å§‹ | 3å¤© |
| 4 | **Context ä¼˜åŒ–** | â¬œ æœªå¼€å§‹ | 2å¤© |

**é¢„æœŸæ•ˆæœ**ï¼šæ€§èƒ½æå‡ 30-40%

### ç¬¬äºŒé˜¶æ®µï¼ˆ2-4å‘¨ï¼‰- è¿‘æœŸå®æ–½

| åºå· | é¡¹ç›® | çŠ¶æ€ | é¢„è®¡æ—¶é—´ |
|------|------|------|----------|
| 5 | **ä»»åŠ¡åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨** | â¬œ æœªå¼€å§‹ | 5å¤© |
| 6 | **åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–** | â¬œ æœªå¼€å§‹ | 3å¤© |
| 7 | **ä»£ç åˆ†å‰²ä¼˜åŒ–** | â¬œ æœªå¼€å§‹ | 3å¤© |
| 8 | **é¢„åŠ è½½å…³é”®èµ„æº** | â¬œ æœªå¼€å§‹ | 2å¤© |

**é¢„æœŸæ•ˆæœ**ï¼šæ€§èƒ½æå‡ 20-30%

### ç¬¬ä¸‰é˜¶æ®µï¼ˆ1-2æœˆï¼‰- é•¿æœŸè§„åˆ’

| åºå· | é¡¹ç›® | çŠ¶æ€ | é¢„è®¡æ—¶é—´ |
|------|------|------|----------|
| 9 | **Service Worker ç¼“å­˜** | â¬œ æœªå¼€å§‹ | 5å¤© |
| 10 | **Web Workers** | â¬œ æœªå¼€å§‹ | 5å¤© |
| 11 | **HTTP/2 / HTTP/3 ä¼ è¾“ä¼˜åŒ– & èµ„æºæç¤º** | â¬œ æœªå¼€å§‹ | 3å¤© |
| 12 | **æ€§èƒ½ç›‘æ§** | â¬œ æœªå¼€å§‹ | 3å¤© |

**é¢„æœŸæ•ˆæœ**ï¼šæ€§èƒ½æå‡ 10-20%

**çŠ¶æ€è¯´æ˜**ï¼š
- â¬œ æœªå¼€å§‹
- ğŸ”„ è¿›è¡Œä¸­
- âœ… å·²å®Œæˆ

---

## æ€§èƒ½ç›‘æ§ä¸æµ‹è¯•

### æ€§èƒ½æŒ‡æ ‡

ä½¿ç”¨ä»¥ä¸‹å·¥å…·ç›‘æ§æ€§èƒ½ï¼š

1. **Lighthouse**ï¼šç»¼åˆæ€§èƒ½è¯„åˆ†
2. **Web Vitals**ï¼šæ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ï¼ˆCore Web Vitalsï¼‰
   - **LCP (Largest Contentful Paint)**ï¼š< 2.5s
   - **INP (Interaction to Next Paint)**ï¼š< 200msï¼ˆ75 åˆ†ä½ï¼‰
   - **CLS (Cumulative Layout Shift)**ï¼š< 0.1
3. **Chrome DevTools Performance**ï¼šè¯¦ç»†æ€§èƒ½åˆ†æ

**æ³¨æ„**ï¼šè‡ª 2024-03-12 èµ·ï¼ŒINP å·²æ­£å¼å–ä»£ FID æˆä¸º Core Web Vitals çš„äº¤äº’æŒ‡æ ‡ã€‚Core Web Vitals ç°åœ¨æ˜¯ LCP + INP + CLSã€‚

### æµ‹è¯•æ–¹æ³•

**æ³¨æ„**ï¼šç”Ÿäº§ç¯å¢ƒä¸»è¦ä¾èµ– Web Vitals / åŸ‹ç‚¹ï¼Œä¸å»ºè®®åœ¨çƒ­ç‚¹è·¯å¾„å¤§é‡ä½¿ç”¨ `performance.measure` åŒ…è£¹åŒæ­¥é€»è¾‘ï¼Œä¼šäº§ç”Ÿé¢å¤–å¼€é”€ã€‚

```typescript
// frontend/src/utils/performanceMonitor.ts
// æ³¨æ„ï¼šä»…ç”¨äºæœ¬åœ°/é¢„å‘å¸ƒç¯å¢ƒçš„æ€§èƒ½è°ƒè¯•ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ï¼ˆä¼šäº§ç”Ÿé¢å¤–å¼€é”€ï¼‰
export function measurePerformance(name: string, fn: () => void) {
  performance.mark(`${name}-start`);
  fn();
  performance.mark(`${name}-end`);
  performance.measure(name, `${name}-start`, `${name}-end`);
  
  // å–æœ€æ–°ä¸€æ¬¡æµ‹é‡ç»“æœï¼ˆè€Œä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼‰
  const entries = performance.getEntriesByName(name);
  const measure = entries[entries.length - 1];
  
  console.log(`${name}: ${measure.duration}ms`);
  
  // æ¸…ç† marks å’Œ measuresï¼Œé¿å…å†…å­˜å ç”¨å’Œä¸‹æ¬¡ç»Ÿè®¡å¹²æ‰°
  performance.clearMarks(`${name}-start`);
  performance.clearMarks(`${name}-end`);
  performance.clearMeasures(name);
}

// ä½¿ç”¨ï¼ˆä»…å¼€å‘/è°ƒè¯•ç¯å¢ƒï¼‰
measurePerformance('renderTasks', () => {
  renderTasks();
});
```

### ç”Ÿäº§ç¯å¢ƒç›‘æ§è½åœ°

**æ¨èè½åœ°å½¢æ€**ï¼š

1. **é›†æˆ Web Vitals SDK**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒå¼•å…¥è½»é‡çº§ Web Vitals SDKï¼ˆå¦‚ `web-vitals` åº“ï¼‰ï¼Œå°† LCP/INP/CLS ä¸ŠæŠ¥åˆ°åŸ‹ç‚¹ç³»ç»Ÿ

```typescript
// frontend/src/utils/webVitalsReporter.ts
import { onLCP, onINP, onCLS } from 'web-vitals';

function sendToAnalytics(metric: any) {
  // ä¸ŠæŠ¥åˆ°ä½ çš„åŸ‹ç‚¹ç³»ç»Ÿ
  fetch('/api/analytics', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      name: metric.name,
      value: metric.value,
      id: metric.id,
      rating: metric.rating,
      delta: metric.delta,
      navigationType: metric.navigationType,
    }),
  });
}

// ç›‘å¬å¹¶ä¸ŠæŠ¥ Web Vitals
onLCP(sendToAnalytics);
onINP(sendToAnalytics);
onCLS(sendToAnalytics);
```

2. **ç›‘æ§å¹³å°å‘Šè­¦é…ç½®**ï¼šåœ¨ç›‘æ§å¹³å°è®¾ç½® 3 æ¡å‘Šè­¦è§„åˆ™
   - LCP P75 > 2.5s
   - INP P75 > 200ms
   - CLS P75 > 0.1

3. **å®šæœŸæ€§èƒ½æŠ¥å‘Š**ï¼šæ¯å‘¨/æ¯æœˆç”Ÿæˆæ€§èƒ½æŠ¥å‘Šï¼Œè¿½è¸ªè¶‹åŠ¿ï¼Œè¯†åˆ«æ€§èƒ½é€€åŒ–

è¿™æ ·æ•´ä»½æ–‡æ¡£å°±ä¸åªæ˜¯"å¦‚ä½•ä¼˜åŒ–"ï¼Œè¿˜åŒ…å«"å¦‚ä½•çŸ¥é“æ˜¯å¦éœ€è¦ç»§ç»­ä¼˜åŒ–"ã€‚

### æ„å»º & ä¼ è¾“å±‚ä¼˜åŒ–ï¼ˆæ¦‚è¿°ï¼‰

**æ„å»ºä¼˜åŒ–**ï¼š
- å¼€å¯ tree-shaking / ä»£ç å‹ç¼© / åˆ†åŒ…ï¼ˆvendor/app åˆ†ç¦»ï¼‰
- ç¡®ä¿ç”Ÿäº§æ„å»ºä½¿ç”¨ `NODE_ENV=production`
- é’ˆå¯¹ polyfill ä½¿ç”¨ browserslist + differential loading / core-js æŒ‰éœ€ï¼ˆé¿å…ç»™ç°ä»£æµè§ˆå™¨å¡ä¸€å †æ²¡ç”¨ polyfillï¼‰

**ä¼ è¾“ä¼˜åŒ–**ï¼š
- å¼€å¯ gzip / brotli å‹ç¼©ï¼ˆNginx / CDNï¼‰
- é™æ€èµ„æºè®¾ç½®æ°å½“çš„ Cache-Control / ETag
- ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æºåˆ†å‘

### æ€§èƒ½é¢„ç®—

- **JavaScript åŒ…å¤§å°**ï¼š< 500KB (gzipped)
- **CSS å¤§å°**ï¼š< 50KB (gzipped)
- **å›¾ç‰‡å¤§å°**ï¼š< 200KB per image
- **é¦–å±åŠ è½½æ—¶é—´**ï¼š< 2.0s
- **æ ¸å¿ƒ Web Vitals**ï¼šLCP < 2.5sï¼ŒINP < 200msï¼ˆ75 åˆ†ä½ï¼‰ï¼ŒCLS < 0.1
- **ä¸»è§‚äº¤äº’æ„Ÿå—**ï¼šå¸¸è§ç‚¹å‡»åé¦ˆ < 100ms

---

## æœ€ä½³å®è·µæŒ‡å—

### 1. ç»„ä»¶ä¼˜åŒ–

```typescript
// âœ… å¥½çš„åšæ³•
const MyComponent = React.memo(({ data }) => {
  const processedData = useMemo(() => {
    return expensiveProcessing(data);
  }, [data]);
  
  const handleClick = useCallback(() => {
    // å¤„ç†ç‚¹å‡»
  }, []);
  
  return <div onClick={handleClick}>{processedData}</div>;
});

// âŒ ä¸å¥½çš„åšæ³•
const MyComponent = ({ data }) => {
  const processedData = expensiveProcessing(data); // æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ
  
  const handleClick = () => { // æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°
    // å¤„ç†ç‚¹å‡»
  };
  
  return <div onClick={handleClick} style={{ color: 'red' }}>{processedData}</div>; // å†…è”æ ·å¼
};
```

### 2. å›¾ç‰‡ä¼˜åŒ–

```typescript
// âœ… å¥½çš„åšæ³•
// LazyImage å†…éƒ¨å·²å¤„ç†æ ¼å¼é€‰æ‹©å’Œå“åº”å¼å›¾ç‰‡ï¼Œåªéœ€ä¼ å…¥åŸºç¡€ URL
<LazyImage
  src={imageUrl}
  alt="ä»»åŠ¡å°é¢"
  className="task-cover"
  sizes="(max-width: 640px) 100vw, 50vw" // å¯é€‰ï¼šè‡ªå®šä¹‰ sizes
/>

// å¦‚æœéœ€è¦å®Œå…¨è‡ªå®šä¹‰ srcSetï¼Œä¹Ÿå¯ä»¥ä¼ å…¥
// æ³¨æ„ï¼šä¼ å…¥çš„ srcSet ä¼šè¦†ç›– <img> çš„é»˜è®¤ srcSetï¼Œä¸»è¦å½±å“ä¸æ”¯æŒ <picture>/WebP/AVIF çš„è€æµè§ˆå™¨
// å¯¹äºç°ä»£æµè§ˆå™¨ï¼Œä»ç„¶ä¼˜å…ˆèµ° AVIF/WebP çš„ <source> é…ç½®
<LazyImage
  src={imageUrl}
  alt="ä»»åŠ¡å°é¢"
  srcSet={`${imageUrl}?w=400 400w, ${imageUrl}?w=800 800w`}
  sizes="(max-width: 640px) 100vw, 50vw"
/>

// âŒ ä¸å¥½çš„åšæ³•
<img src={imageUrl} /> // ç«‹å³åŠ è½½ï¼Œæ— ä¼˜åŒ–
```

### 3. äº‹ä»¶å¤„ç†ä¼˜åŒ–

```typescript
// âœ… å¥½çš„åšæ³•ï¼šæœ‰èŠ‚æµ + ç”¨ Hook + æœ‰è§£ç»‘
const handleScroll = useThrottledCallback(() => {
  // å¤„ç†æ»šåŠ¨
}, 100);

useEffect(() => {
  window.addEventListener('scroll', handleScroll, { passive: true });
  return () => {
    window.removeEventListener('scroll', handleScroll);
  };
}, [handleScroll]);

// âŒ ä¸å¥½çš„åšæ³•ï¼šæ²¡èŠ‚æµ + æ²¡è§£ç»‘
window.addEventListener('scroll', () => {
  // æ¯æ¬¡æ»šåŠ¨éƒ½æ‰§è¡Œï¼Œæ— èŠ‚æµ
  // è€Œä¸”æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šé‡æ–°æ·»åŠ ç›‘å¬å™¨ï¼Œé€ æˆå†…å­˜æ³„æ¼
});
```

### 4. çŠ¶æ€ç®¡ç†ä¼˜åŒ–

```typescript
// âœ… å¥½çš„åšæ³•ï¼šæ‹†åˆ† Context
const UserContext = createContext(null);
const LanguageContext = createContext('zh');

// âŒ ä¸å¥½çš„åšæ³•ï¼šä¸€ä¸ªå¤§ Context
const AppContext = createContext({
  user: null,
  language: 'zh',
  theme: 'light',
  // ... å¾ˆå¤šçŠ¶æ€
});
```

---

## æ€»ç»“

é€šè¿‡ç³»ç»Ÿæ€§çš„æ€§èƒ½ä¼˜åŒ–ï¼Œé¢„æœŸå¯ä»¥å®ç°ï¼š

- **æ ¸å¿ƒ Web Vitals**ï¼šLCP < 2.5sï¼ŒINP < 200msï¼ˆ75 åˆ†ä½ï¼‰ï¼ŒCLS < 0.1
- **ä¸»è§‚äº¤äº’æ„Ÿå—**ï¼šå¸¸è§ç‚¹å‡»åé¦ˆ < 100ms
- **é¦–å±åŠ è½½æ—¶é—´**ï¼šä» ~3.5s é™è‡³ < 2.0sï¼ˆç›®æ ‡ï¼š< 1.5sï¼‰
- **æ»šåŠ¨æµç•…åº¦**ï¼š60 FPS
- **é¡µé¢åˆ‡æ¢é€Ÿåº¦**ï¼š< 300ms
- **æ•´ä½“æ€§èƒ½æå‡**ï¼š50-70%

### å…³é”®ä¼˜åŒ–ç‚¹

1. **æ»šåŠ¨æ€§èƒ½**ï¼šä½¿ç”¨èŠ‚æµå’Œè™šæ‹Ÿæ»šåŠ¨
2. **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨ç°ä»£æ ¼å¼å’Œæ‡’åŠ è½½
3. **æ ·å¼ä¼˜åŒ–**ï¼šå‡å°‘å†…è”æ ·å¼ï¼Œä½¿ç”¨ CSS
4. **Context ä¼˜åŒ–**ï¼šæ‹†åˆ†å’Œä¼˜åŒ–æ›´æ–°ç­–ç•¥
5. **ä»£ç åˆ†å‰²**ï¼šæ›´ç»†ç²’åº¦çš„æ‡’åŠ è½½

### æŒç»­ä¼˜åŒ–

æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ï¼š

1. **å®šæœŸç›‘æ§**ï¼šä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·
2. **ç”¨æˆ·åé¦ˆ**ï¼šæ”¶é›†ç”¨æˆ·åé¦ˆ
3. **æ€§èƒ½æµ‹è¯•**ï¼šå®šæœŸè¿›è¡Œæ€§èƒ½æµ‹è¯•
4. **è¿­ä»£ä¼˜åŒ–**ï¼šæ ¹æ®æ•°æ®æŒç»­ä¼˜åŒ–

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.2.0  
**æœ€åæ›´æ–°**ï¼š2025-01-18  
**é€‚ç”¨é¡¹ç›®**ï¼šlink2ur å‰ç«¯ï¼ˆReact + TypeScriptï¼‰  
**ç»´æŠ¤è€…**ï¼šå‰ç«¯å¼€å‘å›¢é˜Ÿ

