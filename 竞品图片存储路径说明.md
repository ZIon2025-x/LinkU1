# 竞品图片存储路径说明

## 当前实现

### 图片保存位置

竞品图片现在保存在**专用文件夹**中，与其他图片类型分开存储：

```
uploads/public/images/leaderboard_items/temp_{user_id}/
```

**完整路径结构**：
- **Railway环境**：`/data/uploads/public/images/leaderboard_items/temp_{user_id}/`
- **本地开发环境**：`uploads/public/images/leaderboard_items/temp_{user_id}/`

### 文件名格式

```
leaderboard_item_{uuid}.{扩展名}
```

示例：`leaderboard_item_550e8400-e29b-41d4-a716-446655440000.jpg`

## 与其他图片类型的对比

### 1. 任务达人头像 (`expert_avatar`)
- **路径**：`uploads/public/images/expert_avatars/{expert_id}/`
- **文件名**：`expert_avatar_{uuid}.{ext}`
- **用途**：任务达人头像

### 2. 服务图片 (`service_image`)
- **路径**：`uploads/public/images/service_images/{expert_id}/`
- **文件名**：`service_image_{uuid}.{ext}`
- **用途**：任务达人服务图片

### 3. 任务图片 (`public`)
- **路径**：`uploads/public/images/public/{task_id}/`
- **文件名**：`public_{uuid}.{ext}`
- **用途**：任务相关图片

### 4. 竞品图片 (`leaderboard_item`) ⭐ 新增
- **路径**：`uploads/public/images/leaderboard_items/temp_{user_id}/`
- **文件名**：`leaderboard_item_{uuid}.{ext}`
- **用途**：排行榜竞品图片

## 为什么使用 `temp_{user_id}`？

因为图片上传时，竞品（item）还没有创建，所以没有 `item_id`。使用临时文件夹：

1. **上传时**：保存到 `temp_{user_id}/` 目录
2. **提交竞品后**：图片URL已保存到数据库，不需要移动文件
3. **后续优化**：可以添加清理任务，定期清理未使用的临时图片

## URL 格式

```
https://example.com/uploads/images/leaderboard_items/temp_{user_id}/leaderboard_item_{uuid}.jpg
```

## 优势

1. **分类清晰**：不同类型的图片分开存储
2. **便于管理**：可以按类型清理或迁移
3. **统一规范**：与其他图片类型使用相同的存储结构
4. **易于扩展**：后续可以按 item_id 进一步分类

## 注意事项

- 当前使用 `temp_{user_id}` 作为子目录，因为上传时 item 还未创建
- 如果需要按 item_id 分类，需要先创建 item 再上传图片（流程会更复杂）
- 临时文件夹中的图片不会自动清理，需要定期清理任务

