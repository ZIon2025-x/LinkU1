<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>密码验证测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .pass { background-color: #d4edda; }
        .fail { background-color: #f8d7da; }
        .password-input { margin: 5px 0; }
        .error { color: red; font-size: 12px; }
    </style>
</head>
<body>
    <h1>密码验证测试</h1>
    <p>测试前后端密码验证规则是否一致</p>
    
    <div class="test-case">
        <h3>测试用例</h3>
        <div class="password-input">
            <label>密码: </label>
            <input type="password" id="password" placeholder="输入密码进行测试">
            <button onclick="testPassword()">测试</button>
        </div>
        <div id="result"></div>
    </div>

    <div class="test-case">
        <h3>预期结果</h3>
        <ul>
            <li>✅ 8位以上：通过</li>
            <li>❌ 少于8位：失败</li>
            <li>✅ 包含字母和数字：通过</li>
            <li>❌ 只有字母：失败</li>
            <li>❌ 只有数字：失败</li>
            <li>❌ 只有特殊字符：失败</li>
        </ul>
    </div>

    <script>
        function testPassword() {
            const password = document.getElementById('password').value;
            const result = document.getElementById('result');
            
            // 前端验证规则（修复后）
            const minLength = password.length >= 8;
            const hasLetter = /[A-Za-z]/.test(password);
            const hasNumber = /\d/.test(password);
            const pattern = /^(?=.*[A-Za-z])(?=.*\d).{8,}$/;
            
            const frontendValid = pattern.test(password);
            
            // 模拟后端验证
            const backendValid = minLength && hasLetter && hasNumber;
            
            let html = '<h4>验证结果:</h4>';
            html += `<p>密码: "${password}"</p>`;
            html += `<p>长度检查 (≥8位): ${minLength ? '✅' : '❌'}</p>`;
            html += `<p>包含字母: ${hasLetter ? '✅' : '❌'}</p>`;
            html += `<p>包含数字: ${hasNumber ? '✅' : '❌'}</p>`;
            html += `<p>前端验证: ${frontendValid ? '✅ 通过' : '❌ 失败'}</p>`;
            html += `<p>后端验证: ${backendValid ? '✅ 通过' : '❌ 失败'}</p>`;
            html += `<p>一致性: ${frontendValid === backendValid ? '✅ 一致' : '❌ 不一致'}</p>`;
            
            result.innerHTML = html;
            result.className = frontendValid && backendValid ? 'pass' : 'fail';
        }
    </script>
</body>
</html>
