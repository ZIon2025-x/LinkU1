# Link²Ur平台核心依赖
fastapi>=0.104.0,<0.115.0
uvicorn[standard]>=0.24.0,<0.32.0
python-multipart>=0.0.6,<0.1.0

# 数据库相关
sqlalchemy[asyncio]>=2.0.0,<3.0.0
pydantic>=2.0.0,<3.0.0
# 注意：asyncpg 需要编译 C 扩展，在某些构建环境中可能失败
# 如果安装失败，代码会自动回退到同步模式（ASYNC_AVAILABLE=False）
# 对于 Celery 服务，建议使用 requirements-celery.txt（不包含 asyncpg）
asyncpg>=0.29.0,<0.30.0
aiopg>=1.4.0,<1.5.0
psycopg2-binary>=2.9.0,<3.0.0

# 认证和安全
passlib[bcrypt]==1.7.4
bcrypt==4.0.1
redis>=4.5.0,<6.0.0
PyJWT>=2.8.0,<3.0.0
slowapi>=0.1.9,<0.2.0

# 任务队列（定时任务）
celery[redis]>=5.3.0,<6.0.0

# 邮件服务
fastapi-mail>=1.4.0,<2.0.0
resend>=0.8.0,<2.0.0

# 短信服务
twilio>=8.0.0,<9.0.0

# 支付服务
stripe>=7.0.0,<10.0.0

# 时区处理
pytz>=2023.3

# 网络请求
requests>=2.31.0,<3.0.0

# 其他工具
python-dotenv>=1.0.0,<2.0.0
itsdangerous>=2.0.0,<3.0.0
orjson>=3.9.0,<4.0.0  # 高性能 JSON 序列化（用于 Redis 缓存）

# 监控和指标
prometheus-client>=0.19.0,<1.0.0

# 翻译服务
deep-translator>=1.11.4
# Google Cloud Translation API (官方API，每月前50万字符免费)
google-cloud-translate>=3.15.0

# 学生认证系统性能优化（可选，推荐安装）
# 用于大学匹配缓存优化，使用Aho-Corasick算法提升性能10倍+
# 如果不安装，系统会自动回退到字典匹配（性能仍然优于数据库查询）
pyahocorasick>=2.0.0,<3.0.0

# iOS 推送通知服务
# 使用 compat-fork-apns2 以支持 Python 3.11 和 PyJWT 2.x
compat-fork-apns2>=0.7.0

# 图片处理
Pillow>=10.0.0,<11.0.0

# 双因素认证 (2FA/TOTP)
pyotp>=2.9.0,<3.0.0  # TOTP 生成和验证
qrcode[pil]>=7.4.2,<8.0.0  # QR 码生成（用于 Authenticator 设置）

# 依赖更新日期: 2026-01-15 (强制 Docker 重新构建缓存层)