# Vercel å‰ç«¯éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•å°†å‰ç«¯é¡¹ç›®éƒ¨ç½²åˆ° Vercelï¼ŒåŒ…æ‹¬ä¾èµ–å®‰è£…å’Œç¯å¢ƒå˜é‡é…ç½®ã€‚

## ğŸ“‹ å…³äºä¾èµ–å®‰è£…

### âœ… Vercel ä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–

**é‡è¦**ï¼šVercel åœ¨æ„å»ºæ—¶ä¼šè‡ªåŠ¨è¿è¡Œ `npm install`ï¼ˆæˆ– `yarn install`ï¼‰ï¼Œæ‰€ä»¥ä½ **ä¸éœ€è¦**æ‰‹åŠ¨å®‰è£…ä¾èµ–ã€‚

Vercel çš„æ„å»ºæµç¨‹ï¼š
1. å…‹éš†ä»£ç ä»“åº“
2. æ£€æµ‹é¡¹ç›®ç±»å‹ï¼ˆReactã€Next.js ç­‰ï¼‰
3. **è‡ªåŠ¨è¿è¡Œ `npm install`** å®‰è£… `package.json` ä¸­çš„ä¾èµ–
4. è¿è¡Œæ„å»ºå‘½ä»¤ï¼ˆé€šå¸¸æ˜¯ `npm run build`ï¼‰
5. éƒ¨ç½²æ„å»ºäº§ç‰©

### ğŸ“¦ ç¡®ä¿ä¾èµ–åœ¨ package.json ä¸­

åªéœ€è¦ç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½åœ¨ `frontend/package.json` ä¸­ï¼š

```json
{
  "dependencies": {
    "@stripe/stripe-js": "^2.0.0",
    "@stripe/react-stripe-js": "^2.0.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
    // ... å…¶ä»–ä¾èµ–
  }
}
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡é¡¹ç›®

ç¡®ä¿é¡¹ç›®ç»“æ„æ­£ç¡®ï¼š

```
frontend/
â”œâ”€â”€ package.json          # åŒ…å«æ‰€æœ‰ä¾èµ–
â”œâ”€â”€ src/
â”œâ”€â”€ public/
â””â”€â”€ vercel.json          # Vercel é…ç½®ï¼ˆå¯é€‰ï¼‰
```

### ç¬¬äºŒæ­¥ï¼šè¿æ¥ GitHub ä»“åº“

1. ç™»å½• Vercelï¼šhttps://vercel.com/
2. ç‚¹å‡» **Add New Project**
3. å¯¼å…¥ä½ çš„ GitHub ä»“åº“
4. é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¦‚æœå‰ç«¯åœ¨å­ç›®å½•ï¼Œé€‰æ‹© `frontend`ï¼‰

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ„å»ºè®¾ç½®

Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ React é¡¹ç›®ï¼Œä½†ä½ å¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š

#### åœ¨ Vercel Dashboard ä¸­é…ç½®ï¼š

1. è¿›å…¥é¡¹ç›® â†’ **Settings** â†’ **General**
2. **Root Directory**ï¼šå¦‚æœå‰ç«¯åœ¨å­ç›®å½•ï¼Œè®¾ç½®ä¸º `frontend`
3. **Build Command**ï¼š`npm run build`ï¼ˆé»˜è®¤ï¼‰
4. **Output Directory**ï¼š`build`ï¼ˆReact é»˜è®¤ï¼‰

#### æˆ–ä½¿ç”¨ vercel.json é…ç½®ï¼š

```json
{
  "version": 2,
  "builds": [
    {
      "src": "frontend/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "build"
      }
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/$1"
    }
  ]
}
```

### ç¬¬å››æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

#### åœ¨ Vercel Dashboard ä¸­é…ç½®ï¼š

1. è¿›å…¥é¡¹ç›® â†’ **Settings** â†’ **Environment Variables**
2. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å€¼ | ç¯å¢ƒ |
|--------|-----|------|
| `REACT_APP_STRIPE_PUBLISHABLE_KEY` | `pk_test_...` | Production, Preview, Development |
| `REACT_APP_API_URL` | `https://api.yourcompany.com` | Production |
| `REACT_APP_API_URL` | `http://localhost:3000` | Development |

**æ³¨æ„**ï¼š
- React åº”ç”¨éœ€è¦ä½¿ç”¨ `REACT_APP_` å‰ç¼€
- å¯ä»¥ä¸ºä¸åŒç¯å¢ƒï¼ˆProductionã€Previewã€Developmentï¼‰è®¾ç½®ä¸åŒçš„å€¼
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç”Ÿäº§å¯†é’¥ï¼ˆ`pk_live_...`ï¼‰

#### ç¯å¢ƒå˜é‡å‘½åè§„åˆ™

- **React (Create React App)**ï¼šå¿…é¡»ä»¥ `REACT_APP_` å¼€å¤´
- **Next.js**ï¼šå¿…é¡»ä»¥ `NEXT_PUBLIC_` å¼€å¤´
- **Vite**ï¼šå¿…é¡»ä»¥ `VITE_` å¼€å¤´

### ç¬¬äº”æ­¥ï¼šéƒ¨ç½²

1. ç‚¹å‡» **Deploy** æŒ‰é’®
2. Vercel ä¼šè‡ªåŠ¨ï¼š
   - å®‰è£…ä¾èµ–ï¼ˆ`npm install`ï¼‰
   - è¿è¡Œæ„å»ºï¼ˆ`npm run build`ï¼‰
   - éƒ¨ç½²åˆ° CDN

### ç¬¬å…­æ­¥ï¼šéªŒè¯éƒ¨ç½²

1. è®¿é—®éƒ¨ç½²çš„ URLï¼ˆä¾‹å¦‚ï¼š`https://your-project.vercel.app`ï¼‰
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
3. æµ‹è¯• Stripe æ”¯ä»˜åŠŸèƒ½

## ğŸ”§ æ„å»ºé…ç½®è¯¦è§£

### package.json è„šæœ¬

ç¡®ä¿ `package.json` ä¸­æœ‰æ„å»ºè„šæœ¬ï¼š

```json
{
  "scripts": {
    "build": "react-scripts build",
    "start": "react-scripts start"
  }
}
```

### vercel.json é…ç½®ç¤ºä¾‹

å¦‚æœå‰ç«¯åœ¨å­ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "version": 2,
  "builds": [
    {
      "src": "frontend/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "build",
        "installCommand": "cd frontend && npm install",
        "buildCommand": "cd frontend && npm run build"
      }
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/$1"
    }
  ]
}
```

## ğŸ“ ç¯å¢ƒå˜é‡ä½¿ç”¨

åœ¨ä»£ç ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```typescript
// åœ¨ React ç»„ä»¶ä¸­
const stripePublishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;

if (!stripePublishableKey) {
  console.error('Stripe Publishable Key æœªé…ç½®');
}
```

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ï¼šæ„å»ºå¤±è´¥ï¼Œæç¤ºæ‰¾ä¸åˆ°æ¨¡å—

**åŸå› **ï¼šä¾èµ–æœªæ­£ç¡®å®‰è£…

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `package.json` ä¸­æ˜¯å¦åŒ…å«æ‰€æœ‰ä¾èµ–
2. æ£€æŸ¥ `vercel.json` ä¸­çš„ `installCommand` æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹ Vercel æ„å»ºæ—¥å¿—ï¼Œç¡®è®¤ `npm install` æ˜¯å¦æˆåŠŸ

### é—®é¢˜ï¼šç¯å¢ƒå˜é‡è¯»å–ä¸åˆ°

**åŸå› **ï¼š
1. å˜é‡åç¼ºå°‘å‰ç¼€ï¼ˆ`REACT_APP_`ï¼‰
2. æœªåœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­é…ç½®
3. æ„å»ºåéœ€è¦é‡æ–°éƒ¨ç½²

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å˜é‡åä»¥ `REACT_APP_` å¼€å¤´
2. åœ¨ Vercel Dashboard ä¸­æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
3. ä¿®æ”¹ç¯å¢ƒå˜é‡åï¼Œéœ€è¦é‡æ–°éƒ¨ç½²

### é—®é¢˜ï¼šæ„å»ºæ—¶é—´è¿‡é•¿

**åŸå› **ï¼šä¾èµ–è¿‡å¤šæˆ–ç½‘ç»œé—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ `.npmrc` é…ç½®é•œåƒæºï¼ˆå¦‚æœåœ¨ä¸­å›½ï¼‰
2. æ£€æŸ¥æ˜¯å¦æœ‰ä¸å¿…è¦çš„ä¾èµ–
3. ä½¿ç”¨ Vercel çš„ç¼“å­˜åŠŸèƒ½

### é—®é¢˜ï¼šStripe æ”¯ä»˜åœ¨æœ¬åœ°æ­£å¸¸ï¼Œéƒ¨ç½²åå¤±è´¥

**åŸå› **ï¼š
1. ç¯å¢ƒå˜é‡æœªæ­£ç¡®é…ç½®
2. ä½¿ç”¨äº†é”™è¯¯çš„å¯†é’¥ï¼ˆæµ‹è¯•/ç”Ÿäº§ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ Vercel Dashboard ä¸­çš„ç¯å¢ƒå˜é‡
2. ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒç”¨ `pk_live_...`ï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

## ğŸ”’ å®‰å…¨å»ºè®®

### âœ… æ¨èåšæ³•

1. **ä½¿ç”¨ç¯å¢ƒå˜é‡**ï¼šä¸è¦å°†å¯†é’¥æäº¤åˆ°ä»£ç ä»“åº“
2. **åŒºåˆ†ç¯å¢ƒ**ï¼šæµ‹è¯•å’Œç”Ÿäº§ä½¿ç”¨ä¸åŒçš„å¯†é’¥
3. **ä½¿ç”¨ .env.local**ï¼šæœ¬åœ°å¼€å‘ä½¿ç”¨ `.env.local`ï¼ˆå·²æ·»åŠ åˆ° .gitignoreï¼‰

### âŒ é¿å…çš„åšæ³•

1. **ç¡¬ç¼–ç å¯†é’¥**ï¼šä¸è¦ç›´æ¥åœ¨ä»£ç ä¸­å†™å¯†é’¥
2. **æäº¤ .env æ–‡ä»¶**ï¼šç¡®ä¿ `.env.local` åœ¨ `.gitignore` ä¸­
3. **ä½¿ç”¨ç”Ÿäº§å¯†é’¥æµ‹è¯•**ï¼šæµ‹è¯•æ—¶ä½¿ç”¨æµ‹è¯•å¯†é’¥

## ğŸ“Š æ„å»ºæ—¥å¿—

åœ¨ Vercel Dashboard ä¸­æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼š

1. è¿›å…¥é¡¹ç›® â†’ **Deployments**
2. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
3. æŸ¥çœ‹ **Build Logs**

æ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
- ä¾èµ–å®‰è£…è¿‡ç¨‹
- æ„å»ºè¿‡ç¨‹
- ä»»ä½•é”™è¯¯ä¿¡æ¯

## ğŸ¯ æœ€ä½³å®è·µ

1. **ä½¿ç”¨ Vercel CLI æœ¬åœ°æµ‹è¯•**ï¼š
   ```bash
   npm i -g vercel
   vercel
   ```

2. **é…ç½®é¢„è§ˆéƒ¨ç½²**ï¼šæ¯æ¬¡ PR è‡ªåŠ¨éƒ¨ç½²é¢„è§ˆç¯å¢ƒ

3. **ä½¿ç”¨ç¯å¢ƒå˜é‡æ¨¡æ¿**ï¼šåœ¨ `.env.example` ä¸­åˆ—å‡ºæ‰€æœ‰éœ€è¦çš„ç¯å¢ƒå˜é‡

4. **ç›‘æ§éƒ¨ç½²**ï¼šè®¾ç½®éƒ¨ç½²é€šçŸ¥ï¼ŒåŠæ—¶å‘ç°é—®é¢˜

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vercel éƒ¨ç½²æ–‡æ¡£](https://vercel.com/docs)
- [React éƒ¨ç½²æŒ‡å—](https://create-react-app.dev/docs/deployment/)
- [ç¯å¢ƒå˜é‡é…ç½®](https://vercel.com/docs/concepts/projects/environment-variables)

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] `package.json` åŒ…å«æ‰€æœ‰ä¾èµ–
- [ ] ç¯å¢ƒå˜é‡å·²åœ¨ Vercel Dashboard ä¸­é…ç½®
- [ ] `vercel.json` é…ç½®æ­£ç¡®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- [ ] æ„å»ºå‘½ä»¤æ­£ç¡®ï¼ˆ`npm run build`ï¼‰
- [ ] è¾“å‡ºç›®å½•æ­£ç¡®ï¼ˆ`build`ï¼‰
- [ ] æµ‹è¯•äº†æœ¬åœ°æ„å»ºï¼ˆ`npm run build`ï¼‰
- [ ] æ£€æŸ¥äº†æ„å»ºæ—¥å¿—
- [ ] éªŒè¯äº†éƒ¨ç½²åçš„åŠŸèƒ½

