# AWS è¿ç§»æŒ‡å—ä¸æˆæœ¬è¯„ä¼°

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

- **åç«¯**: FastAPI (Python 3.11) + PostgreSQL + Redis + Celery
- **å‰ç«¯**: React åº”ç”¨ï¼ˆ3ä¸ªï¼šfrontend, admin, serviceï¼‰
- **å½“å‰éƒ¨ç½²**: Railway (åç«¯) + Vercel (å‰ç«¯)
- **å®¹å™¨åŒ–**: å·²æ”¯æŒ Docker

---

## ğŸ—ï¸ AWS æ¶æ„æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šECS Fargateï¼ˆæ¨è - æ— æœåŠ¡å™¨å®¹å™¨ï¼‰

**æ¶æ„ç»„ä»¶**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFront (CDN)                               â”‚
â”‚  - å‰ç«¯é™æ€èµ„æºåˆ†å‘                              â”‚
â”‚  - SSL/TLS ç»ˆæ­¢                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application Load Balancer (ALB)                â”‚
â”‚  - è·¯ç”±åˆ°åç«¯æœåŠ¡                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ECS Fargate  â”‚        â”‚ ECS Fargate  â”‚
â”‚ (Backend API)â”‚        â”‚ (Celery)     â”‚
â”‚              â”‚        â”‚              â”‚
â”‚ - FastAPI    â”‚        â”‚ - Celery     â”‚
â”‚ - 2-4 vCPU   â”‚        â”‚ - 1-2 vCPU   â”‚
â”‚ - 4-8 GB RAM â”‚        â”‚ - 2-4 GB RAMâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  RDS PostgreSQL       â”‚
        â”‚  - db.t3.medium       â”‚
        â”‚  - Multi-AZ (å¯é€‰)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ElastiCache Redis    â”‚
        â”‚  - cache.t3.medium     â”‚
        â”‚  - é›†ç¾¤æ¨¡å¼ (å¯é€‰)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**:
- âœ… æ— éœ€ç®¡ç†æœåŠ¡å™¨
- âœ… è‡ªåŠ¨æ‰©ç¼©å®¹
- âœ… é«˜å¯ç”¨æ€§
- âœ… ä¸ Docker å®Œç¾é›†æˆ
- âœ… æŒ‰éœ€ä»˜è´¹

**é€‚ç”¨åœºæ™¯**: ä¸­å°å‹åº”ç”¨ï¼Œéœ€è¦å¼¹æ€§æ‰©å±•

---

### æ–¹æ¡ˆäºŒï¼šEC2 + Auto Scalingï¼ˆæˆæœ¬ä¼˜åŒ–ï¼‰

**æ¶æ„ç»„ä»¶**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFront (CDN)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application Load Balancer (ALB)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EC2 Auto     â”‚        â”‚ EC2 Auto     â”‚
â”‚ Scaling      â”‚        â”‚ Scaling      â”‚
â”‚              â”‚        â”‚              â”‚
â”‚ - t3.medium  â”‚        â”‚ - t3.small   â”‚
â”‚ - 2-4 å®ä¾‹   â”‚        â”‚ - 1-2 å®ä¾‹   â”‚
â”‚ (Backend)    â”‚        â”‚ (Celery)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  RDS PostgreSQL       â”‚
        â”‚  - db.t3.medium       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ElastiCache Redis    â”‚
        â”‚  - cache.t3.medium    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**:
- âœ… æˆæœ¬æ›´ä½ï¼ˆé¢„ç•™å®ä¾‹ï¼‰
- âœ… æ›´å¤šæ§åˆ¶æƒ
- âœ… é€‚åˆå›ºå®šè´Ÿè½½

**é€‚ç”¨åœºæ™¯**: è´Ÿè½½ç›¸å¯¹ç¨³å®šï¼Œéœ€è¦æˆæœ¬ä¼˜åŒ–

---

### æ–¹æ¡ˆä¸‰ï¼šElastic Beanstalkï¼ˆå¿«é€Ÿéƒ¨ç½²ï¼‰

**æ¶æ„ç»„ä»¶**:
- Elastic Beanstalk è‡ªåŠ¨ç®¡ç† EC2ã€è´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨æ‰©å±•
- RDS PostgreSQL
- ElastiCache Redis

**ä¼˜åŠ¿**:
- âœ… éƒ¨ç½²ç®€å•
- âœ… è‡ªåŠ¨ç®¡ç†åŸºç¡€è®¾æ–½
- âœ… é€‚åˆå¿«é€Ÿè¿ç§»

**é€‚ç”¨åœºæ™¯**: éœ€è¦å¿«é€Ÿè¿ç§»ï¼Œå‡å°‘è¿ç»´å·¥ä½œ

---

## ğŸ’° æˆæœ¬è¯„ä¼°ï¼ˆæŒ‰æœˆï¼‰

### æ–¹æ¡ˆä¸€ï¼šECS Fargateï¼ˆæ¨èï¼‰

#### åç«¯æœåŠ¡ï¼ˆFastAPIï¼‰
- **vCPU**: 2 vCPU Ã— 730 å°æ—¶ = 1,460 vCPU-hours
- **å†…å­˜**: 4 GB Ã— 730 å°æ—¶ = 2,920 GB-hours
- **æˆæœ¬**: 
  - vCPU: 1,460 Ã— $0.04048 = **$59.10**
  - å†…å­˜: 2,920 Ã— $0.004445 = **$12.98**
  - **å°è®¡: $72.08/æœˆ**

#### Celery Worker
- **vCPU**: 1 vCPU Ã— 730 å°æ—¶ = 730 vCPU-hours
- **å†…å­˜**: 2 GB Ã— 730 å°æ—¶ = 1,460 GB-hours
- **æˆæœ¬**:
  - vCPU: 730 Ã— $0.04048 = **$29.55**
  - å†…å­˜: 1,460 Ã— $0.004445 = **$6.49**
  - **å°è®¡: $36.04/æœˆ**

#### RDS PostgreSQL
- **å®ä¾‹**: db.t3.medium (2 vCPU, 4 GB RAM)
- **å­˜å‚¨**: 100 GB GP3 SSD
- **å¤‡ä»½**: 100 GB Ã— 7 å¤©
- **æˆæœ¬**:
  - å®ä¾‹: **$61.00/æœˆ**
  - å­˜å‚¨: 100 GB Ã— $0.115 = **$11.50/æœˆ**
  - å¤‡ä»½: 100 GB Ã— $0.095 = **$9.50/æœˆ**
  - **å°è®¡: $82.00/æœˆ**

#### ElastiCache Redis
- **å®ä¾‹**: cache.t3.medium (2 vCPU, 3.09 GB RAM)
- **æˆæœ¬**: **$61.00/æœˆ**

#### Application Load Balancer
- **å›ºå®šè´¹ç”¨**: **$16.20/æœˆ**
- **LCU è´¹ç”¨**: çº¦ **$5-10/æœˆ**ï¼ˆå–å†³äºæµé‡ï¼‰
- **å°è®¡: $21-26/æœˆ**

#### CloudFront (CDN)
- **æ•°æ®ä¼ è¾“**: 500 GB/æœˆ
- **HTTP/HTTPS è¯·æ±‚**: 1,000,000 æ¬¡
- **æˆæœ¬**:
  - æ•°æ®ä¼ è¾“: 500 GB Ã— $0.085 = **$42.50/æœˆ**
  - è¯·æ±‚: 1,000,000 Ã— $0.0075/10,000 = **$0.75/æœˆ**
  - **å°è®¡: $43.25/æœˆ**

#### S3 (é™æ€èµ„æºå­˜å‚¨)
- **å­˜å‚¨**: 50 GB
- **è¯·æ±‚**: 100,000 æ¬¡
- **æˆæœ¬**:
  - å­˜å‚¨: 50 GB Ã— $0.023 = **$1.15/æœˆ**
  - è¯·æ±‚: 100,000 Ã— $0.0004/1,000 = **$0.04/æœˆ**
  - **å°è®¡: $1.19/æœˆ**

#### å…¶ä»–æœåŠ¡
- **Route 53**: Hosted Zone ($0.50) + æŸ¥è¯¢ ($1-2) = **$1.50-2.50/æœˆ**
- **CloudWatch**: æ—¥å¿—å’Œç›‘æ§ = **$5-10/æœˆ**
- **ECR (å®¹å™¨é•œåƒ)**: **$1-2/æœˆ**
- **NAT Gateway** (å¦‚æœéœ€è¦): **$32.40/æœˆ** + æ•°æ®ä¼ è¾“

#### **æ€»æˆæœ¬ä¼°ç®—ï¼ˆæ–¹æ¡ˆä¸€ï¼‰**
```
åç«¯æœåŠ¡:        $72.08
Celery:          $36.04
RDS:             $82.00
Redis:           $61.00
ALB:             $21-26
CloudFront:      $43.25
S3:              $1.19
å…¶ä»–:            $7.50-14.50
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:            $323-336/æœˆ
                 (~$3,876-4,032/å¹´)
```

---

### æ–¹æ¡ˆäºŒï¼šEC2 Auto Scalingï¼ˆæˆæœ¬ä¼˜åŒ–ï¼‰

#### EC2 å®ä¾‹ï¼ˆåç«¯ï¼‰
- **å®ä¾‹**: t3.medium (2 vCPU, 4 GB RAM)
- **æ•°é‡**: 2 ä¸ªï¼ˆé«˜å¯ç”¨ï¼‰
- **æˆæœ¬**: 2 Ã— $30.40 = **$60.80/æœˆ**
- **é¢„ç•™å®ä¾‹ï¼ˆ1å¹´ï¼‰**: 2 Ã— $18.24 = **$36.48/æœˆ**ï¼ˆèŠ‚çœ40%ï¼‰

#### EC2 å®ä¾‹ï¼ˆCeleryï¼‰
- **å®ä¾‹**: t3.small (2 vCPU, 2 GB RAM)
- **æ•°é‡**: 1 ä¸ª
- **æˆæœ¬**: **$15.20/æœˆ**
- **é¢„ç•™å®ä¾‹**: **$9.12/æœˆ**

#### RDS PostgreSQL
- åŒæ–¹æ¡ˆä¸€: **$82.00/æœˆ**

#### ElastiCache Redis
- åŒæ–¹æ¡ˆä¸€: **$61.00/æœˆ**

#### Application Load Balancer
- åŒæ–¹æ¡ˆä¸€: **$21-26/æœˆ**

#### CloudFront
- åŒæ–¹æ¡ˆä¸€: **$43.25/æœˆ**

#### S3
- åŒæ–¹æ¡ˆä¸€: **$1.19/æœˆ**

#### EBS å­˜å‚¨ï¼ˆEC2ï¼‰
- **å­˜å‚¨**: 2 Ã— 30 GB = 60 GB
- **æˆæœ¬**: 60 GB Ã— $0.10 = **$6.00/æœˆ**

#### **æ€»æˆæœ¬ä¼°ç®—ï¼ˆæ–¹æ¡ˆäºŒ - æŒ‰éœ€ï¼‰**
```
EC2 åç«¯:        $60.80
EC2 Celery:      $15.20
RDS:             $82.00
Redis:           $61.00
ALB:             $21-26
CloudFront:      $43.25
S3:              $1.19
EBS:             $6.00
å…¶ä»–:            $7.50-14.50
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:            $297-310/æœˆ
```

#### **æ€»æˆæœ¬ä¼°ç®—ï¼ˆæ–¹æ¡ˆäºŒ - é¢„ç•™å®ä¾‹ï¼‰**
```
EC2 åç«¯:        $36.48
EC2 Celery:      $9.12
RDS:             $82.00
Redis:           $61.00
ALB:             $21-26
CloudFront:      $43.25
S3:              $1.19
EBS:             $6.00
å…¶ä»–:            $7.50-14.50
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:            $267-280/æœˆ
                 (~$3,204-3,360/å¹´)
```

---

### æ–¹æ¡ˆä¸‰ï¼šElastic Beanstalk

æˆæœ¬ä¸æ–¹æ¡ˆäºŒç±»ä¼¼ï¼Œä½†åŒ…å«é¢å¤–çš„ç®¡ç†è´¹ï¼ˆé€šå¸¸å¾ˆå°ï¼‰ã€‚

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”è¡¨

| æœåŠ¡ | Railway/Vercel | AWS æ–¹æ¡ˆä¸€ (Fargate) | AWS æ–¹æ¡ˆäºŒ (EC2) | AWS æ–¹æ¡ˆäºŒ (é¢„ç•™) |
|------|----------------|---------------------|------------------|-------------------|
| åç«¯æœåŠ¡ | ~$20-50/æœˆ | $72.08/æœˆ | $60.80/æœˆ | $36.48/æœˆ |
| Celery | åŒ…å« | $36.04/æœˆ | $15.20/æœˆ | $9.12/æœˆ |
| æ•°æ®åº“ | ~$20-40/æœˆ | $82.00/æœˆ | $82.00/æœˆ | $82.00/æœˆ |
| Redis | ~$10-20/æœˆ | $61.00/æœˆ | $61.00/æœˆ | $61.00/æœˆ |
| å‰ç«¯/CDN | å…è´¹-$20/æœˆ | $43.25/æœˆ | $43.25/æœˆ | $43.25/æœˆ |
| è´Ÿè½½å‡è¡¡ | åŒ…å« | $21-26/æœˆ | $21-26/æœˆ | $21-26/æœˆ |
| **æ€»è®¡** | **~$50-130/æœˆ** | **$323-336/æœˆ** | **$297-310/æœˆ** | **$267-280/æœˆ** |

**ç»“è®º**: AWS æˆæœ¬çº¦ä¸º Railway/Vercel çš„ **2.5-5 å€**ï¼Œä½†æä¾›æ›´å¤šæ§åˆ¶æƒå’Œæ‰©å±•æ€§ã€‚

---

## ğŸš€ è¿ç§»æ­¥éª¤

### é˜¶æ®µä¸€ï¼šå‡†å¤‡å·¥ä½œï¼ˆ1-2å‘¨ï¼‰

1. **åˆ›å»º AWS è´¦æˆ·**
   - æ³¨å†Œ AWS è´¦æˆ·
   - è®¾ç½® IAM ç”¨æˆ·å’Œè§’è‰²
   - é…ç½® MFA

2. **å‡†å¤‡ Docker é•œåƒ**
   ```bash
   # æ„å»ºåç«¯é•œåƒ
   docker build -t linku-backend:latest -f Dockerfile .
   
   # æ„å»ºå‰ç«¯é•œåƒ
   cd frontend
   docker build -t linku-frontend:latest -f Dockerfile .
   ```

3. **è®¾ç½®ç¯å¢ƒå˜é‡**
   - æ•´ç†æ‰€æœ‰ç¯å¢ƒå˜é‡
   - å‡†å¤‡ AWS Secrets Manager æˆ– Parameter Store

4. **æ•°æ®åº“è¿ç§»å‡†å¤‡**
   - å¤‡ä»½å½“å‰æ•°æ®åº“
   - æµ‹è¯•æ•°æ®åº“è¿ç§»è„šæœ¬

---

### é˜¶æ®µäºŒï¼šåŸºç¡€è®¾æ–½æ­å»ºï¼ˆ1å‘¨ï¼‰

#### 1. åˆ›å»º VPC å’Œç½‘ç»œ
```bash
# ä½¿ç”¨ AWS CLI æˆ– Terraform
aws ec2 create-vpc --cidr-block 10.0.0.0/16
```

#### 2. åˆ›å»º RDS PostgreSQL
```bash
aws rds create-db-instance \
  --db-instance-identifier linku-db \
  --db-instance-class db.t3.medium \
  --engine postgres \
  --master-username admin \
  --master-user-password <password> \
  --allocated-storage 100 \
  --vpc-security-group-ids <sg-id>
```

#### 3. åˆ›å»º ElastiCache Redis
```bash
aws elasticache create-cache-cluster \
  --cache-cluster-id linku-redis \
  --cache-node-type cache.t3.medium \
  --engine redis \
  --num-cache-nodes 1
```

#### 4. åˆ›å»º ECR ä»“åº“
```bash
aws ecr create-repository --repository-name linku-backend
aws ecr create-repository --repository-name linku-frontend
```

---

### é˜¶æ®µä¸‰ï¼šéƒ¨ç½²åº”ç”¨ï¼ˆ1å‘¨ï¼‰

#### 1. æ¨é€ Docker é•œåƒåˆ° ECR
```bash
# ç™»å½• ECR
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin <account-id>.dkr.ecr.us-east-1.amazonaws.com

# æ ‡è®°é•œåƒ
docker tag linku-backend:latest <account-id>.dkr.ecr.us-east-1.amazonaws.com/linku-backend:latest

# æ¨é€é•œåƒ
docker push <account-id>.dkr.ecr.us-east-1.amazonaws.com/linku-backend:latest
```

#### 2. åˆ›å»º ECS é›†ç¾¤å’ŒæœåŠ¡
```bash
# åˆ›å»ºé›†ç¾¤
aws ecs create-cluster --cluster-name linku-cluster

# åˆ›å»ºä»»åŠ¡å®šä¹‰
aws ecs register-task-definition --cli-input-json file://task-definition.json

# åˆ›å»ºæœåŠ¡
aws ecs create-service \
  --cluster linku-cluster \
  --service-name linku-backend \
  --task-definition linku-backend \
  --desired-count 2 \
  --launch-type FARGATE
```

#### 3. é…ç½® Application Load Balancer
```bash
# åˆ›å»ºç›®æ ‡ç»„
aws elbv2 create-target-group \
  --name linku-backend-tg \
  --protocol HTTP \
  --port 8000 \
  --vpc-id <vpc-id>

# åˆ›å»ºè´Ÿè½½å‡è¡¡å™¨
aws elbv2 create-load-balancer \
  --name linku-alb \
  --subnets <subnet-ids> \
  --security-groups <sg-id>
```

#### 4. éƒ¨ç½²å‰ç«¯åˆ° S3 + CloudFront
```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# ä¸Šä¼ åˆ° S3
aws s3 sync build/ s3://linku-frontend-bucket/

# åˆ›å»º CloudFront åˆ†å‘
aws cloudfront create-distribution --distribution-config file://cloudfront-config.json
```

---

### é˜¶æ®µå››ï¼šæ•°æ®è¿ç§»ï¼ˆ1-2å¤©ï¼‰

1. **æ•°æ®åº“è¿ç§»**
   ```bash
   # ä½¿ç”¨ pg_dump å¯¼å‡º
   pg_dump -h <railway-host> -U <user> -d <database> > backup.sql
   
   # å¯¼å…¥åˆ° RDS
   psql -h <rds-endpoint> -U <user> -d <database> < backup.sql
   ```

2. **Redis æ•°æ®è¿ç§»**ï¼ˆå¦‚éœ€è¦ï¼‰
   ```bash
   # ä½¿ç”¨ redis-cli
   redis-cli --rdb dump.rdb
   # ç„¶åå¯¼å…¥åˆ° ElastiCache
   ```

3. **æ–‡ä»¶å­˜å‚¨è¿ç§»**
   ```bash
   # ä¸Šä¼ åˆ° S3
   aws s3 sync uploads/ s3://linku-uploads-bucket/
   ```

---

### é˜¶æ®µäº”ï¼šæµ‹è¯•å’Œåˆ‡æ¢ï¼ˆ1å‘¨ï¼‰

1. **åŠŸèƒ½æµ‹è¯•**
   - API ç«¯ç‚¹æµ‹è¯•
   - æ•°æ®åº“è¿æ¥æµ‹è¯•
   - Redis ç¼“å­˜æµ‹è¯•
   - å‰ç«¯åŠŸèƒ½æµ‹è¯•

2. **æ€§èƒ½æµ‹è¯•**
   - è´Ÿè½½æµ‹è¯•
   - å‹åŠ›æµ‹è¯•
   - ç›‘æ§æŒ‡æ ‡æ£€æŸ¥

3. **DNS åˆ‡æ¢**
   ```bash
   # æ›´æ–° Route 53 è®°å½•
   aws route53 change-resource-record-sets \
     --hosted-zone-id <zone-id> \
     --change-batch file://dns-change.json
   ```

4. **ç›‘æ§å’Œå‘Šè­¦**
   - è®¾ç½® CloudWatch å‘Šè­¦
   - é…ç½®æ—¥å¿—èšåˆ
   - è®¾ç½®æ€§èƒ½ç›‘æ§

---

## ğŸ“ è¿ç§»æ¸…å•

### åŸºç¡€è®¾æ–½
- [ ] AWS è´¦æˆ·è®¾ç½®
- [ ] VPC å’Œå­ç½‘åˆ›å»º
- [ ] å®‰å…¨ç»„é…ç½®
- [ ] RDS PostgreSQL åˆ›å»º
- [ ] ElastiCache Redis åˆ›å»º
- [ ] ECR ä»“åº“åˆ›å»º
- [ ] S3 å­˜å‚¨æ¡¶åˆ›å»º
- [ ] CloudFront åˆ†å‘åˆ›å»º
- [ ] Route 53 åŸŸåé…ç½®

### åº”ç”¨éƒ¨ç½²
- [ ] Docker é•œåƒæ„å»º
- [ ] é•œåƒæ¨é€åˆ° ECR
- [ ] ECS é›†ç¾¤åˆ›å»º
- [ ] ECS ä»»åŠ¡å®šä¹‰åˆ›å»º
- [ ] ECS æœåŠ¡åˆ›å»º
- [ ] ALB é…ç½®
- [ ] å‰ç«¯éƒ¨ç½²åˆ° S3

### æ•°æ®è¿ç§»
- [ ] æ•°æ®åº“å¤‡ä»½
- [ ] æ•°æ®åº“è¿ç§»
- [ ] Redis æ•°æ®è¿ç§»ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ–‡ä»¶å­˜å‚¨è¿ç§»

### é…ç½®å’Œæµ‹è¯•
- [ ] ç¯å¢ƒå˜é‡é…ç½®
- [ ] Secrets Manager è®¾ç½®
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] DNS åˆ‡æ¢
- [ ] ç›‘æ§å’Œå‘Šè­¦è®¾ç½®

---

## ğŸ”§ æ¨èå·¥å…·

### Infrastructure as Code
- **Terraform**: æ¨èç”¨äºåŸºç¡€è®¾æ–½ç®¡ç†
- **AWS CDK**: ä½¿ç”¨ TypeScript/Python å®šä¹‰åŸºç¡€è®¾æ–½
- **CloudFormation**: AWS åŸç”Ÿ IaC å·¥å…·

### CI/CD
- **GitHub Actions**: è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
- **AWS CodePipeline**: AWS åŸç”Ÿ CI/CD
- **GitLab CI**: å¦‚æœä½¿ç”¨ GitLab

### ç›‘æ§å’Œæ—¥å¿—
- **CloudWatch**: AWS åŸç”Ÿç›‘æ§
- **Datadog**: ç¬¬ä¸‰æ–¹ç›‘æ§ï¼ˆé¢å¤–è´¹ç”¨ï¼‰
- **New Relic**: åº”ç”¨æ€§èƒ½ç›‘æ§ï¼ˆé¢å¤–è´¹ç”¨ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æˆæœ¬ä¼˜åŒ–**
   - ä½¿ç”¨é¢„ç•™å®ä¾‹å¯èŠ‚çœ 30-40%
   - ä½¿ç”¨ Spot å®ä¾‹å¯èŠ‚çœ 70%ï¼ˆé€‚åˆéå…³é”®ä»»åŠ¡ï¼‰
   - å®šæœŸå®¡æŸ¥å’Œä¼˜åŒ–èµ„æºä½¿ç”¨

2. **å®‰å…¨æ€§**
   - å¯ç”¨ VPC ç«¯ç‚¹ï¼ˆé¿å… NAT Gateway è´¹ç”¨ï¼‰
   - ä½¿ç”¨ IAM è§’è‰²è€Œéè®¿é—®å¯†é’¥
   - å¯ç”¨ CloudTrail å®¡è®¡
   - ä½¿ç”¨ AWS WAF ä¿æŠ¤åº”ç”¨

3. **é«˜å¯ç”¨æ€§**
   - å¤šå¯ç”¨åŒºéƒ¨ç½²
   - è‡ªåŠ¨å¤‡ä»½
   - ç¾éš¾æ¢å¤è®¡åˆ’

4. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨ CloudFront ç¼“å­˜
   - å¯ç”¨ RDS åªè¯»å‰¯æœ¬
   - ä½¿ç”¨ ElastiCache é›†ç¾¤æ¨¡å¼

---

## ğŸ“š å‚è€ƒèµ„æº

- [AWS ECS Fargate å®šä»·](https://aws.amazon.com/ecs/pricing/)
- [AWS RDS å®šä»·](https://aws.amazon.com/rds/pricing/)
- [AWS ElastiCache å®šä»·](https://aws.amazon.com/elasticache/pricing/)
- [AWS æˆæœ¬è®¡ç®—å™¨](https://calculator.aws/)

---

## ğŸ¯ æ€»ç»“

**æ¨èæ–¹æ¡ˆ**: ECS Fargateï¼ˆæ–¹æ¡ˆä¸€ï¼‰
- é€‚åˆéœ€è¦å¼¹æ€§æ‰©å±•çš„åº”ç”¨
- æ— éœ€ç®¡ç†æœåŠ¡å™¨
- æˆæœ¬é€‚ä¸­ï¼ˆ$323-336/æœˆï¼‰

**æˆæœ¬ä¼˜åŒ–æ–¹æ¡ˆ**: EC2 + é¢„ç•™å®ä¾‹ï¼ˆæ–¹æ¡ˆäºŒï¼‰
- å¯èŠ‚çœ 15-20% æˆæœ¬
- éœ€è¦æ›´å¤šè¿ç»´å·¥ä½œ

**å¿«é€Ÿè¿ç§»æ–¹æ¡ˆ**: Elastic Beanstalkï¼ˆæ–¹æ¡ˆä¸‰ï¼‰
- éƒ¨ç½²æœ€ç®€å•
- é€‚åˆå¿«é€Ÿè¿ç§»

**é¢„è®¡è¿ç§»æ—¶é—´**: 4-6 å‘¨
**é¢„è®¡è¿ç§»æˆæœ¬**: $500-1,000ï¼ˆä¸€æ¬¡æ€§ï¼ŒåŒ…æ‹¬æµ‹è¯•å’Œä¼˜åŒ–ï¼‰
