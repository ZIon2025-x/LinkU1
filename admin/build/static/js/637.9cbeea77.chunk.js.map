{"version":3,"file":"static/js/637.9cbeea77.chunk.js","mappings":"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","sources":["pages/admin/flea-market/FleaMarketManagement.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { message, Modal } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport { useAdminTable, useModalForm } from '../../../hooks';\r\nimport { AdminTable, AdminPagination, StatusBadge, Column } from '../../../components/admin';\r\nimport { getFleaMarketItemsAdmin, updateFleaMarketItemAdmin, deleteFleaMarketItemAdmin } from '../../../api';\r\nimport { getErrorMessage } from '../../../utils/errorHandler';\r\n\r\ninterface FleaMarketItem {\r\n  id: number;\r\n  title: string;\r\n  description?: string;\r\n  price: number;\r\n  category: string;\r\n  seller_name?: string;\r\n  seller_id?: number;\r\n  status: 'active' | 'sold' | 'deleted' | 'pending';\r\n  location?: string;\r\n  created_at: string;\r\n}\r\n\r\nconst statusVariantMap: Record<string, { text: string; variant: 'success' | 'primary' | 'danger' | 'warning' }> = {\r\n  active: { text: '在售', variant: 'success' },\r\n  sold: { text: '已售出', variant: 'primary' },\r\n  deleted: { text: '已删除', variant: 'danger' },\r\n  pending: { text: '待审核', variant: 'warning' }\r\n};\r\n\r\n/**\r\n * 跳蚤市场管理组件\r\n */\r\nconst FleaMarketManagement: React.FC = () => {\r\n  const [keyword, setKeyword] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [categoryFilter, setCategoryFilter] = useState('');\r\n\r\n  const fetchItems = useCallback(async ({ page, pageSize, filters }: { page: number; pageSize: number; filters?: Record<string, any> }) => {\r\n    const response = await getFleaMarketItemsAdmin({\r\n      page,\r\n      page_size: pageSize,\r\n      keyword: filters?.keyword,\r\n      status_filter: filters?.status,\r\n      category: filters?.category\r\n    });\r\n    return {\r\n      data: response.items || [],\r\n      total: response.total || 0\r\n    };\r\n  }, []);\r\n\r\n  const handleFetchError = useCallback((error: any) => {\r\n    message.error(getErrorMessage(error));\r\n  }, []);\r\n\r\n  const table = useAdminTable<FleaMarketItem>({\r\n    fetchData: fetchItems,\r\n    initialPageSize: 20,\r\n    onError: handleFetchError,\r\n  });\r\n\r\n  const modal = useModalForm<Partial<FleaMarketItem>>({\r\n    initialValues: {},\r\n    onSubmit: async (values) => {\r\n      if (!values.id) return;\r\n      await updateFleaMarketItemAdmin(String(values.id), {\r\n        title: values.title,\r\n        description: values.description,\r\n        price: values.price,\r\n        category: values.category,\r\n        location: values.location,\r\n        status: values.status\r\n      });\r\n      message.success('商品更新成功');\r\n      table.refresh();\r\n    },\r\n    onError: (error) => {\r\n      message.error(getErrorMessage(error));\r\n    },\r\n  });\r\n\r\n  const handleEdit = (item: FleaMarketItem) => {\r\n    modal.open({ ...item });\r\n  };\r\n\r\n  const handleDelete = (id: number) => {\r\n    Modal.confirm({\r\n      title: '确认删除',\r\n      content: '确定要删除这个商品吗？',\r\n      okText: '确定',\r\n      cancelText: '取消',\r\n      okButtonProps: { danger: true },\r\n      onOk: async () => {\r\n        try {\r\n          await deleteFleaMarketItemAdmin(String(id));\r\n          message.success('商品删除成功');\r\n          table.refresh();\r\n        } catch (error: any) {\r\n          message.error(getErrorMessage(error));\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    table.setFilters({\r\n      keyword: keyword || undefined,\r\n      status: statusFilter || undefined,\r\n      category: categoryFilter || undefined\r\n    });\r\n  };\r\n\r\n  const columns: Column<FleaMarketItem>[] = [\r\n    {\r\n      key: 'id',\r\n      title: '商品ID',\r\n      dataIndex: 'id',\r\n      width: 90,\r\n    },\r\n    {\r\n      key: 'title',\r\n      title: '标题',\r\n      dataIndex: 'title',\r\n      width: 200,\r\n      render: (value) => (\r\n        <span style={{ maxWidth: 200, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', display: 'block' }}>\r\n          {value}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      key: 'price',\r\n      title: '价格',\r\n      dataIndex: 'price',\r\n      width: 100,\r\n      render: (value) => `£${value}`,\r\n    },\r\n    {\r\n      key: 'category',\r\n      title: '分类',\r\n      dataIndex: 'category',\r\n      width: 120,\r\n    },\r\n    {\r\n      key: 'seller_name',\r\n      title: '卖家',\r\n      dataIndex: 'seller_name',\r\n      width: 120,\r\n      render: (value) => value || '-',\r\n    },\r\n    {\r\n      key: 'status',\r\n      title: '状态',\r\n      dataIndex: 'status',\r\n      width: 100,\r\n      render: (value) => {\r\n        const config = statusVariantMap[value] || { text: value, variant: 'default' as const };\r\n        return <StatusBadge text={config.text} variant={config.variant} />;\r\n      },\r\n    },\r\n    {\r\n      key: 'created_at',\r\n      title: '创建时间',\r\n      dataIndex: 'created_at',\r\n      width: 150,\r\n      render: (value) => (\r\n        <span style={{ fontSize: '12px', color: '#666' }}>\r\n          {dayjs(value).format('YYYY-MM-DD HH:mm')}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      key: 'actions',\r\n      title: '操作',\r\n      width: 140,\r\n      align: 'center',\r\n      render: (_, record) => (\r\n        <div style={{ display: 'flex', gap: '8px', justifyContent: 'center' }}>\r\n          <button\r\n            onClick={() => handleEdit(record)}\r\n            style={{ padding: '4px 8px', background: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n          >\r\n            编辑\r\n          </button>\r\n          {record.status !== 'deleted' && (\r\n            <button\r\n              onClick={() => handleDelete(record.id)}\r\n              style={{ padding: '4px 8px', background: '#ff4d4f', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n            >\r\n              删除\r\n            </button>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2 style={{ marginBottom: '20px' }}>跳蚤市场管理</h2>\r\n\r\n      {/* 筛选器 */}\r\n      <div style={{ marginBottom: '20px', display: 'flex', gap: '10px', flexWrap: 'wrap', alignItems: 'center' }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"搜索关键词（标题/描述）\"\r\n          value={keyword}\r\n          onChange={(e) => setKeyword(e.target.value)}\r\n          onKeyPress={(e) => { if (e.key === 'Enter') handleSearch(); }}\r\n          style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px', width: '200px' }}\r\n        />\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n        >\r\n          <option value=\"\">全部状态</option>\r\n          <option value=\"active\">在售</option>\r\n          <option value=\"sold\">已售出</option>\r\n          <option value=\"deleted\">已删除</option>\r\n          <option value=\"pending\">待审核</option>\r\n        </select>\r\n        <select\r\n          value={categoryFilter}\r\n          onChange={(e) => setCategoryFilter(e.target.value)}\r\n          style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n        >\r\n          <option value=\"\">全部分类</option>\r\n          <option value=\"Electronics\">电子产品</option>\r\n          <option value=\"Furniture\">家具</option>\r\n          <option value=\"Clothing\">服装</option>\r\n          <option value=\"Books\">书籍</option>\r\n          <option value=\"Sports\">运动用品</option>\r\n          <option value=\"Other\">其他</option>\r\n        </select>\r\n        <button\r\n          onClick={handleSearch}\r\n          style={{ padding: '8px 16px', background: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n        >\r\n          搜索\r\n        </button>\r\n      </div>\r\n\r\n      <AdminTable\r\n        columns={columns}\r\n        data={table.data}\r\n        loading={table.loading}\r\n        rowKey=\"id\"\r\n        emptyText=\"暂无商品\"\r\n      />\r\n\r\n      <AdminPagination\r\n        currentPage={table.currentPage}\r\n        totalPages={table.totalPages}\r\n        total={table.total}\r\n        pageSize={table.pageSize}\r\n        onPageChange={table.setCurrentPage}\r\n        onPageSizeChange={table.setPageSize}\r\n      />\r\n\r\n      {/* 编辑模态框 */}\r\n      <Modal\r\n        title=\"编辑商品\"\r\n        open={modal.isOpen}\r\n        onOk={modal.handleSubmit}\r\n        onCancel={modal.close}\r\n        confirmLoading={modal.loading}\r\n        okText=\"保存\"\r\n        cancelText=\"取消\"\r\n        width={600}\r\n      >\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px', padding: '20px 0' }}>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>标题：</label>\r\n            <input\r\n              type=\"text\"\r\n              value={modal.formData.title || ''}\r\n              onChange={(e) => modal.updateField('title', e.target.value)}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', boxSizing: 'border-box' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>描述：</label>\r\n            <textarea\r\n              value={modal.formData.description || ''}\r\n              onChange={(e) => modal.updateField('description', e.target.value)}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', minHeight: '100px', boxSizing: 'border-box' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>价格：</label>\r\n            <input\r\n              type=\"number\"\r\n              value={modal.formData.price || ''}\r\n              onChange={(e) => modal.updateField('price', parseFloat(e.target.value))}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', boxSizing: 'border-box' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>分类：</label>\r\n            <select\r\n              value={modal.formData.category || ''}\r\n              onChange={(e) => modal.updateField('category', e.target.value)}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n            >\r\n              <option value=\"Electronics\">电子产品</option>\r\n              <option value=\"Furniture\">家具</option>\r\n              <option value=\"Clothing\">服装</option>\r\n              <option value=\"Books\">书籍</option>\r\n              <option value=\"Sports\">运动用品</option>\r\n              <option value=\"Other\">其他</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>位置：</label>\r\n            <input\r\n              type=\"text\"\r\n              value={modal.formData.location || ''}\r\n              onChange={(e) => modal.updateField('location', e.target.value)}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', boxSizing: 'border-box' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>状态：</label>\r\n            <select\r\n              value={modal.formData.status || 'active'}\r\n              onChange={(e) => modal.updateField('status', e.target.value as FleaMarketItem['status'])}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n            >\r\n              <option value=\"active\">在售</option>\r\n              <option value=\"sold\">已售出</option>\r\n              <option value=\"deleted\">已删除</option>\r\n              <option value=\"pending\">待审核</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FleaMarketManagement;\r\n"],"names":["statusVariantMap","active","text","variant","sold","deleted","pending","FleaMarketManagement","keyword","setKeyword","useState","statusFilter","setStatusFilter","categoryFilter","setCategoryFilter","fetchItems","useCallback","async","page","pageSize","filters","_ref","response","getFleaMarketItemsAdmin","page_size","status_filter","status","category","data","items","total","handleFetchError","error","message","getErrorMessage","table","useAdminTable","fetchData","initialPageSize","onError","modal","useModalForm","initialValues","onSubmit","values","id","updateFleaMarketItemAdmin","String","title","description","price","location","success","refresh","handleSearch","setFilters","undefined","columns","key","dataIndex","width","render","value","_jsx","style","maxWidth","overflow","textOverflow","whiteSpace","display","children","concat","config","StatusBadge","fontSize","color","dayjs","format","align","_","record","_jsxs","gap","justifyContent","onClick","handleEdit","item","open","_objectSpread","padding","background","border","borderRadius","cursor","handleDelete","Modal","confirm","content","okText","cancelText","okButtonProps","danger","onOk","deleteFleaMarketItemAdmin","marginBottom","flexWrap","alignItems","type","placeholder","onChange","e","target","onKeyPress","AdminTable","loading","rowKey","emptyText","AdminPagination","currentPage","totalPages","onPageChange","setCurrentPage","onPageSizeChange","setPageSize","isOpen","handleSubmit","onCancel","close","confirmLoading","flexDirection","fontWeight","formData","updateField","boxSizing","minHeight","parseFloat"],"sourceRoot":""}