{"version":3,"file":"static/js/659.4242459a.chunk.js","mappings":"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","sources":["pages/admin/experts/ExpertManagement.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { message, Modal } from 'antd';\r\nimport { useAdminTable, useModalForm } from '../../../hooks';\r\nimport { AdminTable, AdminPagination, Column } from '../../../components/admin';\r\nimport {\r\n  getTaskExperts,\r\n  getTaskExpertApplications,\r\n  reviewTaskExpertApplication,\r\n  getProfileUpdateRequests,\r\n  reviewProfileUpdateRequest\r\n} from '../../../api';\r\nimport { getErrorMessage } from '../../../utils/errorHandler';\r\n\r\ntype SubTab = 'list' | 'applications' | 'profile_updates';\r\n\r\ninterface ReviewForm {\r\n  action: 'approve' | 'reject';\r\n  reviewType: 'application' | 'profile';\r\n  reviewComment: string;\r\n  item: any;\r\n}\r\n\r\nconst initialReviewForm: ReviewForm = {\r\n  action: 'approve',\r\n  reviewType: 'application',\r\n  reviewComment: '',\r\n  item: null,\r\n};\r\n\r\n/**\r\n * 专家管理组件\r\n * 管理任务达人列表、申请审核和资料修改审核\r\n */\r\nconst ExpertManagement: React.FC = () => {\r\n  const [subTab, setSubTab] = useState<SubTab>('list');\r\n\r\n  // 达人列表\r\n  const fetchExperts = useCallback(async ({ page, pageSize }: { page: number; pageSize: number }) => {\r\n    const response = await getTaskExperts({ page, size: pageSize });\r\n    return {\r\n      data: response.items || [],\r\n      total: response.total || 0,\r\n    };\r\n  }, []);\r\n\r\n  const handleExpertsError = useCallback((error: any) => {\r\n    message.error(getErrorMessage(error));\r\n  }, []);\r\n\r\n  const expertsTable = useAdminTable<any>({\r\n    fetchData: fetchExperts,\r\n    initialPageSize: 20,\r\n    onError: handleExpertsError,\r\n  });\r\n\r\n  // 申请列表（固定获取 pending 状态，无分页）\r\n  const fetchApplications = useCallback(async () => {\r\n    const response = await getTaskExpertApplications({ status: 'pending' });\r\n    return {\r\n      data: response.items || [],\r\n      total: response.total || (response.items || []).length,\r\n    };\r\n  }, []);\r\n\r\n  const handleApplicationsError = useCallback((error: any) => {\r\n    message.error(getErrorMessage(error));\r\n  }, []);\r\n\r\n  const applicationsTable = useAdminTable<any>({\r\n    fetchData: fetchApplications,\r\n    initialPageSize: 100,\r\n    onError: handleApplicationsError,\r\n  });\r\n\r\n  // 资料修改请求列表（固定获取 pending 状态，无分页）\r\n  const fetchProfileUpdates = useCallback(async () => {\r\n    const response = await getProfileUpdateRequests({ status: 'pending' });\r\n    return {\r\n      data: response.items || [],\r\n      total: response.total || (response.items || []).length,\r\n    };\r\n  }, []);\r\n\r\n  const handleProfileUpdatesError = useCallback((error: any) => {\r\n    message.error(getErrorMessage(error));\r\n  }, []);\r\n\r\n  const profileUpdatesTable = useAdminTable<any>({\r\n    fetchData: fetchProfileUpdates,\r\n    initialPageSize: 100,\r\n    onError: handleProfileUpdatesError,\r\n  });\r\n\r\n  // 审核模态框\r\n  const reviewModal = useModalForm<ReviewForm>({\r\n    initialValues: initialReviewForm,\r\n    onSubmit: async (values) => {\r\n      if (!values.item) return;\r\n      if (values.reviewType === 'application') {\r\n        await reviewTaskExpertApplication(values.item.id, {\r\n          action: values.action,\r\n          review_comment: values.reviewComment || undefined\r\n        });\r\n      } else {\r\n        await reviewProfileUpdateRequest(values.item.id, {\r\n          action: values.action,\r\n          review_comment: values.reviewComment || undefined\r\n        });\r\n      }\r\n      message.success(values.action === 'approve' ? '已批准' : '已拒绝');\r\n      if (values.reviewType === 'application') {\r\n        applicationsTable.refresh();\r\n      } else {\r\n        profileUpdatesTable.refresh();\r\n      }\r\n    },\r\n    onError: (error) => {\r\n      message.error(getErrorMessage(error));\r\n    },\r\n  });\r\n\r\n  const openReview = (item: any, type: 'application' | 'profile', action: 'approve' | 'reject') => {\r\n    reviewModal.open({ action, reviewType: type, reviewComment: '', item });\r\n  };\r\n\r\n  // 达人列表列定义\r\n  const expertColumns: Column<any>[] = [\r\n    {\r\n      key: 'id',\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      width: 80,\r\n    },\r\n    {\r\n      key: 'user',\r\n      title: '用户',\r\n      width: 150,\r\n      render: (_, record) => record.user_name || record.user_id,\r\n    },\r\n    {\r\n      key: 'expertise',\r\n      title: '擅长领域',\r\n      width: 200,\r\n      render: (_, record) => record.expertise?.join(', ') || '-',\r\n    },\r\n    {\r\n      key: 'city',\r\n      title: '城市',\r\n      dataIndex: 'city',\r\n      width: 100,\r\n      render: (value) => value || '-',\r\n    },\r\n    {\r\n      key: 'rating',\r\n      title: '评分',\r\n      width: 80,\r\n      render: (_, record) => record.rating?.toFixed(1) || '-',\r\n    },\r\n    {\r\n      key: 'status',\r\n      title: '状态',\r\n      width: 100,\r\n      render: (_, record) => (\r\n        <span style={{\r\n          padding: '4px 8px',\r\n          borderRadius: '4px',\r\n          background: record.is_active ? '#d4edda' : '#f8d7da',\r\n          color: record.is_active ? '#155724' : '#721c24',\r\n          fontSize: '12px'\r\n        }}>\r\n          {record.is_active ? '活跃' : '停用'}\r\n        </span>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 申请列表列定义\r\n  const applicationColumns: Column<any>[] = [\r\n    {\r\n      key: 'id',\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      width: 80,\r\n    },\r\n    {\r\n      key: 'user',\r\n      title: '申请人',\r\n      width: 150,\r\n      render: (_, record) => record.user_name || record.user_id,\r\n    },\r\n    {\r\n      key: 'expertise',\r\n      title: '擅长领域',\r\n      width: 200,\r\n      render: (_, record) => record.expertise?.join(', ') || '-',\r\n    },\r\n    {\r\n      key: 'bio',\r\n      title: '自我介绍',\r\n      width: 200,\r\n      render: (_, record) => (\r\n        <span style={{ maxWidth: '200px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', display: 'block' }}>\r\n          {record.bio || '-'}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      key: 'created_at',\r\n      title: '申请时间',\r\n      width: 160,\r\n      render: (_, record) => new Date(record.created_at).toLocaleString('zh-CN'),\r\n    },\r\n    {\r\n      key: 'actions',\r\n      title: '操作',\r\n      width: 140,\r\n      align: 'center',\r\n      render: (_, record) => (\r\n        <div style={{ display: 'flex', gap: '8px', justifyContent: 'center' }}>\r\n          <button\r\n            onClick={() => openReview(record, 'application', 'approve')}\r\n            style={{ padding: '4px 8px', border: 'none', background: '#28a745', color: 'white', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n          >\r\n            批准\r\n          </button>\r\n          <button\r\n            onClick={() => openReview(record, 'application', 'reject')}\r\n            style={{ padding: '4px 8px', border: 'none', background: '#dc3545', color: 'white', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n          >\r\n            拒绝\r\n          </button>\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 资料修改请求列定义\r\n  const profileUpdateColumns: Column<any>[] = [\r\n    {\r\n      key: 'id',\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      width: 80,\r\n    },\r\n    {\r\n      key: 'expert',\r\n      title: '达人',\r\n      width: 150,\r\n      render: (_, record) => record.expert_name || record.expert_id,\r\n    },\r\n    {\r\n      key: 'changes',\r\n      title: '修改内容',\r\n      width: 300,\r\n      render: (_, record) => (\r\n        <span style={{ maxWidth: '300px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', display: 'block' }}>\r\n          {JSON.stringify(record.changes || {})}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      key: 'created_at',\r\n      title: '申请时间',\r\n      width: 160,\r\n      render: (_, record) => new Date(record.created_at).toLocaleString('zh-CN'),\r\n    },\r\n    {\r\n      key: 'actions',\r\n      title: '操作',\r\n      width: 140,\r\n      align: 'center',\r\n      render: (_, record) => (\r\n        <div style={{ display: 'flex', gap: '8px', justifyContent: 'center' }}>\r\n          <button\r\n            onClick={() => openReview(record, 'profile', 'approve')}\r\n            style={{ padding: '4px 8px', border: 'none', background: '#28a745', color: 'white', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n          >\r\n            批准\r\n          </button>\r\n          <button\r\n            onClick={() => openReview(record, 'profile', 'reject')}\r\n            style={{ padding: '4px 8px', border: 'none', background: '#dc3545', color: 'white', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n          >\r\n            拒绝\r\n          </button>\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2 style={{ marginBottom: '20px' }}>任务达人管理</h2>\r\n\r\n      {/* 子标签页 */}\r\n      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>\r\n        {(['list', 'applications', 'profile_updates'] as SubTab[]).map((tab) => (\r\n          <button\r\n            key={tab}\r\n            onClick={() => setSubTab(tab)}\r\n            style={{\r\n              padding: '10px 20px',\r\n              border: 'none',\r\n              background: subTab === tab ? '#007bff' : '#f0f0f0',\r\n              color: subTab === tab ? 'white' : 'black',\r\n              cursor: 'pointer',\r\n              borderRadius: '5px',\r\n              fontSize: '14px',\r\n              fontWeight: '500'\r\n            }}\r\n          >\r\n            {tab === 'list' ? '达人列表' : tab === 'applications' ? '申请审核' : '资料修改审核'}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* 达人列表 */}\r\n      {subTab === 'list' && (\r\n        <>\r\n          <AdminTable\r\n            columns={expertColumns}\r\n            data={expertsTable.data}\r\n            loading={expertsTable.loading}\r\n            rowKey=\"id\"\r\n            emptyText=\"暂无达人数据\"\r\n          />\r\n          <AdminPagination\r\n            currentPage={expertsTable.currentPage}\r\n            totalPages={expertsTable.totalPages}\r\n            total={expertsTable.total}\r\n            pageSize={expertsTable.pageSize}\r\n            onPageChange={expertsTable.setCurrentPage}\r\n            onPageSizeChange={expertsTable.setPageSize}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* 申请列表 */}\r\n      {subTab === 'applications' && (\r\n        <AdminTable\r\n          columns={applicationColumns}\r\n          data={applicationsTable.data}\r\n          loading={applicationsTable.loading}\r\n          rowKey=\"id\"\r\n          emptyText=\"暂无待审核申请\"\r\n        />\r\n      )}\r\n\r\n      {/* 资料修改请求列表 */}\r\n      {subTab === 'profile_updates' && (\r\n        <AdminTable\r\n          columns={profileUpdateColumns}\r\n          data={profileUpdatesTable.data}\r\n          loading={profileUpdatesTable.loading}\r\n          rowKey=\"id\"\r\n          emptyText=\"暂无待审核资料修改请求\"\r\n        />\r\n      )}\r\n\r\n      {/* 审核模态框 */}\r\n      <Modal\r\n        title={reviewModal.formData.action === 'approve' ? '批准确认' : '拒绝确认'}\r\n        open={reviewModal.isOpen}\r\n        onCancel={reviewModal.close}\r\n        onOk={reviewModal.handleSubmit}\r\n        confirmLoading={reviewModal.loading}\r\n        okText={reviewModal.formData.action === 'approve' ? '批准' : '拒绝'}\r\n        cancelText=\"取消\"\r\n      >\r\n        <div style={{ padding: '20px 0' }}>\r\n          <p>确定要{reviewModal.formData.action === 'approve' ? '批准' : '拒绝'}这个{reviewModal.formData.reviewType === 'application' ? '申请' : '资料修改请求'}吗？</p>\r\n          <div style={{ marginTop: '15px' }}>\r\n            <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>备注（可选）</label>\r\n            <textarea\r\n              value={reviewModal.formData.reviewComment}\r\n              onChange={(e) => reviewModal.updateField('reviewComment', e.target.value)}\r\n              placeholder=\"请输入备注...\"\r\n              rows={3}\r\n              style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', resize: 'vertical' }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpertManagement;\r\n"],"names":["initialReviewForm","action","reviewType","reviewComment","item","ExpertManagement","subTab","setSubTab","useState","fetchExperts","useCallback","async","page","pageSize","_ref","response","getTaskExperts","size","data","items","total","handleExpertsError","error","message","getErrorMessage","expertsTable","useAdminTable","fetchData","initialPageSize","onError","fetchApplications","getTaskExpertApplications","status","length","handleApplicationsError","applicationsTable","fetchProfileUpdates","getProfileUpdateRequests","handleProfileUpdatesError","profileUpdatesTable","reviewModal","useModalForm","initialValues","onSubmit","values","reviewTaskExpertApplication","id","review_comment","undefined","reviewProfileUpdateRequest","success","refresh","openReview","type","open","expertColumns","key","title","dataIndex","width","render","_","record","user_name","user_id","_record$expertise","expertise","join","value","_record$rating","rating","toFixed","_jsx","style","padding","borderRadius","background","is_active","color","fontSize","children","applicationColumns","_record$expertise2","maxWidth","overflow","textOverflow","whiteSpace","display","bio","Date","created_at","toLocaleString","align","_jsxs","gap","justifyContent","onClick","border","cursor","profileUpdateColumns","expert_name","expert_id","JSON","stringify","changes","marginBottom","map","tab","fontWeight","_Fragment","AdminTable","columns","loading","rowKey","emptyText","AdminPagination","currentPage","totalPages","onPageChange","setCurrentPage","onPageSizeChange","setPageSize","Modal","formData","isOpen","onCancel","close","onOk","handleSubmit","confirmLoading","okText","cancelText","marginTop","onChange","e","updateField","target","placeholder","rows","resize"],"sourceRoot":""}