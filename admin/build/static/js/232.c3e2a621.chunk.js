"use strict";(self.webpackChunklinku_admin=self.webpackChunklinku_admin||[]).push([[232],{520(e,t,i){i.r(t),i.d(t,{default:()=>x});var r=i(5043),d=i(4400),n=i(9682),o=i(5580),a=i(8075),s=i(6204),l=i(3028),c=i(579);const p={name:"",description:"",sort_order:0,is_active:!0},x=()=>{const e=(0,r.useCallback)(async()=>{const e=await(0,s.Gc)(),t=e.categories||e.items||[];return{data:t,total:t.length}},[]),t=(0,r.useCallback)(e=>{d.Ay.error((0,l.u1)(e))},[]),i=(0,o.Dp)({fetchData:e,initialPageSize:100,onError:t}),x=(0,o.Fb)({initialValues:p,onSubmit:async(e,t)=>{if(!e.name)throw d.Ay.warning("\u8bf7\u586b\u5199\u5206\u7c7b\u540d\u79f0"),new Error("\u5206\u7c7b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a");t&&e.id?(await(0,s.rR)(e.id,{name:e.name,description:e.description||void 0,sort_order:e.sort_order,is_visible:e.is_active}),d.Ay.success("\u5206\u7c7b\u66f4\u65b0\u6210\u529f\uff01")):(await(0,s.K1)({name:e.name,description:e.description||void 0,sort_order:e.sort_order,is_visible:e.is_active}),d.Ay.success("\u5206\u7c7b\u521b\u5efa\u6210\u529f\uff01")),i.refresh()},onError:e=>{d.Ay.error((0,l.u1)(e))}}),h=[{key:"id",title:"ID",dataIndex:"id",width:80},{key:"name",title:"\u540d\u79f0",dataIndex:"name",width:200,render:e=>(0,c.jsx)("strong",{children:e})},{key:"description",title:"\u63cf\u8ff0",dataIndex:"description",width:250,render:e=>(0,c.jsx)("span",{style:{maxWidth:250,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e||"-"})},{key:"post_count",title:"\u5e16\u5b50\u6570",dataIndex:"post_count",width:100,render:e=>e||0},{key:"sort_order",title:"\u6392\u5e8f",dataIndex:"sort_order",width:80},{key:"is_active",title:"\u72b6\u6001",dataIndex:"is_active",width:100,render:e=>(0,c.jsx)(a.Wh,{text:e?"\u542f\u7528":"\u7981\u7528",variant:e?"success":"danger"})},{key:"actions",title:"\u64cd\u4f5c",width:150,align:"center",render:(e,t)=>(0,c.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[(0,c.jsx)("button",{onClick:()=>{return e=t,void x.open({id:e.id,name:e.name,description:e.description||"",sort_order:e.sort_order,is_active:e.is_active});var e},style:{padding:"4px 8px",border:"1px solid #007bff",background:"white",color:"#007bff",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u7f16\u8f91"}),(0,c.jsx)("button",{onClick:()=>{return e=t.id,void n.A.confirm({title:"\u786e\u8ba4\u5220\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u5206\u7c7b\u5417\uff1f\u5220\u9664\u540e\u8be5\u5206\u7c7b\u4e0b\u7684\u5e16\u5b50\u5c06\u65e0\u6cd5\u8bbf\u95ee\u3002",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:async()=>{try{await(0,s.XQ)(e),d.Ay.success("\u5206\u7c7b\u5220\u9664\u6210\u529f\uff01"),i.refresh()}catch(t){d.Ay.error((0,l.u1)(t))}}});var e},style:{padding:"4px 8px",border:"1px solid #dc3545",background:"white",color:"#dc3545",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u5220\u9664"})]})}];return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,c.jsx)("h2",{style:{margin:0},children:"\u8bba\u575b\u5206\u7c7b\u7ba1\u7406"}),(0,c.jsx)("button",{onClick:()=>x.open(p,!0),style:{padding:"10px 20px",border:"none",background:"#28a745",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u521b\u5efa\u5206\u7c7b"})]}),(0,c.jsx)(a.G8,{columns:h,data:i.data,loading:i.loading,rowKey:"id",emptyText:"\u6682\u65e0\u5206\u7c7b"}),i.total>i.pageSize&&(0,c.jsx)(a.E1,{currentPage:i.currentPage,totalPages:i.totalPages,total:i.total,pageSize:i.pageSize,onPageChange:i.setCurrentPage,onPageSizeChange:i.setPageSize}),(0,c.jsx)(n.A,{title:x.isEdit?"\u7f16\u8f91\u5206\u7c7b":"\u521b\u5efa\u5206\u7c7b",open:x.isOpen,onCancel:x.close,onOk:x.handleSubmit,confirmLoading:x.loading,okText:x.isEdit?"\u66f4\u65b0":"\u521b\u5efa",cancelText:"\u53d6\u6d88",width:500,children:(0,c.jsxs)("div",{style:{padding:"20px 0"},children:[(0,c.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,c.jsxs)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:["\u5206\u7c7b\u540d\u79f0 ",(0,c.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,c.jsx)("input",{type:"text",value:x.formData.name,onChange:e=>x.updateField("name",e.target.value),placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"}})]}),(0,c.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"\u63cf\u8ff0"}),(0,c.jsx)("textarea",{value:x.formData.description,onChange:e=>x.updateField("description",e.target.value),placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u63cf\u8ff0\uff08\u53ef\u9009\uff09",rows:3,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",resize:"vertical",boxSizing:"border-box"}})]}),(0,c.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,c.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"\u6392\u5e8f\uff08\u6570\u5b57\u8d8a\u5c0f\u8d8a\u9760\u524d\uff09"}),(0,c.jsx)("input",{type:"number",value:x.formData.sort_order,onChange:e=>x.updateField("sort_order",parseInt(e.target.value)||0),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"}})]}),(0,c.jsx)("div",{style:{marginBottom:"15px"},children:(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:x.formData.is_active,onChange:e=>x.updateField("is_active",e.target.checked)}),(0,c.jsx)("span",{children:"\u542f\u7528\u72b6\u6001"})]})})]})})]})}}}]);
//# sourceMappingURL=232.c3e2a621.chunk.js.map