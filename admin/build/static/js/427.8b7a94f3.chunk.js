"use strict";(self.webpackChunklinku_admin=self.webpackChunklinku_admin||[]).push([[427],{8075(e,a,t){t.d(a,{lM:()=>h,E1:()=>N,G8:()=>i,Wh:()=>C});var s=t(5043);const n={tableContainer:"AdminTable_tableContainer__e9H15",tableWrapper:"AdminTable_tableWrapper__osoA3",table:"AdminTable_table__hhQ-v",bordered:"AdminTable_bordered__m1Il7",thead:"AdminTable_thead__Ki2z-",sorterIcon:"AdminTable_sorterIcon__u-RwK",tbody:"AdminTable_tbody__NG2FT",striped:"AdminTable_striped__9diyj",hoverable:"AdminTable_hoverable__sARgT",clickable:"AdminTable_clickable__aG37b",emptyCell:"AdminTable_emptyCell__GSjjO",loadingOverlay:"AdminTable_loadingOverlay__YE-In",spinner:"AdminTable_spinner__SEu1I","fixed-left":"AdminTable_fixed-left__2+R8Z","fixed-right":"AdminTable_fixed-right__rVHZ9"};var l=t(579);function i(e){let{columns:a,data:t,loading:s=!1,rowKey:i="id",onRowClick:r,emptyText:d="\u6682\u65e0\u6570\u636e",className:o="",maxHeight:c,striped:u=!0,hoverable:_=!0,bordered:m=!1}=e;const h=(e,a,t)=>{var s;return e.render?e.render(e.dataIndex?a[e.dataIndex]:a,a,t):e.dataIndex?String(null!==(s=a[e.dataIndex])&&void 0!==s?s:""):""},g=[n.table,o,u&&n.striped,_&&n.hoverable,m&&n.bordered].filter(Boolean).join(" ");return(0,l.jsxs)("div",{className:n.tableContainer,children:[s&&(0,l.jsx)("div",{className:n.loadingOverlay,children:(0,l.jsx)("div",{className:n.spinner,children:"\u52a0\u8f7d\u4e2d..."})}),(0,l.jsx)("div",{className:n.tableWrapper,style:c?{maxHeight:c,overflowY:"auto"}:void 0,children:(0,l.jsxs)("table",{className:g,children:[(0,l.jsx)("thead",{className:n.thead,children:(0,l.jsx)("tr",{children:a.map(e=>(0,l.jsxs)("th",{style:{width:e.width,textAlign:e.align||"left"},className:e.fixed?n["fixed-".concat(e.fixed)]:"",children:[e.title,e.sorter&&(0,l.jsx)("span",{className:n.sorterIcon,children:"\u21c5"})]},e.key))})}),(0,l.jsx)("tbody",{className:n.tbody,children:0===t.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:a.length,className:n.emptyCell,children:d})}):t.map((e,t)=>(0,l.jsx)("tr",{onClick:()=>null===r||void 0===r?void 0:r(e),className:r?n.clickable:"",children:a.map(a=>(0,l.jsx)("td",{style:{width:a.width,textAlign:a.align||"left"},className:a.fixed?n["fixed-".concat(a.fixed)]:"",children:h(a,e,t)},a.key))},((e,a)=>{var t;return"function"===typeof i?i(e):null!==(t=e[i])&&void 0!==t?t:a})(e,t)))})]})})]})}const r="AdminModal_overlay__UVEsG",d="AdminModal_modal__1xgs2",o="AdminModal_header__1SzRU",c="AdminModal_title__KQn5l",u="AdminModal_closeButton__vi-3y",_="AdminModal_content__xazwp",m="AdminModal_footer__kn3sT",h=e=>{let{isOpen:a,onClose:t,title:n,children:i,footer:h,width:g="600px",maxWidth:b="90vw",maxHeight:p="90vh",closeOnOverlayClick:f=!0,showCloseButton:x=!0,className:v=""}=e;if((0,s.useEffect)(()=>(document.body.style.overflow=a?"hidden":"",()=>{document.body.style.overflow=""}),[a]),(0,s.useEffect)(()=>{const e=e=>{"Escape"===e.key&&a&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,t]),!a)return null;return(0,l.jsx)("div",{className:r,onClick:e=>{e.target===e.currentTarget&&f&&t()},children:(0,l.jsxs)("div",{className:"".concat(d," ").concat(v),style:{width:g,maxWidth:b,maxHeight:p},children:[(0,l.jsxs)("div",{className:o,children:[(0,l.jsx)("h2",{className:c,children:n}),x&&(0,l.jsx)("button",{className:u,onClick:t,"aria-label":"\u5173\u95ed",children:"\xd7"})]}),(0,l.jsx)("div",{className:_,children:i}),h&&(0,l.jsx)("div",{className:m,children:h})]})})},g="AdminPagination_pagination__x5SPp",b="AdminPagination_info__WB9of",p="AdminPagination_controls__21UIb",f="AdminPagination_button__XpqdT",x="AdminPagination_pages__LFsCJ",v="AdminPagination_pageButton__uA0tr",y="AdminPagination_active__qxw0r",S="AdminPagination_ellipsis__6WkmC",j="AdminPagination_pageSizeSelector__4ZdMP",A="AdminPagination_select__wsEeJ",N=e=>{let{currentPage:a,totalPages:t,total:s,pageSize:n,onPageChange:i,onPageSizeChange:r,pageSizeOptions:d=[10,20,50,100],showPageSizeSelector:o=!0,showTotal:c=!0,className:u=""}=e;const _=(a-1)*n+1,m=Math.min(a*n,s);return(0,l.jsxs)("div",{className:"".concat(g," ").concat(u),children:[c&&(0,l.jsxs)("div",{className:b,children:["\u663e\u793a ",_," - ",m," \u6761\uff0c\u5171 ",s," \u6761"]}),(0,l.jsxs)("div",{className:p,children:[(0,l.jsx)("button",{className:f,onClick:()=>{a>1&&i(a-1)},disabled:1===a,children:"\u4e0a\u4e00\u9875"}),(0,l.jsx)("div",{className:x,children:(()=>{const e=[];if(t<=7)for(let a=1;a<=t;a++)e.push(a);else{e.push(1);let s=Math.max(2,a-1),n=Math.min(t-1,a+1);a<=3?n=Math.min(5,t-1):a>=t-2&&(s=Math.max(2,t-5+1)),s>2&&e.push("...");for(let a=s;a<=n;a++)e.push(a);n<t-1&&e.push("..."),e.push(t)}return e})().map((e,t)=>(0,l.jsx)("button",{className:"".concat(v," ").concat(e===a?y:""," ").concat("..."===e?S:""),onClick:()=>(e=>{"number"===typeof e&&i(e)})(e),disabled:"..."===e,children:e},t))}),(0,l.jsx)("button",{className:f,onClick:()=>{a<t&&i(a+1)},disabled:a===t,children:"\u4e0b\u4e00\u9875"})]}),o&&r&&(0,l.jsxs)("div",{className:j,children:[(0,l.jsx)("label",{children:"\u6bcf\u9875\u663e\u793a\uff1a"}),(0,l.jsx)("select",{value:n,onChange:e=>r(Number(e.target.value)),className:A,children:d.map(e=>(0,l.jsxs)("option",{value:e,children:[e," \u6761"]},e))})]})]})},k={badge:"StatusBadge_badge__0X9ju",small:"StatusBadge_small__a8Kk0",medium:"StatusBadge_medium__2KkP5",large:"StatusBadge_large__7nFKg",default:"StatusBadge_default__6Dt8l",primary:"StatusBadge_primary__qaypb",success:"StatusBadge_success__kTjlT",warning:"StatusBadge_warning__z35Ej",danger:"StatusBadge_danger__nuIo0",info:"StatusBadge_info__hP1TS",secondary:"StatusBadge_secondary__edMou",dot:"StatusBadge_dot__ISbOJ",pulse:"StatusBadge_pulse__P7tph"};const C=e=>{let{text:a,variant:t="default",size:s="medium",dot:n=!1,className:i=""}=e;const r=[k.badge,k[t],k[s],i].filter(Boolean).join(" ");return(0,l.jsxs)("span",{className:r,children:[n&&(0,l.jsx)("span",{className:k.dot}),a]})}},5580(e,a,t){t.d(a,{Dp:()=>n,Fb:()=>i});var s=t(5043);function n(e){const{fetchData:a,initialPageSize:t=10,onError:n}=e,[l,i]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),[o,c]=(0,s.useState)(1),[u,_]=(0,s.useState)(t),[m,h]=(0,s.useState)(0),[g,b]=(0,s.useState)(""),[p,f]=(0,s.useState)({}),[x,v]=(0,s.useState)(),[y,S]=(0,s.useState)(),j=Math.ceil(m/u),A=(0,s.useCallback)(async()=>{d(!0);try{const e=await a({page:o,pageSize:u,searchTerm:g,filters:p,sortField:x,sortOrder:y});i(e.data),h(e.total)}catch(e){console.error("Failed to fetch table data:",e),n&&n(e),i([]),h(0)}finally{d(!1)}},[o,u,g,p,x,y,a,n]);(0,s.useEffect)(()=>{A()},[A]);const N=(0,s.useCallback)(e=>{c(e)},[]),k=(0,s.useCallback)(e=>{_(e),c(1)},[]),C=(0,s.useCallback)(e=>{b(e),c(1)},[]),w=(0,s.useCallback)(e=>{f(e),c(1)},[]),T=(0,s.useCallback)((e,a)=>{v(e),S(a)},[]),P=(0,s.useCallback)(async()=>{await A()},[A]),B=(0,s.useCallback)(()=>{c(1),b(""),f({}),v(void 0),S(void 0)},[]);return{data:l,loading:r,currentPage:o,pageSize:u,total:m,totalPages:j,searchTerm:g,filters:p,sortField:x,sortOrder:y,setCurrentPage:N,setPageSize:k,setSearchTerm:C,setFilters:w,setSorting:T,refresh:P,reset:B}}var l=t(9379);function i(e){const{initialValues:a,onSubmit:t,onSuccess:n,onError:i,resetOnClose:r=!0}=e,[d,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[_,m]=(0,s.useState)(a),[h,g]=(0,s.useState)(!1),b=(0,s.useCallback)((e,t)=>{e&&!t?(u(!0),m(e)):(u(!1),m(e||a)),o(!0)},[a]),p=(0,s.useCallback)(()=>{o(!1),r&&setTimeout(()=>{m(a),u(!1)},300)},[a,r]),f=(0,s.useCallback)((e,a)=>{m(t=>(0,l.A)((0,l.A)({},t),{},{[e]:a}))},[]),x=(0,s.useCallback)(async()=>{g(!0);try{await t(_,c),n&&n(),p()}catch(e){console.error("Form submission failed:",e),i&&i(e)}finally{g(!1)}},[_,c,t,n,i,p]),v=(0,s.useCallback)(()=>{m(a),u(!1)},[a]);return{isOpen:d,isEdit:c,formData:_,loading:h,open:b,close:p,setFormData:m,updateField:f,handleSubmit:x,reset:v}}},3028(e,a,t){t.d(a,{u1:()=>s});const s=e=>{var a;if("ERR_NETWORK"===(null===e||void 0===e?void 0:e.code)||"Network Error"===(null===e||void 0===e?void 0:e.message))return"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5";if("ECONNABORTED"===(null===e||void 0===e?void 0:e.code)||null!==e&&void 0!==e&&null!==(a=e.message)&&void 0!==a&&a.includes("timeout"))return"\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5";if(null!==e&&void 0!==e&&e.response){const a=e.response.status,t=e.response.data||{};switch(a){case 400:return n(t)||"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165";case 401:return"\u8bf7\u5148\u767b\u5f55";case 403:return n(t)||"\u6ca1\u6709\u6743\u9650\u6267\u884c\u6b64\u64cd\u4f5c";case 404:return n(t)||"\u8d44\u6e90\u4e0d\u5b58\u5728";case 409:return n(t)||"\u8d44\u6e90\u51b2\u7a81\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u91cd\u590d\u64cd\u4f5c";case 429:const s=e.response.headers["retry-after"]||e.response.headers["Retry-After"];return s?"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u5728 ".concat(s," \u79d2\u540e\u91cd\u8bd5"):n(t)||"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5";case 500:return"\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5";case 502:return"\u7f51\u5173\u9519\u8bef\uff0c\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528";case 503:return"\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5";default:return n(t)||"\u64cd\u4f5c\u5931\u8d25 (".concat(a,")\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}}return null!==e&&void 0!==e&&e.message?e.message:"\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"},n=e=>{if(e.message)return e.message;if(e.detail){if("string"===typeof e.detail)return e.detail;if(Array.isArray(e.detail))return e.detail.map(e=>"string"===typeof e?e:e.msg||e.message||JSON.stringify(e)).join("\uff1b");if("object"===typeof e.detail)return e.detail.msg||e.detail.message||JSON.stringify(e.detail)}return e.errors&&Array.isArray(e.errors)?e.errors.join("\uff1b"):e.error?e.error:null}}}]);
//# sourceMappingURL=427.8b7a94f3.chunk.js.map