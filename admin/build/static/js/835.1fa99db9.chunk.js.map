{"version":3,"file":"static/js/835.1fa99db9.chunk.js","mappings":"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","sources":["webpack://linku-admin/./src/pages/admin/dashboard/Dashboard.module.css?ce18","pages/admin/dashboard/Dashboard.tsx","utils/errorHandler.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dashboardSection\":\"Dashboard_dashboardSection__bm5b-\",\"dashboardHeader\":\"Dashboard_dashboardHeader__fXa7U\",\"dashboardTitle\":\"Dashboard_dashboardTitle__NHJY7\",\"statsGrid\":\"Dashboard_statsGrid__Kn0ni\",\"statCard\":\"Dashboard_statCard__FFN3H\",\"statLabel\":\"Dashboard_statLabel__6i+GI\",\"statValue\":\"Dashboard_statValue__3956s\",\"cleanupBtn\":\"Dashboard_cleanupBtn__m+Q12\",\"spinner\":\"Dashboard_spinner__GGlJu\",\"spin\":\"Dashboard_spin__m0GI5\",\"loadingContainer\":\"Dashboard_loadingContainer__HSmiu\",\"errorContainer\":\"Dashboard_errorContainer__5MzM-\",\"errorMessage\":\"Dashboard_errorMessage__aRBdz\",\"retryBtn\":\"Dashboard_retryBtn__vBq0r\",\"periodBtn\":\"Dashboard_periodBtn__AxUOq\",\"periodBtnActive\":\"Dashboard_periodBtnActive__PD8Cv\",\"chartsGrid\":\"Dashboard_chartsGrid__-db7p\",\"chartCard\":\"Dashboard_chartCard__DDF7z\",\"chartTitle\":\"Dashboard_chartTitle__Xj5LZ\",\"chartLoading\":\"Dashboard_chartLoading__nzNRM\"};","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { message } from 'antd';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\nimport api, { getDashboardStats, getUserGrowthStats, getTaskGrowthStats, TrendDataPoint } from '../../../api';\r\nimport { getErrorMessage } from '../../../utils/errorHandler';\r\nimport { DashboardStats, StatCardProps, StatPeriod } from './types';\r\nimport styles from './Dashboard.module.css';\r\n\r\n/**\r\n * ÁªüËÆ°Âç°ÁâáÁªÑ‰ª∂\r\n */\r\nconst StatCard: React.FC<StatCardProps> = ({ label, value, prefix = '', suffix = '' }) => (\r\n  <div className={styles.statCard}>\r\n    <h3 className={styles.statLabel}>{label}</h3>\r\n    <p className={styles.statValue}>\r\n      {prefix}{typeof value === 'number' ? value.toLocaleString() : value}{suffix}\r\n    </p>\r\n  </div>\r\n);\r\n\r\nconst PERIOD_LABELS: Record<StatPeriod, string> = {\r\n  '7d': '7Â§©',\r\n  '30d': '30Â§©',\r\n  '90d': '90Â§©',\r\n};\r\n\r\n/**\r\n * Dashboard ‰ª™Ë°®ÁõòÁªÑ‰ª∂\r\n * ÊòæÁ§∫Á≥ªÁªüÁªüËÆ°Êï∞ÊçÆÂíåÁÆ°ÁêÜÂäüËÉΩÂÖ•Âè£\r\n */\r\nconst Dashboard: React.FC = () => {\r\n  const [stats, setStats] = useState<DashboardStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [cleanupLoading, setCleanupLoading] = useState(false);\r\n  const [period, setPeriod] = useState<StatPeriod>('30d');\r\n  const [userTrend, setUserTrend] = useState<TrendDataPoint[]>([]);\r\n  const [taskTrend, setTaskTrend] = useState<TrendDataPoint[]>([]);\r\n  const [chartLoading, setChartLoading] = useState(false);\r\n\r\n  // Âä†ËΩΩÁªüËÆ°Êï∞ÊçÆ\r\n  const fetchStats = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await getDashboardStats();\r\n      setStats(data);\r\n    } catch (err: any) {\r\n      const errorMsg = getErrorMessage(err);\r\n      setError(errorMsg);\r\n      console.error('Failed to load dashboard stats:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchTrends = useCallback(async () => {\r\n    setChartLoading(true);\r\n    try {\r\n      const [users, tasks] = await Promise.all([\r\n        getUserGrowthStats(period),\r\n        getTaskGrowthStats(period),\r\n      ]);\r\n      setUserTrend(users);\r\n      setTaskTrend(tasks);\r\n    } catch (err: any) {\r\n      message.warning('Ë∂ãÂäøÊï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•: ' + getErrorMessage(err));\r\n    } finally {\r\n      setChartLoading(false);\r\n    }\r\n  }, [period]);\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, [fetchStats]);\r\n\r\n  useEffect(() => { fetchTrends(); }, [fetchTrends]);\r\n\r\n  // Â§ÑÁêÜÊ∏ÖÁêÜÊóß‰ªªÂä°Êñá‰ª∂\r\n  const handleCleanupOldTasks = useCallback(async () => {\r\n    const confirmMessage =\r\n      'Á°ÆÂÆöË¶ÅÊ∏ÖÁêÜÊâÄÊúâÂ∑≤ÂÆåÊàêÊàñÂ∑≤ÂèñÊ∂à‰ªªÂä°ÁöÑÊâÄÊúâÂõæÁâáÂíåÊñá‰ª∂ÂêóÔºü\\n\\n' +\r\n      'Ê∏ÖÁêÜÂÜÖÂÆπÂåÖÊã¨Ôºö\\n' +\r\n      '- ÂÖ¨ÂºÄÂõæÁâáÔºà‰ªªÂä°Áõ∏ÂÖ≥ÂõæÁâáÔºâ\\n' +\r\n      '- ÁßÅÂØÜÂõæÁâáÔºà‰ªªÂä°ËÅäÂ§©ÂõæÁâáÔºâ\\n' +\r\n      '- ÁßÅÂØÜÊñá‰ª∂Ôºà‰ªªÂä°ËÅäÂ§©Êñá‰ª∂Ôºâ\\n\\n' +\r\n      'Ê≥®ÊÑèÔºöÂ∞ÜÊ∏ÖÁêÜÊâÄÊúâÂ∑≤ÂÆåÊàêÊàñÂ∑≤ÂèñÊ∂àÁöÑ‰ªªÂä°Ôºå‰∏çÊ£ÄÊü•Êó∂Èó¥ÈôêÂà∂ÔºÅ\\n' +\r\n      'Ê≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ';\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      return;\r\n    }\r\n\r\n    setCleanupLoading(true);\r\n    try {\r\n      const response = await api.post('/api/admin/cleanup/all-old-tasks');\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        // Âà∑Êñ∞ÁªüËÆ°Êï∞ÊçÆ\r\n        fetchStats();\r\n      } else {\r\n        message.error('Ê∏ÖÁêÜÂ§±Ë¥•');\r\n      }\r\n    } catch (error: any) {\r\n      message.error(getErrorMessage(error));\r\n    } finally {\r\n      setCleanupLoading(false);\r\n    }\r\n  }, [fetchStats]);\r\n\r\n  // ÁªüËÆ°Âç°ÁâáÊ∏≤Êüì\r\n  const statsCards = useMemo(() => {\r\n    if (!stats) return null;\r\n\r\n    return (\r\n      <div className={styles.statsGrid}>\r\n        <StatCard label=\"ÊÄªÁî®Êà∑Êï∞\" value={stats.total_users} />\r\n        <StatCard label=\"ÊÄª‰ªªÂä°Êï∞\" value={stats.total_tasks} />\r\n        <StatCard label=\"ÂÆ¢ÊúçÊï∞Èáè\" value={stats.total_customer_service} />\r\n        <StatCard label=\"Ê¥ªË∑É‰ºöËØù\" value={stats.active_sessions} />\r\n        <StatCard label=\"ÊÄªÊî∂ÂÖ•\" value={stats.total_revenue.toFixed(2)} prefix=\"¬£\" />\r\n        <StatCard label=\"Âπ≥ÂùáËØÑÂàÜ\" value={stats.avg_rating.toFixed(1)} />\r\n      </div>\r\n    );\r\n  }, [stats]);\r\n\r\n  // Âä†ËΩΩÁä∂ÊÄÅ\r\n  if (loading) {\r\n    return (\r\n      <div className={styles.loadingContainer}>\r\n        <span className={styles.spinner} style={{ width: '24px', height: '24px', borderWidth: '3px' }}></span>\r\n        <span style={{ marginLeft: '12px' }}>Âä†ËΩΩ‰∏≠...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ÈîôËØØÁä∂ÊÄÅ\r\n  if (error) {\r\n    return (\r\n      <div className={styles.errorContainer}>\r\n        <span className={styles.errorMessage}>Âä†ËΩΩÂ§±Ë¥•: {error}</span>\r\n        <button className={styles.retryBtn} onClick={fetchStats}>\r\n          ÈáçËØï\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.dashboardSection}>\r\n      <div className={styles.dashboardHeader}>\r\n        <h2 className={styles.dashboardTitle}>Êï∞ÊçÆÊ¶ÇËßà</h2>\r\n        <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n          {(['7d', '30d', '90d'] as StatPeriod[]).map(p => (\r\n            <button\r\n              key={p}\r\n              onClick={() => setPeriod(p)}\r\n              className={`${styles.periodBtn} ${period === p ? styles.periodBtnActive : ''}`}\r\n            >\r\n              {PERIOD_LABELS[p]}\r\n            </button>\r\n          ))}\r\n          {/* existing cleanup button unchanged */}\r\n          <button onClick={handleCleanupOldTasks} disabled={cleanupLoading} className={styles.cleanupBtn}>\r\n            {cleanupLoading ? (\r\n              <><span className={styles.spinner}></span>Ê∏ÖÁêÜ‰∏≠...</>\r\n            ) : (\r\n              <>üóëÔ∏è ‰∏ÄÈîÆÊ∏ÖÁêÜÂ∑≤ÂÆåÊàêÂíåËøáÊúü‰ªªÂä°Êñá‰ª∂</>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {statsCards}\r\n      {/* Trend charts */}\r\n      <div className={styles.chartsGrid}>\r\n        <div className={styles.chartCard}>\r\n          <h3 className={styles.chartTitle}>üìà Áî®Êà∑Ê≥®ÂÜåË∂ãÂäø</h3>\r\n          {chartLoading ? (\r\n            <div className={styles.chartLoading}>Âä†ËΩΩ‰∏≠...</div>\r\n          ) : (\r\n            <ResponsiveContainer width=\"100%\" height={240}>\r\n              <LineChart data={userTrend} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"date\" tick={{ fontSize: 11 }} />\r\n                <YAxis tick={{ fontSize: 11 }} />\r\n                <Tooltip />\r\n                <Line type=\"monotone\" dataKey=\"count\" stroke=\"#1890ff\" dot={false} strokeWidth={2} name=\"Êñ∞Â¢ûÁî®Êà∑\" />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          )}\r\n        </div>\r\n        <div className={styles.chartCard}>\r\n          <h3 className={styles.chartTitle}>üìä ‰ªªÂä°ÂèëÂ∏ÉË∂ãÂäø</h3>\r\n          {chartLoading ? (\r\n            <div className={styles.chartLoading}>Âä†ËΩΩ‰∏≠...</div>\r\n          ) : (\r\n            <ResponsiveContainer width=\"100%\" height={240}>\r\n              <LineChart data={taskTrend} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"date\" tick={{ fontSize: 11 }} />\r\n                <YAxis tick={{ fontSize: 11 }} />\r\n                <Tooltip />\r\n                <Line type=\"monotone\" dataKey=\"count\" stroke=\"#52c41a\" dot={false} strokeWidth={2} name=\"Êñ∞Â¢û‰ªªÂä°\" />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","/**\r\n * Áªü‰∏ÄÈîôËØØÂ§ÑÁêÜÂ∑•ÂÖ∑\r\n * Êèê‰æõÂèãÂ•ΩÁöÑÈîôËØØÊèêÁ§∫ÔºåÁªü‰∏ÄÈîôËØØÂ§ÑÁêÜÈÄªËæë\r\n */\r\n\r\nexport interface ErrorResponse {\r\n  detail?: string | string[] | { msg?: string; message?: string };\r\n  message?: string;\r\n  error?: string;\r\n  errors?: string[];\r\n}\r\n\r\n/**\r\n * Ëé∑ÂèñÂèãÂ•ΩÁöÑÈîôËØØÊ∂àÊÅØ\r\n * @param error ÈîôËØØÂØπË±°\r\n * @returns ÂèãÂ•ΩÁöÑÈîôËØØÊ∂àÊÅØ\r\n */\r\nexport const getErrorMessage = (error: any): string => {\r\n  // Â§ÑÁêÜÁΩëÁªúÈîôËØØ\r\n  if (error?.code === 'ERR_NETWORK' || error?.message === 'Network Error') {\r\n    return 'ÁΩëÁªúÈîôËØØÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•';\r\n  }\r\n\r\n  // Â§ÑÁêÜË∂ÖÊó∂ÈîôËØØ\r\n  if (error?.code === 'ECONNABORTED' || error?.message?.includes('timeout')) {\r\n    return 'ËØ∑Ê±ÇË∂ÖÊó∂ÔºåËØ∑Á®çÂêéÈáçËØï';\r\n  }\r\n\r\n  // Â§ÑÁêÜHTTPÂìçÂ∫îÈîôËØØ\r\n  if (error?.response) {\r\n    const status = error.response.status;\r\n    const data: ErrorResponse = error.response.data || {};\r\n    \r\n    switch (status) {\r\n      case 400:\r\n        return parseErrorDetail(data) || 'ËØ∑Ê±ÇÂèÇÊï∞ÈîôËØØÔºåËØ∑Ê£ÄÊü•ËæìÂÖ•';\r\n      case 401:\r\n        return 'ËØ∑ÂÖàÁôªÂΩï';\r\n      case 403:\r\n        return parseErrorDetail(data) || 'Ê≤°ÊúâÊùÉÈôêÊâßË°åÊ≠§Êìç‰Ωú';\r\n      case 404:\r\n        return parseErrorDetail(data) || 'ËµÑÊ∫ê‰∏çÂ≠òÂú®';\r\n      case 409:\r\n        return parseErrorDetail(data) || 'ËµÑÊ∫êÂÜ≤Á™ÅÔºåËØ∑Ê£ÄÊü•ÊòØÂê¶ÈáçÂ§çÊìç‰Ωú';\r\n      case 429:\r\n        const retryAfter = error.response.headers['retry-after'] || error.response.headers['Retry-After'];\r\n        if (retryAfter) {\r\n          return `ËØ∑Ê±ÇËøá‰∫éÈ¢ëÁπÅÔºåËØ∑Âú® ${retryAfter} ÁßíÂêéÈáçËØï`;\r\n        }\r\n        return parseErrorDetail(data) || 'ËØ∑Ê±ÇËøá‰∫éÈ¢ëÁπÅÔºåËØ∑Á®çÂêéÂÜçËØï';\r\n      case 500:\r\n        return 'ÊúçÂä°Âô®ÈîôËØØÔºåËØ∑Á®çÂêéÂÜçËØï';\r\n      case 502:\r\n        return 'ÁΩëÂÖ≥ÈîôËØØÔºåÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®';\r\n      case 503:\r\n        return 'ÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÈáçËØï';\r\n      default:\r\n        return parseErrorDetail(data) || `Êìç‰ΩúÂ§±Ë¥• (${status})ÔºåËØ∑Á®çÂêéÂÜçËØï`;\r\n    }\r\n  }\r\n  \r\n  // Â§ÑÁêÜÊôÆÈÄöÈîôËØØÊ∂àÊÅØ\r\n  if (error?.message) {\r\n    return error.message;\r\n  }\r\n  \r\n  // ÈªòËÆ§ÈîôËØØÊ∂àÊÅØ\r\n  return 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï';\r\n};\r\n\r\n/**\r\n * Ëß£ÊûêÈîôËØØËØ¶ÊÉÖ\r\n * @param data ÈîôËØØÂìçÂ∫îÊï∞ÊçÆ\r\n * @returns ÈîôËØØÊ∂àÊÅØÂ≠óÁ¨¶‰∏≤\r\n */\r\nconst parseErrorDetail = (data: ErrorResponse): string | null => {\r\n  // ‰ºòÂÖà‰ΩøÁî® message Â≠óÊÆµ\r\n  if (data.message) {\r\n    return data.message;\r\n  }\r\n\r\n  // ÁÑ∂ÂêéÂ∞ùËØï detail Â≠óÊÆµ\r\n  if (data.detail) {\r\n    if (typeof data.detail === 'string') {\r\n      return data.detail;\r\n    }\r\n    if (Array.isArray(data.detail)) {\r\n      return data.detail.map((item: any) => {\r\n        if (typeof item === 'string') {\r\n          return item;\r\n        }\r\n        return item.msg || item.message || JSON.stringify(item);\r\n      }).join('Ôºõ');\r\n    }\r\n    if (typeof data.detail === 'object') {\r\n      return data.detail.msg || data.detail.message || JSON.stringify(data.detail);\r\n    }\r\n  }\r\n\r\n  // Â∞ùËØï errors Êï∞ÁªÑ\r\n  if (data.errors && Array.isArray(data.errors)) {\r\n    return data.errors.join('Ôºõ');\r\n  }\r\n\r\n  // Â∞ùËØï error Â≠óÊÆµ\r\n  if (data.error) {\r\n    return data.error;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Âà§Êñ≠ÈîôËØØÊòØÂê¶ÂèØÈáçËØï\r\n * @param error ÈîôËØØÂØπË±°\r\n * @returns ÊòØÂê¶ÂèØÈáçËØï\r\n */\r\nexport const isRetryableError = (error: any): boolean => {\r\n  if (!error?.response) {\r\n    // ÁΩëÁªúÈîôËØØÂèØ‰ª•ÈáçËØï\r\n    return error?.code === 'ERR_NETWORK' || error?.message === 'Network Error';\r\n  }\r\n\r\n  const status = error.response.status;\r\n  // 5xx ÈîôËØØÂíå 429 ÈîôËØØÂèØ‰ª•ÈáçËØï\r\n  return status >= 500 || status === 429;\r\n};\r\n\r\n/**\r\n * Ëé∑ÂèñÈáçËØïÂª∂ËøüÊó∂Èó¥ÔºàÊØ´ÁßíÔºâ\r\n * @param error ÈîôËØØÂØπË±°\r\n * @param attempt ÂΩìÂâçÈáçËØïÊ¨°Êï∞\r\n * @returns Âª∂ËøüÊó∂Èó¥ÔºàÊØ´ÁßíÔºâ\r\n */\r\nexport const getRetryDelay = (error: any, attempt: number = 1): number => {\r\n  // Â¶ÇÊûúÊúâ Retry-After Â§¥Ôºå‰ΩøÁî®ÂÆÉ\r\n  const retryAfter = error?.response?.headers?.['retry-after'] || \r\n                     error?.response?.headers?.['Retry-After'];\r\n  if (retryAfter) {\r\n    return parseInt(retryAfter, 10) * 1000;\r\n  }\r\n\r\n  // ÊåáÊï∞ÈÄÄÈÅøÔºö1s, 2s, 4s, 8s...\r\n  return Math.min(1000 * Math.pow(2, attempt - 1), 8000);\r\n};\r\n\r\n/**\r\n * ËÆ∞ÂΩïÈîôËØØÔºàÁî®‰∫éÈîôËØØÁõëÊéßÔºâ\r\n * @param error ÈîôËØØÂØπË±°\r\n * @param context ÈîôËØØ‰∏ä‰∏ãÊñá\r\n */\r\nexport const logError = (error: any, context?: Record<string, any>): void => {\r\n  const errorMessage = getErrorMessage(error);\r\n  const errorInfo = {\r\n    message: errorMessage,\r\n    status: error?.response?.status,\r\n    url: error?.config?.url || error?.request?.url,\r\n    method: error?.config?.method,\r\n    context,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n\r\n  // Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÔºåÂèØ‰ª•ÂèëÈÄÅÂà∞ÈîôËØØÁõëÊéßÊúçÂä°ÔºàÂ¶Ç SentryÔºâ\r\n  if (process.env.NODE_ENV === 'production') {\r\n    // TODO: ÈõÜÊàêÈîôËØØÁõëÊéßÊúçÂä°\r\n    // Sentry.captureException(error, { extra: errorInfo });\r\n    // ÈîôËØØ‰ø°ÊÅØÂ∑≤ËÆ∞ÂΩïÔºåÂèØÁî®‰∫éÈîôËØØÁõëÊéßÊúçÂä°\r\n  } else {\r\n    // ÂºÄÂèëÁéØÂ¢ÉÔºöÈîôËØØ‰ø°ÊÅØÂ∑≤ËÆ∞ÂΩï\r\n    // Â¶ÇÈúÄË∞ÉËØïÔºåÂèØÂú®Ê≠§Â§ÑÊ∑ªÂä†Êó•ÂøóËæìÂá∫\r\n  }\r\n};\r\n\r\n"],"names":["StatCard","_ref","label","value","prefix","suffix","_jsxs","className","styles","children","_jsx","toLocaleString","PERIOD_LABELS","Dashboard","stats","setStats","useState","loading","setLoading","error","setError","cleanupLoading","setCleanupLoading","period","setPeriod","userTrend","setUserTrend","taskTrend","setTaskTrend","chartLoading","setChartLoading","fetchStats","useCallback","async","data","getDashboardStats","err","errorMsg","getErrorMessage","console","fetchTrends","users","tasks","Promise","all","getUserGrowthStats","getTaskGrowthStats","message","warning","useEffect","handleCleanupOldTasks","window","confirm","response","api","post","success","statsCards","useMemo","total_users","total_tasks","total_customer_service","active_sessions","total_revenue","toFixed","avg_rating","style","width","height","borderWidth","marginLeft","onClick","display","gap","alignItems","map","p","concat","disabled","_Fragment","ResponsiveContainer","LineChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","tick","fontSize","YAxis","Tooltip","Line","type","stroke","dot","strokeWidth","name","_error$message","code","includes","status","parseErrorDetail","retryAfter","headers","detail","Array","isArray","item","msg","JSON","stringify","join","errors"],"sourceRoot":""}