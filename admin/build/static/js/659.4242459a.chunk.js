"use strict";(self.webpackChunklinku_admin=self.webpackChunklinku_admin||[]).push([[659],{7388(e,t,i){i.r(t),i.d(t,{default:()=>x});var a=i(5043),r=i(4400),n=i(9682),o=i(5580),d=i(8075),l=i(6204),s=i(3028),p=i(579);const c={action:"approve",reviewType:"application",reviewComment:"",item:null},x=()=>{const[e,t]=(0,a.useState)("list"),i=(0,a.useCallback)(async e=>{let{page:t,pageSize:i}=e;const a=await(0,l.Nh)({page:t,size:i});return{data:a.items||[],total:a.total||0}},[]),x=(0,a.useCallback)(e=>{r.Ay.error((0,s.u1)(e))},[]),u=(0,o.Dp)({fetchData:i,initialPageSize:20,onError:x}),h=(0,a.useCallback)(async()=>{const e=await(0,l.D5)({status:"pending"});return{data:e.items||[],total:e.total||(e.items||[]).length}},[]),g=(0,a.useCallback)(e=>{r.Ay.error((0,s.u1)(e))},[]),y=(0,o.Dp)({fetchData:h,initialPageSize:100,onError:g}),w=(0,a.useCallback)(async()=>{const e=await(0,l.vW)({status:"pending"});return{data:e.items||[],total:e.total||(e.items||[]).length}},[]),m=(0,a.useCallback)(e=>{r.Ay.error((0,s.u1)(e))},[]),v=(0,o.Dp)({fetchData:w,initialPageSize:100,onError:m}),k=(0,o.Fb)({initialValues:c,onSubmit:async e=>{e.item&&("application"===e.reviewType?await(0,l.WV)(e.item.id,{action:e.action,review_comment:e.reviewComment||void 0}):await(0,l.O2)(e.item.id,{action:e.action,review_comment:e.reviewComment||void 0}),r.Ay.success("approve"===e.action?"\u5df2\u6279\u51c6":"\u5df2\u62d2\u7edd"),"application"===e.reviewType?y.refresh():v.refresh())},onError:e=>{r.Ay.error((0,s.u1)(e))}}),b=(e,t,i)=>{k.open({action:i,reviewType:t,reviewComment:"",item:e})},f=[{key:"id",title:"ID",dataIndex:"id",width:80},{key:"user",title:"\u7528\u6237",width:150,render:(e,t)=>t.user_name||t.user_id},{key:"expertise",title:"\u64c5\u957f\u9886\u57df",width:200,render:(e,t)=>{var i;return(null===(i=t.expertise)||void 0===i?void 0:i.join(", "))||"-"}},{key:"city",title:"\u57ce\u5e02",dataIndex:"city",width:100,render:e=>e||"-"},{key:"rating",title:"\u8bc4\u5206",width:80,render:(e,t)=>{var i;return(null===(i=t.rating)||void 0===i?void 0:i.toFixed(1))||"-"}},{key:"status",title:"\u72b6\u6001",width:100,render:(e,t)=>(0,p.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",background:t.is_active?"#d4edda":"#f8d7da",color:t.is_active?"#155724":"#721c24",fontSize:"12px"},children:t.is_active?"\u6d3b\u8dc3":"\u505c\u7528"})}],j=[{key:"id",title:"ID",dataIndex:"id",width:80},{key:"user",title:"\u7533\u8bf7\u4eba",width:150,render:(e,t)=>t.user_name||t.user_id},{key:"expertise",title:"\u64c5\u957f\u9886\u57df",width:200,render:(e,t)=>{var i;return(null===(i=t.expertise)||void 0===i?void 0:i.join(", "))||"-"}},{key:"bio",title:"\u81ea\u6211\u4ecb\u7ecd",width:200,render:(e,t)=>(0,p.jsx)("span",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:t.bio||"-"})},{key:"created_at",title:"\u7533\u8bf7\u65f6\u95f4",width:160,render:(e,t)=>new Date(t.created_at).toLocaleString("zh-CN")},{key:"actions",title:"\u64cd\u4f5c",width:140,align:"center",render:(e,t)=>(0,p.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[(0,p.jsx)("button",{onClick:()=>b(t,"application","approve"),style:{padding:"4px 8px",border:"none",background:"#28a745",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u6279\u51c6"}),(0,p.jsx)("button",{onClick:()=>b(t,"application","reject"),style:{padding:"4px 8px",border:"none",background:"#dc3545",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u62d2\u7edd"})]})}],C=[{key:"id",title:"ID",dataIndex:"id",width:80},{key:"expert",title:"\u8fbe\u4eba",width:150,render:(e,t)=>t.expert_name||t.expert_id},{key:"changes",title:"\u4fee\u6539\u5185\u5bb9",width:300,render:(e,t)=>(0,p.jsx)("span",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:JSON.stringify(t.changes||{})})},{key:"created_at",title:"\u7533\u8bf7\u65f6\u95f4",width:160,render:(e,t)=>new Date(t.created_at).toLocaleString("zh-CN")},{key:"actions",title:"\u64cd\u4f5c",width:140,align:"center",render:(e,t)=>(0,p.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[(0,p.jsx)("button",{onClick:()=>b(t,"profile","approve"),style:{padding:"4px 8px",border:"none",background:"#28a745",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u6279\u51c6"}),(0,p.jsx)("button",{onClick:()=>b(t,"profile","reject"),style:{padding:"4px 8px",border:"none",background:"#dc3545",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u62d2\u7edd"})]})}];return(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{style:{marginBottom:"20px"},children:"\u4efb\u52a1\u8fbe\u4eba\u7ba1\u7406"}),(0,p.jsx)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:["list","applications","profile_updates"].map(i=>(0,p.jsx)("button",{onClick:()=>t(i),style:{padding:"10px 20px",border:"none",background:e===i?"#007bff":"#f0f0f0",color:e===i?"white":"black",cursor:"pointer",borderRadius:"5px",fontSize:"14px",fontWeight:"500"},children:"list"===i?"\u8fbe\u4eba\u5217\u8868":"applications"===i?"\u7533\u8bf7\u5ba1\u6838":"\u8d44\u6599\u4fee\u6539\u5ba1\u6838"},i))}),"list"===e&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.G8,{columns:f,data:u.data,loading:u.loading,rowKey:"id",emptyText:"\u6682\u65e0\u8fbe\u4eba\u6570\u636e"}),(0,p.jsx)(d.E1,{currentPage:u.currentPage,totalPages:u.totalPages,total:u.total,pageSize:u.pageSize,onPageChange:u.setCurrentPage,onPageSizeChange:u.setPageSize})]}),"applications"===e&&(0,p.jsx)(d.G8,{columns:j,data:y.data,loading:y.loading,rowKey:"id",emptyText:"\u6682\u65e0\u5f85\u5ba1\u6838\u7533\u8bf7"}),"profile_updates"===e&&(0,p.jsx)(d.G8,{columns:C,data:v.data,loading:v.loading,rowKey:"id",emptyText:"\u6682\u65e0\u5f85\u5ba1\u6838\u8d44\u6599\u4fee\u6539\u8bf7\u6c42"}),(0,p.jsx)(n.A,{title:"approve"===k.formData.action?"\u6279\u51c6\u786e\u8ba4":"\u62d2\u7edd\u786e\u8ba4",open:k.isOpen,onCancel:k.close,onOk:k.handleSubmit,confirmLoading:k.loading,okText:"approve"===k.formData.action?"\u6279\u51c6":"\u62d2\u7edd",cancelText:"\u53d6\u6d88",children:(0,p.jsxs)("div",{style:{padding:"20px 0"},children:[(0,p.jsxs)("p",{children:["\u786e\u5b9a\u8981","approve"===k.formData.action?"\u6279\u51c6":"\u62d2\u7edd","\u8fd9\u4e2a","application"===k.formData.reviewType?"\u7533\u8bf7":"\u8d44\u6599\u4fee\u6539\u8bf7\u6c42","\u5417\uff1f"]}),(0,p.jsxs)("div",{style:{marginTop:"15px"},children:[(0,p.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"\u5907\u6ce8\uff08\u53ef\u9009\uff09"}),(0,p.jsx)("textarea",{value:k.formData.reviewComment,onChange:e=>k.updateField("reviewComment",e.target.value),placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8...",rows:3,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",resize:"vertical"}})]})]})})]})}}}]);
//# sourceMappingURL=659.4242459a.chunk.js.map