"use strict";(self.webpackChunklinku_admin=self.webpackChunklinku_admin||[]).push([[637],{5874(e,t,i){i.r(t),i.d(t,{default:()=>g});var d=i(9379),a=i(5043),r=i(4400),o=i(9682),n=i(446),l=i.n(n),s=i(5580),p=i(8075),c=i(6204),x=i(3028),u=i(579);const h={active:{text:"\u5728\u552e",variant:"success"},sold:{text:"\u5df2\u552e\u51fa",variant:"primary"},deleted:{text:"\u5df2\u5220\u9664",variant:"danger"},pending:{text:"\u5f85\u5ba1\u6838",variant:"warning"}},g=()=>{const[e,t]=(0,a.useState)(""),[i,n]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),y=(0,a.useCallback)(async e=>{let{page:t,pageSize:i,filters:d}=e;const a=await(0,c.g$)({page:t,page_size:i,keyword:null===d||void 0===d?void 0:d.keyword,status_filter:null===d||void 0===d?void 0:d.status,category:null===d||void 0===d?void 0:d.category});return{data:a.items||[],total:a.total||0}},[]),b=(0,a.useCallback)(e=>{r.Ay.error((0,x.u1)(e))},[]),j=(0,s.Dp)({fetchData:y,initialPageSize:20,onError:b}),f=(0,s.Fb)({initialValues:{},onSubmit:async e=>{e.id&&(await(0,c.gI)(String(e.id),{title:e.title,description:e.description,price:e.price,category:e.category,location:e.location,status:e.status}),r.Ay.success("\u5546\u54c1\u66f4\u65b0\u6210\u529f"),j.refresh())},onError:e=>{r.Ay.error((0,x.u1)(e))}}),m=()=>{j.setFilters({keyword:e||void 0,status:i||void 0,category:g||void 0})},k=[{key:"id",title:"\u5546\u54c1ID",dataIndex:"id",width:90},{key:"title",title:"\u6807\u9898",dataIndex:"title",width:200,render:e=>(0,u.jsx)("span",{style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e})},{key:"price",title:"\u4ef7\u683c",dataIndex:"price",width:100,render:e=>"\xa3".concat(e)},{key:"category",title:"\u5206\u7c7b",dataIndex:"category",width:120},{key:"seller_name",title:"\u5356\u5bb6",dataIndex:"seller_name",width:120,render:e=>e||"-"},{key:"status",title:"\u72b6\u6001",dataIndex:"status",width:100,render:e=>{const t=h[e]||{text:e,variant:"default"};return(0,u.jsx)(p.Wh,{text:t.text,variant:t.variant})}},{key:"created_at",title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at",width:150,render:e=>(0,u.jsx)("span",{style:{fontSize:"12px",color:"#666"},children:l()(e).format("YYYY-MM-DD HH:mm")})},{key:"actions",title:"\u64cd\u4f5c",width:140,align:"center",render:(e,t)=>(0,u.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[(0,u.jsx)("button",{onClick:()=>{return e=t,void f.open((0,d.A)({},e));var e},style:{padding:"4px 8px",background:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u7f16\u8f91"}),"deleted"!==t.status&&(0,u.jsx)("button",{onClick:()=>{return e=t.id,void o.A.confirm({title:"\u786e\u8ba4\u5220\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u5546\u54c1\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",okButtonProps:{danger:!0},onOk:async()=>{try{await(0,c.cn)(String(e)),r.Ay.success("\u5546\u54c1\u5220\u9664\u6210\u529f"),j.refresh()}catch(t){r.Ay.error((0,x.u1)(t))}}});var e},style:{padding:"4px 8px",background:"#ff4d4f",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u5220\u9664"})]})}];return(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{style:{marginBottom:"20px"},children:"\u8df3\u86a4\u5e02\u573a\u7ba1\u7406"}),(0,u.jsxs)("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"},children:[(0,u.jsx)("input",{type:"text",placeholder:"\u641c\u7d22\u5173\u952e\u8bcd\uff08\u6807\u9898/\u63cf\u8ff0\uff09",value:e,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&m()},style:{padding:"8px",border:"1px solid #ddd",borderRadius:"4px",width:"200px"}}),(0,u.jsxs)("select",{value:i,onChange:e=>n(e.target.value),style:{padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,u.jsx)("option",{value:"",children:"\u5168\u90e8\u72b6\u6001"}),(0,u.jsx)("option",{value:"active",children:"\u5728\u552e"}),(0,u.jsx)("option",{value:"sold",children:"\u5df2\u552e\u51fa"}),(0,u.jsx)("option",{value:"deleted",children:"\u5df2\u5220\u9664"}),(0,u.jsx)("option",{value:"pending",children:"\u5f85\u5ba1\u6838"})]}),(0,u.jsxs)("select",{value:g,onChange:e=>v(e.target.value),style:{padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,u.jsx)("option",{value:"",children:"\u5168\u90e8\u5206\u7c7b"}),(0,u.jsx)("option",{value:"Electronics",children:"\u7535\u5b50\u4ea7\u54c1"}),(0,u.jsx)("option",{value:"Furniture",children:"\u5bb6\u5177"}),(0,u.jsx)("option",{value:"Clothing",children:"\u670d\u88c5"}),(0,u.jsx)("option",{value:"Books",children:"\u4e66\u7c4d"}),(0,u.jsx)("option",{value:"Sports",children:"\u8fd0\u52a8\u7528\u54c1"}),(0,u.jsx)("option",{value:"Other",children:"\u5176\u4ed6"})]}),(0,u.jsx)("button",{onClick:m,style:{padding:"8px 16px",background:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u641c\u7d22"})]}),(0,u.jsx)(p.G8,{columns:k,data:j.data,loading:j.loading,rowKey:"id",emptyText:"\u6682\u65e0\u5546\u54c1"}),(0,u.jsx)(p.E1,{currentPage:j.currentPage,totalPages:j.totalPages,total:j.total,pageSize:j.pageSize,onPageChange:j.setCurrentPage,onPageSizeChange:j.setPageSize}),(0,u.jsx)(o.A,{title:"\u7f16\u8f91\u5546\u54c1",open:f.isOpen,onOk:f.handleSubmit,onCancel:f.close,confirmLoading:f.loading,okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",width:600,children:(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px",padding:"20px 0"},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"\u6807\u9898\uff1a"}),(0,u.jsx)("input",{type:"text",value:f.formData.title||"",onChange:e=>f.updateField("title",e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"\u63cf\u8ff0\uff1a"}),(0,u.jsx)("textarea",{value:f.formData.description||"",onChange:e=>f.updateField("description",e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",minHeight:"100px",boxSizing:"border-box"}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"\u4ef7\u683c\uff1a"}),(0,u.jsx)("input",{type:"number",value:f.formData.price||"",onChange:e=>f.updateField("price",parseFloat(e.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"\u5206\u7c7b\uff1a"}),(0,u.jsxs)("select",{value:f.formData.category||"",onChange:e=>f.updateField("category",e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,u.jsx)("option",{value:"Electronics",children:"\u7535\u5b50\u4ea7\u54c1"}),(0,u.jsx)("option",{value:"Furniture",children:"\u5bb6\u5177"}),(0,u.jsx)("option",{value:"Clothing",children:"\u670d\u88c5"}),(0,u.jsx)("option",{value:"Books",children:"\u4e66\u7c4d"}),(0,u.jsx)("option",{value:"Sports",children:"\u8fd0\u52a8\u7528\u54c1"}),(0,u.jsx)("option",{value:"Other",children:"\u5176\u4ed6"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"\u4f4d\u7f6e\uff1a"}),(0,u.jsx)("input",{type:"text",value:f.formData.location||"",onChange:e=>f.updateField("location",e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"\u72b6\u6001\uff1a"}),(0,u.jsxs)("select",{value:f.formData.status||"active",onChange:e=>f.updateField("status",e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,u.jsx)("option",{value:"active",children:"\u5728\u552e"}),(0,u.jsx)("option",{value:"sold",children:"\u5df2\u552e\u51fa"}),(0,u.jsx)("option",{value:"deleted",children:"\u5df2\u5220\u9664"}),(0,u.jsx)("option",{value:"pending",children:"\u5f85\u5ba1\u6838"})]})]})]})})]})}}}]);
//# sourceMappingURL=637.9cbeea77.chunk.js.map