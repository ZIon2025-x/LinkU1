"use strict";(self.webpackChunklinku_admin=self.webpackChunklinku_admin||[]).push([[883],{4756(e,t,a){a.r(t),a.d(t,{default:()=>c});var r=a(5043),i=a(4400),n=a(5580),d=a(8075),o=a(6204),s=a(3028),l=a(579);const p={pending:{text:"\u5f85\u5904\u7406",variant:"warning"},processed:{text:"\u5df2\u5904\u7406",variant:"success"},rejected:{text:"\u5df2\u62d2\u7edd",variant:"danger"},reviewing:{text:"\u5ba1\u6838\u4e2d",variant:"info"},resolved:{text:"\u5df2\u89e3\u51b3",variant:"success"}},c=()=>{var e,t;const[a,c]=(0,r.useState)("forum"),u=(0,n.Dp)({fetchData:(0,r.useCallback)(async e=>{let{page:t,pageSize:a,filters:r}=e;const i=await(0,o.D6)({status_filter:(null===r||void 0===r?void 0:r.status)||void 0,page:t,page_size:a});return{data:i.reports||i.items||[],total:i.total||0}},[]),initialPageSize:20,onError:(0,r.useCallback)(e=>i.Ay.error((0,s.u1)(e)),[])}),x=(0,n.Dp)({fetchData:(0,r.useCallback)(async e=>{let{page:t,pageSize:a,filters:r}=e;const i=await(0,o._v)({status_filter:(null===r||void 0===r?void 0:r.status)||void 0,page:t,page_size:a});return{data:i.reports||i.items||[],total:i.total||0}},[]),initialPageSize:20,onError:(0,r.useCallback)(e=>i.Ay.error((0,s.u1)(e)),[])}),g=async(e,t,a)=>{try{await(0,o.nZ)(e,{status:t,action:a}),i.Ay.success("\u4e3e\u62a5\u5904\u7406\u6210\u529f"),u.refresh()}catch(r){i.Ay.error((0,s.u1)(r))}},h=async(e,t)=>{try{await(0,o.aq)(e,{status:t}),i.Ay.success("\u4e3e\u62a5\u5904\u7406\u6210\u529f"),x.refresh()}catch(a){i.Ay.error((0,s.u1)(a))}},f="forum"===a?(null===(e=u.filters)||void 0===e?void 0:e.status)||"":(null===(t=x.filters)||void 0===t?void 0:t.status)||"",y=[{key:"id",title:"ID",dataIndex:"id",width:80},{key:"target_type",title:"\u7c7b\u578b",dataIndex:"target_type",width:100,render:e=>"post"===e?"\u5e16\u5b50":"\u56de\u590d"},{key:"target_id",title:"\u76ee\u6807ID",dataIndex:"target_id",width:100},{key:"reason",title:"\u4e3e\u62a5\u539f\u56e0",dataIndex:"reason",width:150},{key:"description",title:"\u63cf\u8ff0",dataIndex:"description",width:200,render:e=>(0,l.jsx)("span",{style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e||"-"})},{key:"status",title:"\u72b6\u6001",dataIndex:"status",width:100,render:e=>{const t=p[e]||{text:e,variant:"default"};return(0,l.jsx)(d.Wh,{text:t.text,variant:t.variant})}},{key:"actions",title:"\u64cd\u4f5c",width:150,render:(e,t)=>"pending"===t.status?(0,l.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,l.jsx)("button",{onClick:()=>g(t.id,"processed"),style:{padding:"4px 8px",border:"none",background:"#28a745",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u5904\u7406"}),(0,l.jsx)("button",{onClick:()=>g(t.id,"rejected"),style:{padding:"4px 8px",border:"none",background:"#dc3545",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u62d2\u7edd"})]}):null}],v=[{key:"id",title:"ID",dataIndex:"id",width:80},{key:"item_id",title:"\u5546\u54c1ID",dataIndex:"item_id",width:100},{key:"item_title",title:"\u5546\u54c1\u6807\u9898",dataIndex:"item_title",width:200,render:e=>(0,l.jsx)("span",{style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e||"-"})},{key:"reason",title:"\u4e3e\u62a5\u539f\u56e0",dataIndex:"reason",width:150},{key:"description",title:"\u63cf\u8ff0",dataIndex:"description",width:200,render:e=>(0,l.jsx)("span",{style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e||"-"})},{key:"status",title:"\u72b6\u6001",dataIndex:"status",width:100,render:e=>{const t=p[e]||{text:e,variant:"default"};return(0,l.jsx)(d.Wh,{text:t.text,variant:t.variant})}},{key:"actions",title:"\u64cd\u4f5c",width:150,render:(e,t)=>"pending"===t.status?(0,l.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,l.jsx)("button",{onClick:()=>h(t.id,"resolved"),style:{padding:"4px 8px",border:"none",background:"#28a745",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u5904\u7406"}),(0,l.jsx)("button",{onClick:()=>h(t.id,"rejected"),style:{padding:"4px 8px",border:"none",background:"#dc3545",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u62d2\u7edd"})]}):null}],b="forum"===a?u:x;return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{style:{marginBottom:"20px"},children:"\u4e3e\u62a5\u7ba1\u7406"}),(0,l.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[(0,l.jsx)("button",{onClick:()=>c("forum"),style:{padding:"10px 20px",border:"none",background:"forum"===a?"#007bff":"#f0f0f0",color:"forum"===a?"white":"black",cursor:"pointer",borderRadius:"5px",fontSize:"14px",fontWeight:"500"},children:"\u8bba\u575b\u4e3e\u62a5"}),(0,l.jsx)("button",{onClick:()=>c("flea_market"),style:{padding:"10px 20px",border:"none",background:"flea_market"===a?"#007bff":"#f0f0f0",color:"flea_market"===a?"white":"black",cursor:"pointer",borderRadius:"5px",fontSize:"14px",fontWeight:"500"},children:"\u5546\u54c1\u4e3e\u62a5"})]}),(0,l.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginBottom:"20px"},children:[(0,l.jsxs)("select",{value:f,onChange:e=>{return t=e.target.value,void("forum"===a?u.setFilters({status:t||void 0}):x.setFilters({status:t||void 0}));var t},style:{padding:"8px",borderRadius:"4px",border:"1px solid #ddd"},children:[(0,l.jsx)("option",{value:"",children:"\u5168\u90e8\u72b6\u6001"}),(0,l.jsx)("option",{value:"pending",children:"\u5f85\u5904\u7406"}),(0,l.jsx)("option",{value:"forum"===a?"processed":"resolved",children:"forum"===a?"\u5df2\u5904\u7406":"\u5df2\u89e3\u51b3"}),(0,l.jsx)("option",{value:"rejected",children:"\u5df2\u62d2\u7edd"})]}),(0,l.jsx)("button",{onClick:()=>b.refresh(),style:{marginLeft:"10px",padding:"8px 16px",border:"none",background:"#007bff",color:"white",borderRadius:"4px",cursor:"pointer"},children:"\u5237\u65b0"})]}),"forum"===a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.G8,{columns:y,data:u.data,loading:u.loading,rowKey:"id",emptyText:"\u6682\u65e0\u4e3e\u62a5"}),(0,l.jsx)(d.E1,{currentPage:u.currentPage,totalPages:u.totalPages,total:u.total,pageSize:u.pageSize,onPageChange:u.setCurrentPage,onPageSizeChange:u.setPageSize})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.G8,{columns:v,data:x.data,loading:x.loading,rowKey:"id",emptyText:"\u6682\u65e0\u4e3e\u62a5"}),(0,l.jsx)(d.E1,{currentPage:x.currentPage,totalPages:x.totalPages,total:x.total,pageSize:x.pageSize,onPageChange:x.setCurrentPage,onPageSizeChange:x.setPageSize})]})]})}}}]);
//# sourceMappingURL=883.7d60be68.chunk.js.map