{"version":3,"file":"static/js/192.040bff26.chunk.js","mappings":"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","sources":["pages/admin/coupons/types.ts","pages/admin/coupons/CouponFormModal.tsx","webpack://linku-admin/./src/pages/admin/coupons/CouponManagement.module.css?3458","pages/admin/coupons/CouponManagement.tsx"],"sourcesContent":["export interface CouponForm {\r\n  id?: number;\r\n  code: string;\r\n  name: string;\r\n  description: string;\r\n  type: 'fixed_amount' | 'percentage';\r\n  discount_value: number;\r\n  min_amount: number;\r\n  max_discount?: number;\r\n  currency: string;\r\n  total_quantity?: number;\r\n  per_user_limit: number;\r\n  per_device_limit?: number;\r\n  per_ip_limit?: number;\r\n  can_combine: boolean;\r\n  combine_limit: number;\r\n  apply_order: number;\r\n  valid_from: string;\r\n  valid_until: string;\r\n  points_required: number;\r\n  eligibility_type: '' | 'first_order' | 'new_user' | 'user_type' | 'member' | 'all';\r\n  eligibility_value: '' | 'normal' | 'vip' | 'super';\r\n  per_day_limit?: number;\r\n  per_user_limit_window: '' | 'day' | 'week' | 'month' | 'year';\r\n  per_user_per_window_limit?: number;\r\n  vat_category: '' | 'standard' | 'reduced' | 'zero' | 'exempt';\r\n  applicable_scenarios: string[];\r\n  task_types: string[];\r\n  locations: string[];\r\n  excluded_task_types: string[];\r\n  min_task_amount?: number;\r\n  max_task_amount?: number;\r\n}\r\n\r\nexport interface Coupon {\r\n  id: number;\r\n  code: string;\r\n  name: string;\r\n  description?: string;\r\n  type: 'fixed_amount' | 'percentage';\r\n  discount_value: number;\r\n  min_amount: number;\r\n  max_discount?: number;\r\n  currency?: string;\r\n  total_quantity?: number;\r\n  used_quantity: number;\r\n  remaining_quantity?: number;\r\n  per_user_limit?: number;\r\n  can_combine?: boolean;\r\n  status: 'active' | 'inactive' | 'expired';\r\n  valid_from: string;\r\n  valid_until: string;\r\n  points_required?: number;\r\n  applicable_scenarios?: string[];\r\n  eligibility_type?: string;\r\n  eligibility_value?: string;\r\n  per_user_limit_window?: string;\r\n  per_user_per_window_limit?: number;\r\n  per_day_limit?: number;\r\n  usage_conditions?: {\r\n    task_types?: string[];\r\n    locations?: string[];\r\n    excluded_task_types?: string[];\r\n    min_task_amount?: number;\r\n    max_task_amount?: number;\r\n  };\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\n// 获取默认有效期（当前时间 ~ 一个月后）\r\nexport const getDefaultValidFrom = () => {\r\n  const now = new Date();\r\n  return now.toISOString().slice(0, 16); // 格式: YYYY-MM-DDTHH:mm\r\n};\r\n\r\nexport const getDefaultValidUntil = () => {\r\n  const date = new Date();\r\n  date.setMonth(date.getMonth() + 1);\r\n  return date.toISOString().slice(0, 16);\r\n};\r\n\r\nexport const initialCouponForm: CouponForm = {\r\n  code: '',\r\n  name: '',\r\n  description: '',\r\n  type: 'fixed_amount',\r\n  discount_value: 0,\r\n  min_amount: 0,\r\n  currency: 'GBP',\r\n  per_user_limit: 1,\r\n  can_combine: false,\r\n  combine_limit: 1,\r\n  apply_order: 0,\r\n  valid_from: '',\r\n  valid_until: '',\r\n  points_required: 0,\r\n  eligibility_type: '',\r\n  eligibility_value: '',\r\n  per_user_limit_window: '',\r\n  vat_category: '',\r\n  applicable_scenarios: [],\r\n  task_types: [],\r\n  locations: [],\r\n  excluded_task_types: [],\r\n};\r\n\r\n// 创建带有默认日期的表单初始值\r\nexport const createInitialCouponForm = (): CouponForm => ({\r\n  ...initialCouponForm,\r\n  valid_from: getDefaultValidFrom(),\r\n  valid_until: getDefaultValidUntil(),\r\n});\r\n","import React from 'react';\r\nimport { CouponForm } from './types';\r\n\r\ninterface CouponFormModalProps {\r\n  isOpen: boolean;\r\n  isEdit: boolean;\r\n  formData: CouponForm;\r\n  loading: boolean;\r\n  onClose: () => void;\r\n  onSubmit: () => void;\r\n  setFormData: React.Dispatch<React.SetStateAction<CouponForm>>;\r\n}\r\n\r\nconst CITIES = [\r\n  \"Online\", \"London\", \"Edinburgh\", \"Manchester\", \"Birmingham\", \"Glasgow\",\r\n  \"Bristol\", \"Sheffield\", \"Leeds\", \"Nottingham\", \"Newcastle\", \"Southampton\",\r\n  \"Liverpool\", \"Cardiff\", \"Coventry\", \"Exeter\", \"Leicester\", \"York\",\r\n  \"Aberdeen\", \"Bath\", \"Dundee\", \"Reading\", \"St Andrews\", \"Belfast\",\r\n  \"Brighton\", \"Durham\", \"Norwich\", \"Swansea\", \"Loughborough\", \"Lancaster\",\r\n  \"Warwick\", \"Cambridge\", \"Oxford\", \"Other\"\r\n];\r\n\r\nconst TASK_TYPES: { value: string; label: string }[] = [\r\n  { value: 'tutoring', label: '辅导' },\r\n  { value: 'pet_care', label: '宠物照顾' },\r\n  { value: 'delivery', label: '配送' },\r\n  { value: 'cleaning', label: '清洁' },\r\n  { value: 'moving', label: '搬家' },\r\n  { value: 'tech_support', label: '技术支持' },\r\n  { value: 'translation', label: '翻译' },\r\n  { value: 'design', label: '设计' },\r\n  { value: 'photography', label: '摄影' },\r\n  { value: 'other', label: '其他' },\r\n];\r\n\r\nconst APPLICABLE_SCENARIOS: { value: string; label: string }[] = [\r\n  { value: 'task_posting', label: '发布任务' },\r\n  { value: 'task_accepting', label: '接受任务' },\r\n  { value: 'expert_service', label: '专家服务' },\r\n  { value: 'all', label: '全部场景' },\r\n];\r\n\r\nconst ELIGIBILITY_TYPES: { value: string; label: string }[] = [\r\n  { value: '', label: '不限制' },\r\n  { value: 'member', label: '会员专属' },\r\n  { value: 'first_order', label: '首单专属' },\r\n  { value: 'new_user', label: '新用户专属' },\r\n  { value: 'user_type', label: '按用户类型' },\r\n  { value: 'all', label: '全部用户' },\r\n];\r\n\r\nconst ELIGIBILITY_VALUES: { value: string; label: string }[] = [\r\n  { value: '', label: '—' },\r\n  { value: 'vip', label: 'VIP' },\r\n  { value: 'super', label: 'Super' },\r\n  { value: 'vip,super', label: 'VIP 或 Super' },\r\n];\r\n\r\nconst LIMIT_WINDOWS: { value: string; label: string }[] = [\r\n  { value: '', label: '不限制' },\r\n  { value: 'day', label: '每天' },\r\n  { value: 'week', label: '每周' },\r\n  { value: 'month', label: '每月' },\r\n  { value: 'year', label: '每年' },\r\n];\r\n\r\nconst inputStyle: React.CSSProperties = {\r\n  width: '100%',\r\n  padding: '8px',\r\n  border: '1px solid #ddd',\r\n  borderRadius: '4px',\r\n  marginTop: '5px',\r\n  boxSizing: 'border-box',\r\n};\r\n\r\nconst labelStyle: React.CSSProperties = {\r\n  display: 'block',\r\n  marginBottom: '5px',\r\n  fontWeight: 'bold',\r\n};\r\n\r\nconst fieldStyle: React.CSSProperties = {\r\n  marginBottom: '15px',\r\n};\r\n\r\nconst hintStyle: React.CSSProperties = {\r\n  color: '#666',\r\n  fontSize: '12px',\r\n  marginTop: '5px',\r\n  display: 'block',\r\n};\r\n\r\nexport const CouponFormModal: React.FC<CouponFormModalProps> = ({\r\n  isOpen,\r\n  isEdit,\r\n  formData,\r\n  loading,\r\n  onClose,\r\n  onSubmit,\r\n  setFormData,\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const updateField = <K extends keyof CouponForm>(field: K, value: CouponForm[K]) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!formData.name || !formData.valid_from || !formData.valid_until) {\r\n      alert('请填写优惠券名称和有效期');\r\n      return;\r\n    }\r\n    if (formData.discount_value <= 0) {\r\n      alert('请填写折扣金额');\r\n      return;\r\n    }\r\n    if (formData.type === 'percentage' && (formData.discount_value < 1 || formData.discount_value > 10000)) {\r\n      alert('百分比折扣的折扣值必须在 1–10000 之间（0.01%–100%）');\r\n      return;\r\n    }\r\n    if (new Date(formData.valid_until) <= new Date(formData.valid_from)) {\r\n      alert('失效时间必须晚于生效时间');\r\n      return;\r\n    }\r\n    onSubmit();\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      background: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      zIndex: 1000,\r\n    }}>\r\n      <div style={{\r\n        background: 'white',\r\n        padding: '30px',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\r\n        minWidth: '520px',\r\n        maxWidth: '680px',\r\n        maxHeight: '90vh',\r\n        overflowY: 'auto',\r\n      }}>\r\n        <h3 style={{ margin: '0 0 20px 0', color: '#333' }}>\r\n          {isEdit ? '编辑优惠券' : '创建优惠券'}\r\n        </h3>\r\n\r\n        {/* 优惠券代码 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>优惠券代码</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.code}\r\n            onChange={(e) => updateField('code', e.target.value.toUpperCase())}\r\n            placeholder=\"留空自动生成\"\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          />\r\n          <small style={hintStyle}>\r\n            {formData.code ? '用户可以通过输入此代码兑换优惠券' : '留空后只能通过积分兑换，系统会自动生成唯一代码'}\r\n          </small>\r\n        </div>\r\n\r\n        {/* 优惠券名称 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>\r\n            优惠券名称 <span style={{ color: 'red' }}>*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.name}\r\n            onChange={(e) => updateField('name', e.target.value)}\r\n            placeholder=\"请输入优惠券名称\"\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 优惠券描述 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>描述</label>\r\n          <textarea\r\n            value={formData.description}\r\n            onChange={(e) => updateField('description', e.target.value)}\r\n            placeholder=\"请输入优惠券描述（可选）\"\r\n            rows={3}\r\n            style={{ ...inputStyle, resize: 'vertical' }}\r\n          />\r\n        </div>\r\n\r\n        {/* 折扣类型 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>\r\n            折扣类型 <span style={{ color: 'red' }}>*</span>\r\n          </label>\r\n          <select\r\n            value={formData.type}\r\n            onChange={(e) => updateField('type', e.target.value as 'fixed_amount' | 'percentage')}\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          >\r\n            <option value=\"fixed_amount\">固定金额</option>\r\n            <option value=\"percentage\">百分比折扣</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* 折扣值 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>\r\n            折扣值 {formData.type === 'percentage' ? '(基点)' : '(便士)'} <span style={{ color: 'red' }}>*</span>\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.discount_value}\r\n            onChange={(e) => updateField('discount_value', Number(e.target.value))}\r\n            placeholder={formData.type === 'percentage' ? '例如: 1000 表示 10%' : '例如: 1000 表示 £10'}\r\n            min=\"0\"\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          />\r\n          <small style={hintStyle}>\r\n            {formData.type === 'percentage'\r\n              ? '基点制：100=1%, 1000=10%, 10000=100%'\r\n              : '便士制：100=£1, 1000=£10'}\r\n          </small>\r\n        </div>\r\n\r\n        {/* 最低消费金额 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>最低消费金额 (便士)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.min_amount}\r\n            onChange={(e) => updateField('min_amount', Number(e.target.value))}\r\n            placeholder=\"0 表示无限制\"\r\n            min=\"0\"\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 最大折扣金额（仅百分比类型） */}\r\n        {formData.type === 'percentage' && (\r\n          <div style={fieldStyle}>\r\n            <label style={labelStyle}>最大折扣金额 (便士)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={formData.max_discount || ''}\r\n              onChange={(e) => updateField('max_discount', Number(e.target.value) || undefined)}\r\n              placeholder=\"留空表示无限制\"\r\n              min=\"0\"\r\n              disabled={isEdit}\r\n              style={inputStyle}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* 总发行量 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>总发行量</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.total_quantity || ''}\r\n            onChange={(e) => updateField('total_quantity', Number(e.target.value) || undefined)}\r\n            placeholder=\"留空表示无限制\"\r\n            min=\"1\"\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 每用户限用次数 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>每用户限用次数</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.per_user_limit}\r\n            onChange={(e) => updateField('per_user_limit', Number(e.target.value))}\r\n            min=\"1\"\r\n            style={inputStyle}\r\n          />\r\n          <small style={hintStyle}>每个用户最多可以使用此优惠券的次数</small>\r\n        </div>\r\n\r\n        {/* 积分要求 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>积分要求</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.points_required}\r\n            onChange={(e) => updateField('points_required', Number(e.target.value))}\r\n            placeholder=\"0 表示不需要积分\"\r\n            min=\"0\"\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 资格类型（领取限制） */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>资格类型</label>\r\n          <select\r\n            value={formData.eligibility_type}\r\n            onChange={(e) => updateField('eligibility_type', e.target.value as CouponForm['eligibility_type'])}\r\n            style={inputStyle}\r\n          >\r\n            {ELIGIBILITY_TYPES.map((opt) => (\r\n              <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n            ))}\r\n          </select>\r\n          <small style={hintStyle}>会员专属仅 VIP/Super 用户可领取</small>\r\n        </div>\r\n\r\n        {/* 资格值（当 user_type 或 member 时） */}\r\n        {(formData.eligibility_type === 'user_type' || formData.eligibility_type === 'member') && (\r\n          <div style={fieldStyle}>\r\n            <label style={labelStyle}>资格值</label>\r\n            <select\r\n              value={formData.eligibility_value}\r\n              onChange={(e) => updateField('eligibility_value', e.target.value as CouponForm['eligibility_value'])}\r\n              style={inputStyle}\r\n            >\r\n              {ELIGIBILITY_VALUES.map((opt) => (\r\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {/* 限领周期 + 每周期限领 */}\r\n        <div style={{ ...fieldStyle, display: 'flex', gap: '15px', flexWrap: 'wrap' }}>\r\n          <div style={{ flex: 1, minWidth: '140px' }}>\r\n            <label style={labelStyle}>限领周期</label>\r\n            <select\r\n              value={formData.per_user_limit_window}\r\n              onChange={(e) => updateField('per_user_limit_window', e.target.value as CouponForm['per_user_limit_window'])}\r\n              style={inputStyle}\r\n            >\r\n              {LIMIT_WINDOWS.map((opt) => (\r\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          {formData.per_user_limit_window && (\r\n            <div style={{ flex: 1, minWidth: '140px' }}>\r\n              <label style={labelStyle}>每周期限领次数</label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.per_user_per_window_limit ?? ''}\r\n                onChange={(e) => updateField('per_user_per_window_limit', e.target.value ? Number(e.target.value) : undefined)}\r\n                placeholder=\"例如: 1\"\r\n                min=\"1\"\r\n                style={inputStyle}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* 每日限领 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>每日限领次数</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.per_day_limit ?? ''}\r\n            onChange={(e) => updateField('per_day_limit', e.target.value ? Number(e.target.value) : undefined)}\r\n            placeholder=\"留空表示不限制\"\r\n            min=\"1\"\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 适用场景 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>适用场景</label>\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px', marginTop: '5px' }}>\r\n            {APPLICABLE_SCENARIOS.map((scenario) => (\r\n              <label key={scenario.value} style={{ display: 'flex', alignItems: 'center', gap: '5px', cursor: 'pointer' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.applicable_scenarios.includes(scenario.value)}\r\n                  onChange={(e) => {\r\n                    if (e.target.checked) {\r\n                      updateField('applicable_scenarios', [...formData.applicable_scenarios, scenario.value]);\r\n                    } else {\r\n                      updateField('applicable_scenarios', formData.applicable_scenarios.filter(s => s !== scenario.value));\r\n                    }\r\n                  }}\r\n                  disabled={isEdit}\r\n                  style={{ width: '16px', height: '16px', cursor: 'pointer' }}\r\n                />\r\n                {scenario.label}\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* 适用任务类型 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>适用任务类型</label>\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px', marginTop: '5px' }}>\r\n            {TASK_TYPES.map((type) => (\r\n              <label key={type.value} style={{ display: 'flex', alignItems: 'center', gap: '5px', cursor: 'pointer' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.task_types.includes(type.value)}\r\n                  onChange={(e) => {\r\n                    if (e.target.checked) {\r\n                      updateField('task_types', [...formData.task_types, type.value]);\r\n                    } else {\r\n                      updateField('task_types', formData.task_types.filter(t => t !== type.value));\r\n                    }\r\n                  }}\r\n                  style={{ width: '16px', height: '16px', cursor: 'pointer' }}\r\n                />\r\n                {type.label}\r\n              </label>\r\n            ))}\r\n          </div>\r\n          <small style={hintStyle}>不选表示不限任务类型</small>\r\n        </div>\r\n\r\n        {/* 排除的任务类型 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>排除的任务类型</label>\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px', marginTop: '5px' }}>\r\n            {TASK_TYPES.map((type) => (\r\n              <label key={type.value} style={{ display: 'flex', alignItems: 'center', gap: '5px', cursor: 'pointer' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.excluded_task_types.includes(type.value)}\r\n                  onChange={(e) => {\r\n                    if (e.target.checked) {\r\n                      updateField('excluded_task_types', [...formData.excluded_task_types, type.value]);\r\n                    } else {\r\n                      updateField('excluded_task_types', formData.excluded_task_types.filter(t => t !== type.value));\r\n                    }\r\n                  }}\r\n                  style={{ width: '16px', height: '16px', cursor: 'pointer' }}\r\n                />\r\n                {type.label}\r\n              </label>\r\n            ))}\r\n          </div>\r\n          <small style={hintStyle}>勾选的任务类型不可使用此优惠券</small>\r\n        </div>\r\n\r\n        {/* 任务金额范围 */}\r\n        <div style={{ ...fieldStyle, display: 'flex', gap: '15px', flexWrap: 'wrap' }}>\r\n          <div style={{ flex: 1, minWidth: '140px' }}>\r\n            <label style={labelStyle}>最低任务金额 (便士)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={formData.min_task_amount ?? ''}\r\n              onChange={(e) => updateField('min_task_amount', e.target.value ? Number(e.target.value) : undefined)}\r\n              placeholder=\"留空不限制\"\r\n              min=\"0\"\r\n              style={inputStyle}\r\n            />\r\n          </div>\r\n          <div style={{ flex: 1, minWidth: '140px' }}>\r\n            <label style={labelStyle}>最高任务金额 (便士)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={formData.max_task_amount ?? ''}\r\n              onChange={(e) => updateField('max_task_amount', e.target.value ? Number(e.target.value) : undefined)}\r\n              placeholder=\"留空不限制\"\r\n              min=\"0\"\r\n              style={inputStyle}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* 适用地点 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>适用地点</label>\r\n          <select\r\n            multiple\r\n            value={formData.locations}\r\n            onChange={(e) => {\r\n              const selected = Array.from(e.target.selectedOptions, option => option.value);\r\n              updateField('locations', selected);\r\n            }}\r\n            style={{ ...inputStyle, height: '120px' }}\r\n          >\r\n            {CITIES.map((city) => (\r\n              <option key={city} value={city}>\r\n                {city}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <small style={hintStyle}>按住 Ctrl/Cmd 可多选</small>\r\n        </div>\r\n\r\n        {/* 生效时间 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>\r\n            生效时间 <span style={{ color: 'red' }}>*</span>\r\n          </label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={formData.valid_from}\r\n            onChange={(e) => updateField('valid_from', e.target.value)}\r\n            disabled={isEdit}\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 失效时间 */}\r\n        <div style={fieldStyle}>\r\n          <label style={labelStyle}>\r\n            失效时间 <span style={{ color: 'red' }}>*</span>\r\n          </label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={formData.valid_until}\r\n            onChange={(e) => updateField('valid_until', e.target.value)}\r\n            style={inputStyle}\r\n          />\r\n        </div>\r\n\r\n        {/* 允许叠加 */}\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={formData.can_combine}\r\n              onChange={(e) => updateField('can_combine', e.target.checked)}\r\n              disabled={isEdit}\r\n              style={{ width: '18px', height: '18px', cursor: 'pointer' }}\r\n            />\r\n            <span style={{ fontWeight: 'bold' }}>允许与其他优惠券叠加使用</span>\r\n          </label>\r\n        </div>\r\n\r\n        {/* 按钮 */}\r\n        <div style={{ display: 'flex', gap: '10px', justifyContent: 'flex-end' }}>\r\n          <button\r\n            onClick={handleClose}\r\n            disabled={loading}\r\n            style={{\r\n              padding: '10px 20px',\r\n              border: '1px solid #ddd',\r\n              background: 'white',\r\n              color: '#666',\r\n              borderRadius: '4px',\r\n              cursor: loading ? 'not-allowed' : 'pointer',\r\n              opacity: loading ? 0.6 : 1,\r\n            }}\r\n          >\r\n            取消\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n            style={{\r\n              padding: '10px 20px',\r\n              border: 'none',\r\n              background: '#007bff',\r\n              color: 'white',\r\n              borderRadius: '4px',\r\n              cursor: loading ? 'not-allowed' : 'pointer',\r\n              opacity: loading ? 0.6 : 1,\r\n            }}\r\n          >\r\n            {loading ? '提交中...' : isEdit ? '更新' : '创建'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CouponFormModal;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"CouponManagement_container__cKRUK\",\"header\":\"CouponManagement_header__ygtYb\",\"title\":\"CouponManagement_title__ltd7Y\",\"btnCreate\":\"CouponManagement_btnCreate__f-7He\",\"filters\":\"CouponManagement_filters__4S6pB\",\"filterGroup\":\"CouponManagement_filterGroup__da7tB\",\"select\":\"CouponManagement_select__sRiVU\",\"table\":\"CouponManagement_table__9nlBA\",\"code\":\"CouponManagement_code__pje5k\",\"validity\":\"CouponManagement_validity__FSX4w\",\"actions\":\"CouponManagement_actions__8K49-\",\"btnEdit\":\"CouponManagement_btnEdit__A78db\",\"btnDelete\":\"CouponManagement_btnDelete__yvpl1\"};","import React, { useState, useCallback } from 'react';\r\nimport { message } from 'antd';\r\nimport { useAdminTable, useModalForm } from '../../../hooks';\r\nimport { AdminTable, AdminPagination, StatusBadge, Column } from '../../../components/admin';\r\nimport { getCoupons, createCoupon, updateCoupon, deleteCoupon } from '../../../api';\r\nimport { getErrorMessage } from '../../../utils/errorHandler';\r\nimport { Coupon, CouponForm, initialCouponForm, createInitialCouponForm } from './types';\r\nimport { CouponFormModal } from './CouponFormModal';\r\nimport styles from './CouponManagement.module.css';\r\n\r\nexport const CouponManagement: React.FC = () => {\r\n  const [statusFilter, setStatusFilter] = useState<string>('');\r\n\r\n  // 使用 useCallback 避免 fetchData 引用变化导致 useAdminTable 无限重试\r\n  const fetchCoupons = useCallback(async ({ page, pageSize, filters }: { page: number; pageSize: number; searchTerm?: string; filters?: Record<string, any> }) => {\r\n    const response = await getCoupons({\r\n      page,\r\n      limit: pageSize,\r\n      status: filters?.status as 'active' | 'inactive' | 'expired' | undefined,\r\n    });\r\n    return {\r\n      data: response.data || [],\r\n      total: response.total || 0,\r\n    };\r\n  }, []);\r\n\r\n  const handleFetchError = useCallback((error: any) => {\r\n    message.error(`加载优惠券列表失败：${getErrorMessage(error)}`);\r\n    console.error('Coupon list fetch error:', error);\r\n  }, []);\r\n\r\n  // 使用共享的表格 Hook\r\n  const table = useAdminTable<Coupon>({\r\n    fetchData: fetchCoupons,\r\n    initialPageSize: 20,\r\n    onError: handleFetchError,\r\n  });\r\n\r\n  // 使用共享的模态框表单 Hook\r\n  const modal = useModalForm<CouponForm>({\r\n    initialValues: initialCouponForm,\r\n    onSubmit: async (values, isEdit) => {\r\n      // 构建符合 CouponData 接口的数据\r\n      const data: any = {\r\n        code: values.code && values.code.trim() ? values.code.toUpperCase() : undefined,\r\n        name: values.name,\r\n        description: values.description || undefined,\r\n        type: values.type,\r\n        discount_value: values.discount_value,\r\n        min_amount: values.min_amount || 0,\r\n        max_discount: values.max_discount,\r\n        currency: values.currency,\r\n        total_quantity: values.total_quantity,\r\n        per_user_limit: values.per_user_limit || 1,\r\n        can_combine: values.can_combine,\r\n        combine_limit: values.combine_limit || 1,\r\n        apply_order: values.apply_order || 0,\r\n        valid_from: values.valid_from,\r\n        valid_until: values.valid_until,\r\n        // usage_conditions 包含 locations, task_types, excluded_task_types, min_task_amount, max_task_amount\r\n        usage_conditions: (() => {\r\n          const conditions: any = {};\r\n          if (values.task_types.length > 0) conditions.task_types = values.task_types;\r\n          if (values.locations.length > 0) conditions.locations = values.locations;\r\n          if (values.excluded_task_types.length > 0) conditions.excluded_task_types = values.excluded_task_types;\r\n          if (values.min_task_amount != null && values.min_task_amount > 0) conditions.min_task_amount = values.min_task_amount;\r\n          if (values.max_task_amount != null && values.max_task_amount > 0) conditions.max_task_amount = values.max_task_amount;\r\n          return Object.keys(conditions).length > 0 ? conditions : undefined;\r\n        })(),\r\n        // points_required 和 applicable_scenarios 是顶级字段\r\n        points_required: values.points_required || 0,\r\n        applicable_scenarios: values.applicable_scenarios.length > 0 ? values.applicable_scenarios : undefined,\r\n        per_device_limit: values.per_device_limit,\r\n        per_ip_limit: values.per_ip_limit,\r\n        per_day_limit: values.per_day_limit,\r\n        eligibility_type: values.eligibility_type ? values.eligibility_type : (isEdit ? '' : undefined),\r\n        eligibility_value: values.eligibility_value ? values.eligibility_value : (isEdit ? '' : undefined),\r\n        per_user_limit_window: values.per_user_limit_window || undefined,\r\n        per_user_per_window_limit: values.per_user_per_window_limit ?? undefined,\r\n      };\r\n\r\n      if (isEdit && values.id) {\r\n        await updateCoupon(values.id, data);\r\n        message.success('优惠券更新成功');\r\n      } else {\r\n        await createCoupon(data);\r\n        message.success('优惠券创建成功');\r\n      }\r\n\r\n      table.refresh();\r\n    },\r\n    onError: (error) => {\r\n      message.error(`操作失败：${error.response?.data?.detail || error.message}`);\r\n    },\r\n  });\r\n\r\n  // 处理删除\r\n  const handleDelete = async (coupon: Coupon) => {\r\n    if (!window.confirm(`确定要删除优惠券\"${coupon.name}\"吗？`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteCoupon(coupon.id);\r\n      message.success('优惠券删除成功');\r\n      table.refresh();\r\n    } catch (error: any) {\r\n      message.error(`删除失败：${error.response?.data?.detail || error.message}`);\r\n    }\r\n  };\r\n\r\n  // 处理编辑\r\n  const handleEdit = (coupon: Coupon) => {\r\n    const toDatetimeLocal = (v: string | undefined) => {\r\n      if (!v) return '';\r\n      const d = new Date(v);\r\n      return d.toISOString().slice(0, 16);\r\n    };\r\n    const formData: CouponForm = {\r\n      id: coupon.id,\r\n      code: coupon.code,\r\n      name: coupon.name,\r\n      description: coupon.description || '',\r\n      type: coupon.type,\r\n      discount_value: coupon.discount_value,\r\n      min_amount: coupon.min_amount ?? 0,\r\n      max_discount: coupon.max_discount,\r\n      currency: coupon.currency || 'GBP',\r\n      total_quantity: coupon.total_quantity,\r\n      per_user_limit: coupon.per_user_limit ?? 1,\r\n      per_device_limit: undefined,\r\n      per_ip_limit: undefined,\r\n      can_combine: coupon.can_combine ?? false,\r\n      combine_limit: 1,\r\n      apply_order: 0,\r\n      valid_from: toDatetimeLocal(coupon.valid_from),\r\n      valid_until: toDatetimeLocal(coupon.valid_until),\r\n      points_required: coupon.points_required ?? 0,\r\n      eligibility_type: (coupon.eligibility_type as CouponForm['eligibility_type']) || '',\r\n      eligibility_value: (coupon.eligibility_value as CouponForm['eligibility_value']) || '',\r\n      per_day_limit: coupon.per_day_limit,\r\n      per_user_limit_window: (coupon.per_user_limit_window as CouponForm['per_user_limit_window']) || '',\r\n      per_user_per_window_limit: coupon.per_user_per_window_limit,\r\n      vat_category: '',\r\n      applicable_scenarios: coupon.applicable_scenarios || [],\r\n      task_types: coupon.usage_conditions?.task_types || [],\r\n      locations: coupon.usage_conditions?.locations || [],\r\n      excluded_task_types: coupon.usage_conditions?.excluded_task_types || [],\r\n      min_task_amount: coupon.usage_conditions?.min_task_amount,\r\n      max_task_amount: coupon.usage_conditions?.max_task_amount,\r\n    };\r\n    modal.open(formData);\r\n  };\r\n\r\n  // 表格列定义\r\n  const columns: Column<Coupon>[] = [\r\n    {\r\n      key: 'id',\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      width: 80,\r\n    },\r\n    {\r\n      key: 'code',\r\n      title: '代码',\r\n      dataIndex: 'code',\r\n      width: 120,\r\n      render: (value) => <code className={styles.code}>{value}</code>,\r\n    },\r\n    {\r\n      key: 'name',\r\n      title: '名称',\r\n      dataIndex: 'name',\r\n      width: 200,\r\n    },\r\n    {\r\n      key: 'type',\r\n      title: '类型',\r\n      dataIndex: 'type',\r\n      width: 100,\r\n      render: (value) => (value === 'fixed_amount' ? '满减' : '折扣'),\r\n    },\r\n    {\r\n      key: 'discount',\r\n      title: '折扣值',\r\n      width: 120,\r\n      render: (_, record) =>\r\n        record.type === 'fixed_amount'\r\n          ? `£${(record.discount_value / 100).toFixed(2)}`\r\n          : `${(record.discount_value / 100).toFixed(2)}%`,\r\n    },\r\n    {\r\n      key: 'points',\r\n      title: '积分',\r\n      dataIndex: 'points_required',\r\n      width: 100,\r\n      render: (value) => value || '-',\r\n    },\r\n    {\r\n      key: 'usage',\r\n      title: '使用量',\r\n      width: 120,\r\n      render: (_, record) => {\r\n        const total = record.total_quantity || '∞';\r\n        return `${record.used_quantity} / ${total}`;\r\n      },\r\n    },\r\n    {\r\n      key: 'status',\r\n      title: '状态',\r\n      dataIndex: 'status',\r\n      width: 100,\r\n      render: (value) => {\r\n        const statusMap: Record<string, { text: string; variant: any }> = {\r\n          active: { text: '激活', variant: 'success' },\r\n          inactive: { text: '停用', variant: 'secondary' },\r\n          expired: { text: '过期', variant: 'danger' },\r\n        };\r\n        const config = statusMap[value] || { text: value, variant: 'default' };\r\n        return <StatusBadge text={config.text} variant={config.variant} />;\r\n      },\r\n    },\r\n    {\r\n      key: 'validity',\r\n      title: '有效期',\r\n      width: 200,\r\n      render: (_, record) => (\r\n        <div className={styles.validity}>\r\n          <div>{new Date(record.valid_from).toLocaleDateString()}</div>\r\n          <div>至</div>\r\n          <div>{new Date(record.valid_until).toLocaleDateString()}</div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      key: 'actions',\r\n      title: '操作',\r\n      width: 150,\r\n      align: 'center',\r\n      render: (_, record) => (\r\n        <div className={styles.actions}>\r\n          <button className={styles.btnEdit} onClick={() => handleEdit(record)}>\r\n            编辑\r\n          </button>\r\n          <button className={styles.btnDelete} onClick={() => handleDelete(record)}>\r\n            删除\r\n          </button>\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 更新筛选条件\r\n  const handleStatusFilterChange = (status: string) => {\r\n    setStatusFilter(status);\r\n    table.setFilters({ status: status || undefined });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {/* Header */}\r\n      <div className={styles.header}>\r\n        <h2 className={styles.title}>优惠券管理</h2>\r\n        <button className={styles.btnCreate} onClick={() => modal.open(createInitialCouponForm(), true)}>\r\n          + 创建优惠券\r\n        </button>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className={styles.filters}>\r\n        <div className={styles.filterGroup}>\r\n          <label>状态筛选：</label>\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => handleStatusFilterChange(e.target.value)}\r\n            className={styles.select}\r\n          >\r\n            <option value=\"\">全部状态</option>\r\n            <option value=\"active\">激活</option>\r\n            <option value=\"inactive\">停用</option>\r\n            <option value=\"expired\">过期</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <AdminTable\r\n        columns={columns}\r\n        data={table.data}\r\n        loading={table.loading}\r\n        rowKey=\"id\"\r\n        emptyText=\"暂无优惠券数据\"\r\n        className={styles.table}\r\n      />\r\n\r\n      {/* Pagination */}\r\n      <AdminPagination\r\n        currentPage={table.currentPage}\r\n        totalPages={table.totalPages}\r\n        total={table.total}\r\n        pageSize={table.pageSize}\r\n        onPageChange={table.setCurrentPage}\r\n        onPageSizeChange={table.setPageSize}\r\n      />\r\n\r\n      {/* Form Modal */}\r\n      <CouponFormModal\r\n        isOpen={modal.isOpen}\r\n        isEdit={modal.isEdit}\r\n        formData={modal.formData}\r\n        loading={modal.loading}\r\n        onClose={modal.close}\r\n        onSubmit={modal.handleSubmit}\r\n        setFormData={modal.setFormData}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CouponManagement;\r\n"],"names":["getDefaultValidUntil","date","Date","setMonth","getMonth","toISOString","slice","initialCouponForm","code","name","description","type","discount_value","min_amount","currency","per_user_limit","can_combine","combine_limit","apply_order","valid_from","valid_until","points_required","eligibility_type","eligibility_value","per_user_limit_window","vat_category","applicable_scenarios","task_types","locations","excluded_task_types","CITIES","TASK_TYPES","value","label","APPLICABLE_SCENARIOS","ELIGIBILITY_TYPES","ELIGIBILITY_VALUES","LIMIT_WINDOWS","inputStyle","width","padding","border","borderRadius","marginTop","boxSizing","labelStyle","display","marginBottom","fontWeight","fieldStyle","hintStyle","color","fontSize","CouponFormModal","_ref","_formData$per_user_pe","_formData$per_day_lim","_formData$min_task_am","_formData$max_task_am","isOpen","isEdit","formData","loading","onClose","onSubmit","setFormData","updateField","field","prev","_objectSpread","_jsx","style","position","top","left","right","bottom","background","justifyContent","alignItems","zIndex","children","_jsxs","boxShadow","minWidth","maxWidth","maxHeight","overflowY","margin","onChange","e","target","toUpperCase","placeholder","disabled","rows","resize","Number","min","max_discount","undefined","total_quantity","map","opt","gap","flexWrap","flex","per_user_per_window_limit","per_day_limit","scenario","cursor","checked","includes","filter","s","height","t","min_task_amount","max_task_amount","multiple","selected","Array","from","selectedOptions","option","city","onClick","handleClose","opacity","handleSubmit","alert","CouponManagement","statusFilter","setStatusFilter","useState","fetchCoupons","useCallback","async","page","pageSize","filters","response","getCoupons","limit","status","data","total","handleFetchError","error","message","concat","getErrorMessage","console","table","useAdminTable","fetchData","initialPageSize","onError","modal","useModalForm","initialValues","values","_values$per_user_per_","trim","usage_conditions","conditions","length","Object","keys","per_device_limit","per_ip_limit","id","updateCoupon","success","createCoupon","refresh","_error$response","_error$response$data","detail","columns","key","title","dataIndex","render","className","styles","_","record","toFixed","used_quantity","config","active","text","variant","inactive","expired","StatusBadge","toLocaleDateString","align","coupon","_coupon$min_amount","_coupon$per_user_limi","_coupon$can_combine","_coupon$points_requir","_coupon$usage_conditi","_coupon$usage_conditi2","_coupon$usage_conditi3","_coupon$usage_conditi4","_coupon$usage_conditi5","toDatetimeLocal","v","open","handleEdit","window","confirm","deleteCoupon","_error$response2","_error$response2$data","handleDelete","handleStatusFilterChange","setFilters","AdminTable","rowKey","emptyText","AdminPagination","currentPage","totalPages","onPageChange","setCurrentPage","onPageSizeChange","setPageSize","close"],"sourceRoot":""}